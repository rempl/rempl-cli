(function(){"use strict";var e={"0.js":"app","1.js":"basis.app","2.js":"basis.data","3.js":"basis.data.state","4.js":"basis.data.subscription","5.js":"basis.data.resolve","6.js":"basis.event","7.js":"basis.ui","8.js":"basis.template.html","9.js":"basis.l10n","a.js":"basis.template.htmlfgen","b.js":"basis.template.const","c.js":"basis.template.namespace","d.js":"basis.template","e.js":"basis.template.declaration","f.js":"basis.template.store","g.js":"basis.template.theme","h.js":"basis.template.buildDom","i.js":"basis.dom.event","j.js":"basis.dom.wrapper","k.js":"basis.entity","l.js":"basis.data.dataset","m.js":"basis.type","n.js":"basis.data.object","o.js":"basis.router","p.js":"basis.data.value"},t={"0.tmpl":[[1,0,["element"],"div",[1,0,0,"div",[4,0,0,"itwu3twmiae2es1c__offline-overlay"],[5,[[["online"],[0],"display","hide"]],0,null],[1,0,0,"div",[4,0,0,"itwu3twmiae2es1c__lopawpbdlv6xxbnc__spinner"],[1,0,0,"span",[4,0,0,"itwu3twmiae2es1c__lopawpbdlv6xxbnc__label"],[3,0,0,"Await for connection with server..."]],[1,0,0,"div",[4,0,0,"itwu3twmiae2es1c__lopawpbdlv6xxbnc__circle"]],[1,0,0,"div",[4,0,0,"itwu3twmiae2es1c__lopawpbdlv6xxbnc__circle"]],[1,0,0,"div",[4,0,0,"itwu3twmiae2es1c__lopawpbdlv6xxbnc__circle"]]]],[1,0,0,"div",[4,0,0,"itwu3twmiae2es1c__toolbar"],[1,0,0,"span",[4,0,0,"itwu3twmiae2es1c__dhi1htbk98eezh5s__button"],[3,"l10n:togglePickMode.{pickMode}@0.l10n",0],[6,"click","togglePublisherPick"]],[1,0,0,"span",[4,0,0,"itwu3twmiae2es1c__x4jhtkohucje9ef1__button"],[9,1,[3,0,0,"reload"]],[5,[[["dev"],[0],"display","show"]],0,"display:none"],[6,"click","reload"]]],[8,1,["endpoints"]],[8,1,["sandbox"]]]],"1.tmpl":[[1,0,["element"],"div",[4,0,0,"o187u615r17x8ryb__list"],[1,0,0,"div",[4,0,0,"o187u615r17x8ryb__empty"],[5,[[["empty"],[0],"display","show"]],0,"display:none"],[3,0,0,"No endpoints connected"]]],[9,0]],"2.tmpl":[[1,0,["element"],"div",[4,[["npnf14gj43ieotar__item_","selected",2,"selected",0],["npnf14gj43ieotar__item_","empty",2,"empty",0]],0,"npnf14gj43ieotar__item"],[6,"click","select"],[1,0,0,"span",[4,0,0,"npnf14gj43ieotar__num"],[5,[[["pickMode"],[0],"display","show"]],0,"display:none"],[3,1,["num"]]],[1,0,0,"span",[4,[["npnf14gj43ieotar__title_","online",2,"online",0],["npnf14gj43ieotar__title_","empty",2,"empty",0]],0,"npnf14gj43ieotar__title"],[3,1,["title"]],[3,0,0," "]],[1,0,0,"span",[4,0,0,"npnf14gj43ieotar__location"],[5,[[["isBrowser"],[0],"display","show"]],0,"display:none"],[3,1,["location"]],[3,0,0," "]],[1,0,0,"span",[4,0,0,"npnf14gj43ieotar__pid"],[5,[[["isNode"],[0],"display","show"]],0,"display:none"],[3,0,0,"PID: "],[3,1,["pid"]],[3,0,0," "]],[1,0,0,"div",[4,0,0,"npnf14gj43ieotar__publishers"],[8,1,["childNodesHere"]]]],[9,0]],"3.tmpl":[[1,0,["element"],"span",[4,0,0,"to6qhebloehnj6vl__publisher"],[6,"click","select"],[3,1,["name"]]],[9,0]],"4.tmpl":[[1,0,["element"],"div",[4,0,0,"c1g83hqjaqratxk1__layout"],[5,[[["hasPublisher"],[0],"visibility","visible"]],0,"visibility:hidden"],[1,0,0,"div",[4,0,0,"c1g83hqjaqratxk1__toolbar"],[5,[[["nonExclusiveMode"],[0],"display","show"]],0,"display:none"],[1,0,0,"span",[4,0,0,"c1g83hqjaqratxk1__u18hn1i6pssb5bbi__button"],[3,0,0,"‚Üê Back"],[6,"click","drop"]],[1,0,0,"div",[4,0,0,"c1g83hqjaqratxk1__header"],[1,0,0,"span",[4,[["c1g83hqjaqratxk1__title_","online",2,"online",0]],0,"c1g83hqjaqratxk1__title"],[5,[[["title"],[0],"visibility","visible"]],0,"visibility:hidden"],[3,1,["title"]]],[1,0,0,"span",[4,0,0,"c1g83hqjaqratxk1__location"],[5,[[["isBrowser"],[0],"display","show"]],0,"display:none"],[3,1,["location"]]],[1,0,0,"span",[4,0,0,"c1g83hqjaqratxk1__pid"],[5,[[["isNode"],[0],"display","show"]],0,"display:none"],[3,0,0,"PID: "],[3,1,["pid"]]]]],[1,1,["frameWrapper"],"div",[4,0,0,"c1g83hqjaqratxk1__frame-wrapper"],[1,0,0,"div",[4,0,0,"c1g83hqjaqratxk1__ucvl8d5u17dctp1y__spinner"],[1,0,0,"span",[4,0,0,"c1g83hqjaqratxk1__ucvl8d5u17dctp1y__label"],[9,1,[3,0,0,"Fetching UI..."]]],[1,0,0,"div",[4,0,0,"c1g83hqjaqratxk1__ucvl8d5u17dctp1y__circle"]],[1,0,0,"div",[4,0,0,"c1g83hqjaqratxk1__ucvl8d5u17dctp1y__circle"]],[1,0,0,"div",[4,0,0,"c1g83hqjaqratxk1__ucvl8d5u17dctp1y__circle"]],[5,[[["loading"],[0],"display","show"]],0,"display:none"]],[1,0,0,"div",[4,0,0,"c1g83hqjaqratxk1__error"],[5,[[["error"],[0],"display","show"]],0,"display:none"],[3,1,["error"]]]]]],"0.l10n":{"en-US":{togglePickMode:{"false":"Pick publisher","true":"Cancel pick mode"}}},"6.js":function(e,t,n,r,i,s,o,u,a){function v(e){var t=h[e];return t||(t=function(){var t=this,n,r;while(t=t.handler){r=t.callbacks[e];if(typeof r=="function"){if(!n){n=[this];for(var i=0;i<arguments.length;i++)n.push(arguments[i])}r.apply(t.context||this,n)}r=t.callbacks["*"];if(typeof r=="function"){if(!n){n=[this];for(var i=0;i<arguments.length;i++)n.push(arguments[i])}r.call(t.context||this,{sender:this,type:e,args:n})}}},h[e]=t),t}function m(e,t){var n={events:[]};if(e){e=String(e).trim().split(/\s+|\s*,\s*/).sort(),n={events:e};for(var r=0,i;i=e[r];r++)i!="destroy"&&(n[i]=t)}return n}var f="basis.event",l=n.Class,c={},h={},p=function(){},d=function(){},g=l(null,{className:f+".Emitter",extendConstructor_:!0,propertyDescriptors:l.customExtendProperty({basisObjectId:!0,propertyDescriptors:!1,handler:!1,listen:!1},function(e,t){for(var n in t){var r=t[n];r===!0||r=="<static>"?r={isStatic:!0}:r===!1?r={isPrivate:!0}:typeof r=="string"&&(r={events:r}),e[n]=r}}),handler:null,emit_destroy:v("destroy"),listen:l.nestedExtendProperty(),init:function(){this.handler&&!this.handler.callbacks&&(this.handler={callbacks:this.handler,context:this,handler:null})},addHandler:function(e,t){t=t||this,this.handler={callbacks:e,context:t,handler:this.handler}},removeHandler:function(e,t){if(this.destroy===d)return;var n=this,r;t=t||this;while(r=n,n=n.handler)if(n.callbacks===e&&n.context===t){n.callbacks=c,r.handler=n.handler;return}},destroy:function(){this.destroy=p,this.emit_destroy(),this.handler=null,this.destroy=d}});t.exports={create:v,createHandler:m,events:h,Emitter:g}},"q.js":function(e,t,n,r,i,s,o,u,a){function g(e){var t=e.syncAction();if(t&&typeof t.then=="function"){var n=e.syncAction;e.state!=h.PROCESSING&&e.setState(h.PROCESSING),t.then(function(){e.syncAction===n&&e.state==h.PROCESSING&&e.setState(h.READY)},function(t){e.syncAction===n&&e.state==h.PROCESSING&&e.setState(h.ERROR,t)})}}var f=n.require("./6.js"),l=f.Emitter,c=f.create,h=n.require("./3.js"),p=n.require("./4.js"),d=n.require("./5.js").resolveValue,v=n.PROXY,m={subscribersChanged:function(e){this.set(e.subscriberCount>0)}},y=l.subclass({className:"basis.data.AbstractData",propertyDescriptors:{state:"stateChanged",active:"activeChanged",subscriberCount:"subscribersChanged",subscribeTo:!1,syncAction:!1,syncEvents:!1},state:h.UNDEFINED,stateRA_:null,emit_stateChanged:c("stateChanged","oldState"),active:!1,activeRA_:null,emit_activeChanged:c("activeChanged"),subscribeTo:p.NONE,subscriberCount:0,subscribers_:null,emit_subscribersChanged:c("subscribersChanged","delta"),syncEvents:n.Class.oneFunctionProperty(function(){this.isSyncRequired()&&g(this)},{stateChanged:!0,subscribersChanged:!0}),syncAction:null,init:function(){l.prototype.init.call(this),this.active&&(this.active===v&&(this.active=new n.Token(this.subscriberCount>0),this.addHandler(m,this.active)),this.active=!!d(this,this.setActive,this.active,"activeRA_"),this.active&&this.addHandler(p.getMaskConfig(this.subscribeTo).handler));if(this.state!=h.UNDEFINED){var e=this.state;typeof this.state!="string"&&(e=d(this,this.setState,e,"stateRA_")),e&&!h.isValid(e)&&(e=!1),this.state=e||h.UNDEFINED}var t=this.syncAction;t&&(this.syncAction=null,this.setSyncAction(t))},setState:function(e,t){e=d(this,this.setState,e,"stateRA_")||h.UNDEFINED;var n=String(e);if(!h.isValid(n))return!1;this.stateRA_&&t===undefined&&(t=e.data);if(this.state!=n||this.state.data!=t){var r=this.state;return this.state=Object(n),this.state.data=t,this.emit_stateChanged(r),!0}return!1},deprecate:function(){this.state!=h.PROCESSING&&this.setState(h.DEPRECATED)},setActive:function(e){var t=this.activeRA_&&this.activeRA_.proxyToken;return e===v?(t||(t=new n.Token(this.subscriberCount>0),this.addHandler(m,t)),e=t):t&&e!==t&&(this.removeHandler(m,t),t=null),e=!!d(this,this.setActive,e,"activeRA_"),t&&this.activeRA_&&(this.activeRA_.proxyToken=t),this.active!=e?(this.active=e,this.emit_activeChanged(),e?p.subscribe(this,this.subscribeTo):p.unsubscribe(this,this.subscribeTo),!0):!1},setSubscription:function(e){var t=this.subscribeTo,n=e&p.ALL,r=t^n;return r?(this.subscribeTo=n,this.active&&p.changeSubscription(this,t,n),!0):!1},isSyncRequired:function(){return this.subscriberCount>0&&(this.state==h.UNDEFINED||this.state==h.DEPRECATED)},setSyncAction:function(e){var t=this.syncAction;typeof e!="function"&&(e=null),this.syncAction=e,e?(t||this.addHandler(this.syncEvents),this.isSyncRequired()&&g(this)):t&&this.removeHandler(this.syncEvents)},destroy:function(){l.prototype.destroy.call(this);if(this.active){var e=p.getMaskConfig(this.subscribeTo);for(var t=0,n;n=e.actions[t];t++)n(p.unlink,this)}this.activeRA_&&d(this,!1,!1,"activeRA_"),this.stateRA_&&d(this,!1,!1,"stateRA_"),this.state=h.UNDEFINED}});t.exports=y},"r.js":function(e,t,n,r,i,s,o,u,a){var f=n.require("./7.js").Node,l=n.require("./17.js"),c=n.require("./1u.js");t.exports=new f({template:n.template.get(".0"),binding:{online:l.online,pickMode:c.isPickMode,endpoints:"satellite:",sandbox:"satellite:"},action:{reload:function(){location.reload()},togglePublisherPick:function(){c.togglePickMode()}},satellite:{endpoints:n.require("./1v.js"),sandbox:{delegate:c.selected,instance:n.require("./1w.js")}},dropSelection:function(){c.unselect()}})},"7.js":function(e,t,n,r,i,s,o,u,a){function E(e,t){e.bindingId=w++;for(var r in t){var i=null,s=t[r];B&&s instanceof B||n.resource.isResource(s)?i={events:"satelliteChanged",getter:function(e,t){var n=typeof t=="function"?t:null,r=function(i){r=!1;if(n){t=n();if(t instanceof B==0)return;n=null}i.setSatellite(e,t)};return function(t){return r&&r(t),n||(t.satellite[e]?t.satellite[e].element:null)}}(r,s)}:s&&(typeof s=="string"?s=S.process(r,s):s.bindingBridge&&(s=n.fn.$const(s)),typeof s!="object"?i={getter:typeof s=="function"?s:n.getter(s)}:Array.isArray(s)?i={events:s[0],getter:n.getter(s[1])}:i={events:s.events,getter:n.getter(s.getter)}),e[r]=i}}function A(){return L.pop()||l.createDocumentFragment()}function O(e){var t=e.nodes;if(t)for(var n=t.length-1,r;r=t[n];n--)r.parentNode.insertBefore(r,r.nextSibling)}var f="basis.ui",l=r.document,c=n.Class,h=n.require("./6.js").create,p=n.require("./8.js").Template,d=n.require("./b.js").MARKER,v=n.require("./d.js").TemplateSwitcher,m=n.require("./j.js"),g=m.Node,y=m.PartitionNode,b=m.GroupingNode,w=1,S=function(){var e={},t=/^([a-z_][a-z0-9_]*):(.*)/i;return{add:function(t,n){e[t]||(e[t]=n)},process:function(n,r){var i,s=r.match(t);return s&&(i=e[s[1]],r=s[2]||n),i?i(r):r}}}();S.add("data",function(e){return{events:"update",getter:"data."+e}}),S.add("satellite",function(e){return{events:"satelliteChanged",getter:function(t){return t.satellite[e]?t.satellite[e].element:null}}});var x=c.customExtendProperty({$role:{events:"ownerSatelliteNameChanged",getter:function(e){if(e.role){var t=e.roleId&&e.binding[e.roleId];if(t&&typeof t.getter=="function"){t=t.getter(e);if(t===undefined)return""}return e.role+(t!==undefined?"("+t+")":"")}return e.ownerSatelliteName||""}},active:{events:"activeChanged",getter:function(e){return e.active}},state:{events:"stateChanged",getter:function(e){return String(e.state)}},childNodesState:{events:"childNodesStateChanged",getter:function(e){return String(e.childNodesState)}},childCount:{events:"childNodesModified",getter:function(e){return e.childNodes?e.childNodes.length:0}},hasChildren:{events:"childNodesModified",getter:function(e){return!!e.firstChild}},empty:{events:"childNodesModified",getter:function(e){return!e.firstChild}}},E),T={attach:function(e,t,n){e.addHandler(t,n)},detach:function(e,t,n){e.removeHandler(t,n)}},N=c.extensibleProperty({select:function(e){if(this.isDisabled())return;if(this.selectedRA_)return;this.contextSelection&&this.contextSelection.multiple?this.select(e.ctrlKey||e.metaKey):this.select()}}),C={"*":function(e){var t=this.templateSwitcher_;t&&t.ruleEvents&&t.ruleEvents[e.type]&&this.setTemplate(t.resolve(this))}},k=new p("<div/>"),L=[],M,_=function(e){return{propertyDescriptors:{action:!1,binding:!1,template:"templateChanged",tmpl:"templateChanged",element:!1,childNodesElement:!1},template:k,emit_templateChanged:h("templateChanged"),templateSwitcher_:null,binding:x,action:N,tmpl:null,element:null,childNodesElement:null,init:function(){this.element=this.childNodesElement=A(),e.init.call(this)},postInit:function(){e.postInit.call(this);var t=this.template;if(t){var n=this.childNodesElement;this.template=null,this.setTemplate(t),L.push(n),this.container&&(this.container.appendChild(this.element),this.container=null)}},templateSync:function(){var e=this.element,t=this.template.createInstance(this,this.templateAction,this.templateSync,this.binding,T),n;t.childNodesHere&&(t.childNodesElement=t.childNodesHere.parentNode,t.childNodesElement.insertPoint=t.childNodesHere),this.tmpl=t,this.element=t.element,this.childNodesElement=t.childNodesElement||t.element,n=this.childNodesElement.nodeType!=1,n&&(this.childNodesElement=l.createDocumentFragment());if(this.grouping){this.grouping.syncDomRefs();var r=this;while(r.grouping)r=r.grouping;var i=r;for(var s=i.lastChild;s;s=s.previousSibling)s instanceof P?i.insertBefore(s,s.nextSibling):O(s);O(i.nullGroup)}else for(var o=this.lastChild;o;o=o.previousSibling)this.insertBefore(o,o.nextSibling);this instanceof P&&O(this);if(e&&e!==this.element&&e.nodeType!=11){var u=e&&e.parentNode;u&&(this.owner&&this.owner.tmpl&&this.owner.tmpl.set(e,this.element),this.element.parentNode!==u&&u.replaceChild(this.element,e))}this.emit_templateChanged()},setTemplate:function(e){var t=this.templateSwitcher_,n;e instanceof v&&(n=e,e=n.resolve(this)),e instanceof p==0&&(e=null);if(!e)return;n&&(this.templateSwitcher_=n,t||this.addHandler(C,this)),t&&t.resolve(this)!==e&&(this.templateSwitcher_=null,this.removeHandler(C,this));var r=this.tmpl,i=this.template;i!==e&&(this.template=e,this.templateSync(),i&&i.clearInstance(r))},updateBind:function(e){var t=this.binding[e],n=t&&t.getter;n&&this.tmpl&&this.tmpl.set(e,n(this)),this.roleId==e&&this.updateBind("$roleId")},templateAction:function(e,t){var n=this.action[e];n&&n.call(this,t)},focus:function(e){var t=this.tmpl?this.tmpl.focus||this.element:null;t&&(M&&(M=n.clearImmediate(M)),M=n.setImmediate(function(){try{t.focus(),e&&t.select()}catch(n){}}))},blur:function(){var e=this.tmpl?this.tmpl.focus||this.element:null;if(e)try{e.blur()}catch(t){}},destroy:function(){var t=this.template,n=this.element;this.templateSwitcher_&&(this.templateSwitcher_=null,this.removeHandler(C,this)),t.clearInstance(this.tmpl),e.destroy.call(this),this.tmpl=null,this.element=null,this.childNodesElement=null;var r=n&&n.parentNode;r&&r.nodeType==1&&r.removeChild(n)}}},D=function(e){return{insertBefore:function(t,n){t=e.insertBefore.call(this,t,n);var r=t.groupNode||this,i=r.childNodesElement||this.childNodesElement,s=t.nextSibling,o=s&&s.element.parentNode==i?s.element:null,u=t.element,a=o||i.insertPoint||null;return(u.parentNode!==i||u.nextSibling!==a)&&i.insertBefore(u,a),t},removeChild:function(t){e.removeChild.call(this,t);var n=t.element,r=n.parentNode;return r&&r.removeChild(n),t},clear:function(t){if(t){var n=this.firstChild;while(n){var r=n.element,i=r.parentNode;i&&i.removeChild(r),n=n.nextSibling}}e.clear.call(this,t)},setChildNodes:function(t,n){var r=l.createDocumentFragment(),i=this.grouping||this,s=i.childNodesElement;i.childNodesElement=r,e.setChildNodes.call(this,t,n),s.insertBefore(r,s.insertPoint||null),i.childNodesElement=s}}},P=c(y,_,{className:f+".PartitionNode",binding:{title:"data:"}}),H=c(b,D,{className:f+".GroupingNode",childClass:P,groupingClass:c.SELF,element:null,childNodesElement:null,emit_ownerChanged:function(e){this.syncDomRefs(),b.prototype.emit_ownerChanged.call(this,e)},init:function(){this.element=this.childNodesElement=l.createDocumentFragment(),b.prototype.init.call(this)},syncDomRefs:function(){var e=this,t=this.owner,n=null;t&&(n=t.tmpl&&t.tmpl.groupsElement||t.childNodesElement);do e.element=e.childNodesElement=n;while(e=e.grouping)},destroy:function(){b.prototype.destroy.call(this),this.element=null,this.childNodesElement=null}}),B=c(g,_,D,{className:f+".Node",binding:{selected:{events:"select unselect",getter:function(e){return e.selected}},unselected:{events:"select unselect",getter:function(e){return!e.selected}},disabled:{events:"disable enable",getter:function(e){return e.isDisabled()}},enabled:{events:"disable enable",getter:function(e){return!e.isDisabled()}},tabindex:{events:"enable disable",getter:function(e){return e.isDisabled()?-1:e.tabindex||0}}},childClass:c.SELF,childFactory:function(e){return new this.childClass(e)},groupingClass:H}),j=B.subclass({className:f+".ShadowNodeList",emit_ownerChanged:function(e){B.prototype.emit_ownerChanged.call(this,e),this.setDataSource(this.owner&&this.owner.getChildNodesDataset())},getChildNodesElement:function(e){return e.childNodesElement},listen:{owner:{templateChanged:function(){this.childNodes.forEach(function(e){this.appendChild(e.element)},this.getChildNodesElement(this.owner)||this.owner.element)}}},childClass:{className:f+".ShadowNode",getElement:function(e){return e.element},templateSync:function(){B.prototype.templateSync.call(this);var e=this.getElement(this.delegate);e&&(e[d]=this.delegate.element[d],this.element=e)},listen:{delegate:{templateChanged:function(){var e=this.element,t=e.parentNode,n=this.getElement(this.delegate);n&&(n[d]=this.delegate.element[d]),this.element=n||this.tmpl.element,t&&t.replaceChild(this.element,e)}}}}});t.exports={BINDING_PRESET:S,Node:B,PartitionNode:P,GroupingNode:H,ShadowNodeList:j,ShadowNode:j.prototype.childClass}},"8.js":function(e,t,n,r,i,s,o,u,a){function k(e){var t=e.getDictionary(),n=e.getName(),r=n+"@"+t.id,i=C[r],s;if(!i){var o=t.token(n);i=C[r]=o.as(function(e){return o.getType()=="markup"?(typeof e=="string"&&d(o)&&(e=e.replace(/\{#\}/g,"{__templateContext}")),e!=this.value&&s&&(s.detach(o,o.apply),s=null),e&&String(e).substr(0,5)=="path:"&&(s=E(e.substr(5)),s.attach(o,o.apply)),s?s.bindingBridge.get(s):e):this.value}),i.id="{l10n:"+r+"}",i.url=t.getValueSource(n)+":"+n}return i}function L(e){typeof e=="string"&&(e=v(e));if(!e)return null;var t=k(e),n=t.id,r=N[n];return r||(r=N[n]=new O(t)),r}var f="basis.template.html",l=r.document,c=r.Node,h=n.string.camelize,p=n.require("./9.js").isMarkupToken,d=n.require("./9.js").isTokenHasPlaceholder,v=n.require("./9.js").token,m=n.require("./a.js").getFunctions,g=n.require("./d.js"),y=g.TemplateSwitchConfig,b=g.TemplateSwitcher,w=g.Template,E=g.get,S=n.require("./h.js"),x=n.require("./b.js").CLONE_NORMALIZATION_TEXT_BUG,T=!!function(){try{return l.documentElement.style.color="x"}catch(e){}}(),N={},C={},A=function(){function s(e){var t=e.startMarker,n=e.endMarker,r=t.nextSibling;while(r&&r!==n){var i=r;r=r.nextSibling,e.appendChild(i)}return n.parentNode.removeChild(n),e.startMarker=null,e.endMarker=null,t}function g(e,t,r,i){var s=e.classList;if(!s)return y(e,t,r,i);var o=r||"";return o!=t&&(t&&e.classList.remove(t),o&&(e.classList.add(o),i&&(e.classList.add(o+"-anim"),n.nextTick(function(){e.classList.remove(o+"-anim")})))),o}function y(t,r,i,s){var o=i||"";if(o!=r){var u=t.className,a=typeof u!="string",f;a&&(u=u.baseVal),f=u.split(e),r&&n.array.remove(f,r),o&&(f.push(o),s&&(n.array.add(f,o+"-anim"),n.nextTick(function(){var r=(a?t.className.baseVal:t.className).split(e);n.array.remove(r,o+"-anim"),a?t.className.baseVal=r.join(" "):t.className=r.join(" ")}))),a?t.className.baseVal=f.join(" "):t.className=f.join(" ")}return o}function N(){this.set(this.name,this.value)}function C(e,t,n){var r=t&&t.bindingBridge,i=this.attaches&&this.attaches[e],s=null;if(r||i)if(r){var o=p(t),u;o&&(u=L(t));if(!i||i.value!==t||i.template!==u){i&&(i.tmpl&&i.template.clearInstance(i.tmpl),i.value.bindingBridge.detach(i.value,N,i));if(u){var a=this.context,f=this.bindings,l=this.action,c=this.bindingInterface;s=u.createInstance(a,l,function d(){s=h.tmpl=u.createInstance(a,l,d,f,c),s.parent=s.element.parentNode||s.element,N.call(h)},f,c),s.parent=s.element.parentNode||s.element}this.attaches||(this.attaches=new n);var h=this.attaches[e]={name:e,value:t,template:u,tmpl:s,set:this.tmpl.set};r.attach(t,N,h)}else s=t&&p(t)?i.tmpl:null;if(s)return s.set("__templateContext",t.value),s.parent;t=r.get(t)}else i&&(i.tmpl&&i.template.clearInstance(i.tmpl),i.value.bindingBridge.detach(i.value,N,i),this.attaches[e]=null);return t}function k(e,t){var n=e[0],r=e[1],i=t[n],s=t[r];switch(e.length){case 1:return function(t){this(n,i(t))};case 2:return function(t){this(n,i(t)),this(r,s(t))};default:var o=e.map(function(e){return t[e]});return function(n){for(var r=0;r<e.length;r++)this(e[r],o[r](n))}}}function A(e,t){for(var n in e)e[n]=k(e[n],t);return n?e:null}function O(e){var t={};return function(r,i){var s=r.bindings;if(!s)return{};var o="bindingId"in s?s.bindingId:null,u=t[o];if(!u){var a=[],f={},l={};for(var c=0,h;h=e[c];c++){var p=s[h],d=p&&p.getter;if(d){f[h]=d,a.push(h);if(p.events){var v=String(p.events).trim().split(/\s+|\s*,\s*/);for(var m=0,g;g=v[m];m++)l[g]?l[g].push(h):l[g]=[h]}}}u={names:a,sync:k(a,f),handler:A(l,f)},o&&(t[o]=u)}i&&u.sync.call(i,r.context);if(!r.bindingInterface)return;return u.handler&&r.bindingInterface.attach(r.context,u.handler,i),u.handler}}var e=/\s+/,t=r.DOMTokenList&&l&&l.documentElement.classList instanceof r.DOMTokenList,i=function(){try{return l instanceof c}catch(e){}}()||!1,o=i?function(e,t,n,r){var i=!r&&n&&n instanceof c?n:e;return i!==t&&(i.nodeType===11&&!i.startMarker&&(i.startMarker=l.createTextNode(""),i.endMarker=l.createTextNode(""),i.insertBefore(i.startMarker,i.firstChild),i.appendChild(i.endMarker)),t.nodeType===11&&t.startMarker&&(t=s(t)),t.parentNode.replaceChild(i,t)),i}:function(e,t,n,r){var i=!r&&n&&typeof n=="object"?n:e;if(i!==t)try{t.parentNode.replaceChild(i,t)}catch(s){i=e,t!==i&&t.parentNode.replaceChild(i,t)}return i},u=function(e,t,n,r){var i=o(e,t,n,r);return i===e&&typeof n=="string"&&(e.innerHTML=n),i},a=o,f=function(e,t,n,r){var i=o(e,t,n,r);return i===e&&(e.nodeValue=String(n)),i},d=t?g:y,b=T?function(e,t,n,r){return n!==r&&(e.style[h(t)]=r),r}:function(e,t,n,r){if(n!==r)try{e.style[h(t)]=r}catch(i){}return r},w=function(e,t,n,r){return n!==r&&(r?e.setAttribute(t,r):e.removeAttribute(t)),r},E=function(e,t,n,r,i){return r!==i&&(i?e.setAttributeNS(t,n,i):e.removeAttributeNS(t,n)),i},M={bind_textNode:f,bind_node:o,bind_element:u,bind_comment:a,bind_attr:w,bind_attrNS:E,bind_attrClass:d,bind_attrStyle:b,resolve:C,l10nToken:v};return function(e,t){var r=m(e,!0,this.source.url,e.source_,!x),i=r.createL10nSync,s,o,u={},a=[],f=[],l=0,c={cloneNode:function(){if(l==1)return S(e);c=S(e);if(i){o=r.createL10nSync(c,u,w,x);for(var t=0,n;n=a[t];t++)o(n.path,u[n.path])}return c.cloneNode(!0)}},h=function(){return c.cloneNode(!0)};if(i){var d=function(e){for(var t=0,n;n=a[t];t++)e(n.path,u[n.path])},g=function(e){var r=p(this.token);r?n.array.add(f,this):n.array.remove(f,this),u[this.path]=r?undefined:e==null?"{"+this.path+"}":e,o&&o(this.path,u[this.path]);for(var i in t)t[i].tmpl.set(this.path,r?this.token:e)};a=r.l10nKeys.map(function(e){var t=v(e),n={path:e,token:t,handler:g};return t.attach(g,n),p(t)?f.push(n):u[e]=t.value==null?"{"+e+"}":t.value,n})}return s=r.createInstanceFactory(this.templateId,h,M,u,f,O(r.keys),x),{createInstance:function(e,n,r,i,o){var u=l++,a={context:e,action:n,rebuild:r,handler:null,bindings:i,bindingInterface:o,attaches:null,compute:null,tmpl:null};return s(u,a,u?null:d),t[u]=a,a.tmpl},destroyInstance:function(e){var n=e.templateId_,r=t[n];if(r){r.handler&&r.bindingInterface.detach(r.context,r.handler,r.tmpl.set);if(r.compute){for(var i=0;i<r.compute.length;i++)r.compute[i].destroy();r.compute=null}for(var s in r.attaches)C.call(r,s,null);delete t[n]}},destroy:function(e){for(var n=0,i;i=a[n];n++)i.token.detach(i.handler,i);for(var s in t){var f=t[s];e&&f.rebuild&&f.rebuild.call(f.context);if(!e||s in t){f.handler&&f.bindingInterface.detach(f.context,f.handler,f.tmpl.set);for(var s in f.attaches)C.call(s,null)}}r=null,c=null,u=null,a=null,o=null,t=null}}}}(),O=w.subclass({className:f+".Template",__extend__:function(e){return e instanceof O?e:e instanceof y?new M(e):new O(e)},builder:A}),M=b.subclass({className:f+".TemplateSwitcher",templateClass:O});t.exports={Template:O,TemplateSwitcher:M}},"9.js":function(e,t,n,r,i,s,o,u,a){function y(e,t){return e=d(e,t),e}function b(e){return y(u(e).get(!0),e)||{}}function w(e,t){function n(){F[e].update(E(b(e),t))}return{url:t,activate:function(){u(t).attach(n)},deactivate:function(){u(t).detach(n)}}}function E(e,t){function n(e){return e&&Object.prototype.toString.call(e)=="[object Object]"}function r(e,i,s,o){s&&(s+=".");for(var u in i)n(i[u])?e[u]=r(n(e[u])?e[u]:{},i[u],s+u,o):(o[s+u]=t,e[u]=i[u]);return e}var i=b(t),s;for(var o in i){if(o=="_meta"||o=="_locationMap"){n(e[o])||(e[o]={}),r(e[o],i[o],"",{});continue}v.call(e,o)?e[o]._meta||(e[o]._meta={}):e[o]={_meta:{source:{}}},s={},e[o]._meta.source={},r(e[o],i[o],"",s),e[o]._meta.source=s}return e}function S(e,t){return e=y(e,t),g[t]&&E(e,g[t].url),W(t,!0).update(e)}function _(e){if(e.charAt(0)=="#")return x[parseInt(e.substr(1),36)];var t=e.match(/^(.+?)@(.+)$/);if(t)return X(n.path.resolve(t[2])).token(t[1])}function D(e){return e?e instanceof M||e instanceof O:!1}function P(e){return D(e)&&e.getType()in k}function H(e){return D(e)&&e.descriptor.placeholder}function B(e){return D(e)&&e.getType()=="markup"}function q(e,t,r){var i=t?t+".":"",s=r.types[t]||"default";for(var o in e){if(t==""&&o=="_meta")continue;if(o.indexOf(".")!=-1)continue;if(v.call(e,o)){var u=i+o,a=r.types[u]||L[s]||"default",f=e[o],l=a in k||s in k;r.values[u]={placeholder:l,processName:l?A:n.fn.$self,source:r.source[u]||r.dictionary.id,culture:r.culture,name:u,types:r.types,value:f},u in r.types==0&&(r.types[u]=a),f&&(typeof f=="object"||Array.isArray(f))&&q(f,u,r)}}return r.values}function R(e){var t=e._meta&&e._meta.type||{},n={};for(var r in t)t[r]in C&&(n[r]=t[r]);return n}function U(e){return e._meta&&e._meta.source||{}}function W(e,t){var r;if(typeof e=="string"){var i=e,s=n.path.extname(i);s!=".l10n"&&(i=i.replace(new RegExp(s+"([#?]|$)"),".l10n$1")),e=n.resource(i)}return n.resource.isResource(e)&&(r=F[e.url]),r||new z(e,t)}function X(e){return W(e)}function V(){return j.slice(0)}function et(e,t){return e&&!K[e]&&(K[e]=new Z(e,t)),K[e||J]}function tt(){return J}function nt(e){if(!e)return;if(J!=e){if($.indexOf(e)==-1)return;J=e;for(var t=0,n;n=j[t];t++)n.syncValues();m.call(et,e)}}function rt(){return $.slice(0)}function it(e){typeof e=="string"&&(e=e.trim().split(" "));if(!e.length)return;var t={},r,i;Q={};for(var s=0,o,u;o=e[s];s++)r=o.split("/"),r.length>2&&(r=[r[0],r[1]]),u=r[0],i||(i=u),t[u]=et(u),Q[u]=r;for(var u in Q)Q[u]=n.array.flatten(Q[u].map(function(e){return Q[e]})).concat(i).filter(function(e,t,n){return!t||n.lastIndexOf(e,t-1)==-1});$=n.object.keys(t),J in t==0&&nt(i)}function st(e,t,n){et.attach(e,t),n&&e.call(t,J)}var f="basis.l10n",l=n.object.extend,c=n.object.complete,h=n.Class,p=n.require("./6.js").Emitter,d=n.resource.extensions[".json"],v=Object.prototype.hasOwnProperty,m=n.Token.prototype.set;n.resource.extensions[".l10n"]=S;var g=function(){var e=n.config.l10n||{},t=e&&e.patch,r={},i;e.patch={};if(t){if(typeof t=="string")try{i=n.path.dirname(n.resource.resolveURI(t)),t=n.resource(t).fetch()}catch(s){}for(var o in t){var u=n.resource.resolveURI(o,i),a=n.resource.resolveURI(t[o],i);r[u]=w(u,a)}}return r}(),x=[],T={},N={placeholder:!1,processName:n.fn.$self,value:undefined,types:{}},C={"default":!0,plural:!0,markup:!0,"plural-markup":!0,"enum-markup":!0},k={plural:!0,"plural-markup":!0},L={"default":"default",plural:"default",markup:"default","plural-markup":"markup","enum-markup":"markup"},A=function(e){return this.culture.plural(e)},O=h(n.Token,{className:f+".ComputeToken",token:null,init:function(e){this.token.computeTokens[this.basisObjectId]=this,n.Token.prototype.init.call(this,e)},toString:function(){return this.get()},get:function(){var e=this.token.dictionary.getValue(this.getName());return this.token.descriptor.placeholder&&(e=String(e).replace(/\{#\}/g,this.value)),e},getName:function(){return this.token.name+"."+this.token.descriptor.processName(this.value)},getType:function(){return this.token.descriptor.types[this.getName()]||"default"},getDictionary:function(){return this.token.getDictionary()},destroy:function(){delete this.token.computeTokens[this.basisObjectId],n.Token.prototype.destroy.call(this)}}),M=h(n.Token,{className:f+".Token",index:NaN,dictionary:null,name:"",type:"default",computeTokens:null,computeTokenClass:null,init:function(e,t,r){n.Token.prototype.init.call(this,r.value),this.index=x.push(this)-1,this.name=t,this.dictionary=e,this.descriptor=r,this.computeTokens={}},toString:function(){return this.get()},apply:function(){for(var e in this.computeTokens)this.computeTokens[e].apply();n.Token.prototype.apply.call(this)},set:function(){},getName:function(){return this.name},getType:function(){return this.descriptor.types[this.name]||"default"},setType:function(){},compute:function(e,t){arguments.length==1&&(t=e,e=""),t=n.getter(t),e=String(e).trim().split(/\s+|\s*,\s*/).sort();var r=this.basisObjectId,i=e.concat(r,t[n.getter.ID]).join("_");if(T[i])return T[i];var s=this,o={},u=function(e){m.call(this,t(e))},a={destroy:function(e){delete o[e.basisObjectId],this.destroy()}};for(var f=0,l;l=e[f];f++)l!="destroy"&&(a[l]=u);return T[i]=function(e){if(e instanceof p==0)throw"basis.l10n.Token#compute: object must be an instanceof Emitter";var n=e.basisObjectId,r=o[n];return r||(r=o[n]=s.computeToken(t(e)),e.addHandler(a,r)),r}},computeToken:function(e){var t=this.computeTokenClass;return t||(t=this.computeTokenClass=O.subclass({token:this})),new t(e)},token:function(e){if(this.getType()in k)return this.computeToken(e);if(this.dictionary)return this.dictionary.token(this.name+"."+e)},getDictionary:function(){return this.dictionary},destroy:function(){for(var e in this.computeTokens)this.computeTokens[e].destroy();this.descriptor=null,this.computeTokenClass=null,this.computeTokens=null,this.value=null,this.dictionary=null,x[this.index]=null,n.Token.prototype.destroy.call(this)}}),j=[],F={},I=new n.Token,z=h(null,{className:f+".Dictionary",cultureValues:null,tokens:null,index:NaN,resource:null,id:null,init:function(e,t){this.tokens={},this.cultureValues={},this.index=j.push(this)-1;if(n.resource.isResource(e)){var r=e,i=r.url;this.id=i,this.resource=r,F[i]||(F[i]=this,I.set(i),g[i]&&g[i].activate()),t||r.fetch()}else this.id="dictionary"+this.index,this.update(e||{})},update:function(e){e||(e={}),this.cultureValues={};var t=R(e);for(var n in e)/^_|_$/.test(n)||(this.cultureValues[n]=q(e[n],"",{dictionary:this,culture:et(n),source:U(e[n]),types:c(R(e[n]),t),values:{}}));return this.syncValues(),this},syncValues:function(){for(var e in this.tokens){var t=this.tokens[e],n=this.getDescriptor(e)||N,r=t.getType();t.descriptor=n,t.value!==n.value?m.call(t,n.value):t.getType()!=r&&t.apply()}},getCultureDescriptor:function(e,t){return this.cultureValues[e]&&this.cultureValues[e][t]},getDescriptor:function(e){var t=Q[J]||[];for(var n=0,r;r=t[n];n++){var i=this.getCultureDescriptor(r,e);if(i)return i}},getCultureValue:function(e,t){var n=this.getCultureDescriptor(e,t);if(n)return n.value},getValue:function(e){var t=this.getDescriptor(e);if(t)return t.value},getValueSource:function(e){var t=this.getDescriptor(e);return t?t.source:this.id},token:function(e){var t=this.tokens[e];if(!t){var n=this.getDescriptor(e)||N;t=this.tokens[e]=new M(this,e,n)}return t},destroy:function(){this.tokens=null,this.cultureValues=null,n.array.remove(j,this);if(this.resource){var e=this.resource.url;g[e]&&g[e].deactivate(),delete F[e],this.resource=null}}}),$=[],J=null,K={},Q={},G={},Y=[[1,function(){return 0}],[2,function(e){return e==1||e%10==1?0:1}],[2,function(e){return e==0?0:1}],[2,function(e){return e==1?0:1}],[2,function(e){return e==0||e==1?0:1}],[2,function(e){return e%10!=1||e%100==11?1:0}],[3,function(e){return e==1?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2}],[3,function(e){return e%10==1&&e%100!=11?0:e!=0?1:2}],[3,function(e){return e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2}],[3,function(e){return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2}],[3,function(e){return e==0?0:e==1?1:2}],[3,function(e){return e==1?0:e==0||e%100>0&&e%100<20?1:2}],[3,function(e){return e==1?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2}],[3,function(e){return e==1?0:e>=2&&e<=4?1:2}],[4,function(e){return e==1?0:e==2?1:e!=8&&e!=11?2:3}],[4,function(e){return e==1?0:e==2?1:e==3?2:3}],[4,function(e){return e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0}],[4,function(e){return e==1?0:e==0||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3}],[4,function(e){return e==1||e==11?0:e==2||e==12?1:e>2&&e<20?2:3}],[5,function(e){return e==1?0:e==2?1:e<7?2:e<11?3:4}],[6,function(e){return e==0?0:e==1?1:e==2?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5}]];["ay bo cgg dz fa id ja jbo ka kk km ko ky lo ms my sah su th tt ug vi wo zh","mk","jv","af an ast az bg bn brx ca da de doi el en eo es es-AR et eu ff fi fo fur fy gl gu ha he hi hne hu hy ia it kn ku lb mai ml mn mni mr nah nap nb ne nl nn no nso or pa pap pms ps pt rm rw sat sco sd se si so son sq sv sw ta te tk ur yo","ach ak am arn br fil fr gun ln mfe mg mi oc pt-BR tg ti tr uz wa zh","is","csb","lv","lt","be bs hr ru sr uk","mnk","ro","pl","cs sk","cy","kw","sl","mt","gd","ga","ar"].forEach(function(e,t){e.split(" ").forEach(function(e){G[e]=this},Y[t])});var Z=n.Class(null,{className:f+".Culture",name:"",pluralForm:null,init:function(e,t){this.name=e,K[e]||(K[e]=this),this.pluralForm=t||G[e]||G[e.split("-")[0]]||Y[0]},plural:function(e){return Number(this.pluralForm[1](Math.abs(parseInt(e,10))))}});l(et,new n.Token),et.set=nt,it("en-US"),nt("en-US"),t.exports={ComputeToken:O,Token:M,token:_,isToken:D,isPluralToken:P,isMarkupToken:B,isTokenHasPlaceholder:H,Dictionary:z,dictionary:X,getDictionaries:V,addCreateDictionaryHandler:I.attach.bind(I),removeCreateDictionaryHandler:I.detach.bind(I),Culture:Z,culture:et,getCulture:tt,setCulture:nt,getCultureList:rt,setCultureList:it,pluralForms:Y,onCultureChange:st}},"a.js":function(e,t,n,r,i,s,o,u,a){function P(e,t){var n=[];for(var r=0;r<e.length;r++){if(r<t){n.push(e[r]);continue}var i=e[r];switch(i[E]){case p:n.push(P(i,k));break;case w:n.push.apply(n,P(i,L).slice(L));break;default:n.push(i)}}return n}function j(e,t){return new Function(e,t)}var f=Object.prototype.hasOwnProperty,l=n.require("./b.js"),c=n.require("./c.js"),h=l.MARKER,p=l.TYPE_ELEMENT,d=l.TYPE_ATTRIBUTE,v=l.TYPE_ATTRIBUTE_CLASS,m=l.TYPE_ATTRIBUTE_STYLE,g=l.TYPE_ATTRIBUTE_EVENT,y=l.TYPE_TEXT,b=l.TYPE_COMMENT,w=l.TYPE_CONTENT,E=l.TOKEN_TYPE,S=l.TOKEN_BINDINGS,x=l.TOKEN_REFS,T=l.ATTR_NAME,N=l.ATTR_NAME_BY_TYPE,C=l.ELEMENT_NAME,k=l.ELEMENT_ATTRIBUTES_AND_CHILDREN,L=l.CONTENT_CHILDREN,A=l.CLASS_BINDING_ENUM,O=l.CLASS_BINDING_BOOL,M=l.CLASS_BINDING_INVERT,_={},D=function(){try{return r.document.createTextNode("").x=1,!0}catch(e){return!1}}(),H=function(){function u(e,t){for(var r=0,i;i=e[r];r++)i.indexOf(":")==-1&&n.push(i+":"+t)}function a(n){var r=t.length,i=e[r]||"r"+r;return t.push(i+"="+n),i}function f(e){r.push(e)}function l(e,n,r){var c,d,w,L,A;for(var O=0,M=0,_=0,P;P=e[O];O++,M++,L=!1){O?e[O+1]?(P[E]==e[O-1][E]&&P[E]==y&&_++,c=n+".childNodes["+(r?M:M+(_?" + "+_+" * TEXT_BUG":""))+"]"):c=n+".lastChild":c=n+".firstChild";if(d=P[x])L=!0,c=a(c),u(d,c);P[S]&&(P[S]&&typeof P[S]=="number"&&(P[S]=P[x][P[S]-1]),L||(L=!0,c=a(c)),f([P[E],c,P[S],d?d.indexOf("element")!=-1:!1])),n==s&&(D||P[E]==p)&&i.push(c+"."+h);if(P[E]==p){w=-1,L||(c=a(c),w=t.length);var H=[],B=[];for(var j=k,F;F=P[j];j++)F[E]==p||F[E]==y||F[E]==b?B.push(F):H.push(F);for(var j=0,I;I=H[j];j++){var q=I[E];if(q==g)continue;var R=N[q]||I[T];if(d=I[x])L=!0,u(d,a(c+'.getAttributeNode("'+R+'")'));if(A=I[S]){L=!0;switch(q){case v:for(var U=0,z;z=A[U];U++)f([2,c,z[1],R,z[0]].concat(z[2]==-1?[]:z.slice(2)));break;case m:for(var U=0,W;W=A[U];U++){o++;for(var X=0,V;V=W[0][X];X++)f([2,c,V,R,W[0],W[1],W[2],W[3],o])}break;default:o++;for(var U=0,V;V=A[0][U];U++)f([2,c,V,R,A[0],A[1],P[C],o])}}}B.length&&l(B,c,r),!L&&w==t.length&&t.pop()}}}var e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),t,n,r,i,s,o;return function(e,u,a){return t=[],n=[],r=[],i=[],s=u||"_",o=0,l(e,s,a),{path:t,ref:n,binding:r,markedElementList:i}}}(),B=function(){function u(e){return'"'+e.replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r")+'"'}function a(t,n,r){var i=[],s=[],o=t[5],a=t[4],f,l;for(var c=0;c<o.length;c++)if(typeof o[c]=="string")i.push(u(o[c]));else{f=a[o[c]],l=f.indexOf(":");if(l==-1)i.push(n=="l10n"?'"{'+f+'}"':n=="bool"?"(__"+f+'||"")':"__"+f),n||s.push("__"+f+"!==UNSET&&__"+f+"!==undefined");else{var h=null,p=f.substr(l+1).replace(e,function(e,t){return h=t,""});if(h){if(r===!1)return!1;i.push(r[f.substr(l+1)]),n||s.push(r[f.substr(l+1)]+"!==undefined")}else i.push('l10n["'+p+'"]')}}return i.length==1&&i.push('""'),i=i.join("+"),!n&&s.length&&(i=s.join("&&")+"?("+i+'):""'),i}var e=/\.\{([a-zA-Z_][a-zA-Z0-9_\-]*)\}/,t={disabled:"*",checked:["input"],indeterminate:["input"],value:["input","textarea","select"],minlength:["input"],maxlength:["input"],readonly:["input"],selected:["option"],multiple:["select"]},r={disabled:!0,checked:!0,selected:!0,readonly:!0,multiple:!0,indeterminate:!0},i={show:'"none"',visible:'"hidden"'},s={hide:'?"none":""',show:'?"":"none"',hidden:'?"hidden":""',visible:'?"":"hidden"'},o={1:"bind_element",3:"bind_textNode",8:"bind_comment"};return function(l){function h(e){P[e]=!0,m.push(g+"="+e+"("+n.array(arguments,1)+");")}var v={},m,g,b=0,w=[],E=[],S=[],x,N,C=[],k={},L=0,_,D={},P={};for(var H=0,B;B=l[H];H++){var j=B[2],F=j.split(":");if(F[0]=="l10n"&&F[1]){var I=F[1],q=null,R=I.replace(e,function(e,t){return q=t,""});if(q){S.push(B),I in k==0&&(x="$l10n_"+L++,k[I]=x,C.push(x),w.push(x+'=tools.l10nToken("'+R+'").computeToken()'),m=v[q],m||(m=v[q]=[],w.push("__"+q+"=UNSET")),m.push(x+".set(__"+q+");"));continue}}E.push(B)}for(var H=0,B;B=S[H];H++){var U=B[0],z=B[1],j=B[2],W=B[3],I=j.split(":")[1];j=k[I],g="_"+b++,x="__"+j,m=v[j],m||(m=v[j]=[],w.push(x));if(U==y)w.push(g+"="+z),h(o[U],z,g,"value",W);else{var X=a(B,!1,k);_=B[7],D[_]||(w.push(g),D[_]=g),g=D[_],J='"'+B[T]+'"',h("bind_attr",z,J,g,X)}}for(var H=0,B;B=E[H];H++){var U=B[0],z=B[1],j=B[2],W=B[3];if(["get","set","templateId_"].indexOf(j)!=-1)continue;var F=j.split(":"),V=F[0]=="anim",$=F[0]=="l10n";V&&(j=F[1]),m=f.call(v,j)?v[j]:null,g="_"+b++,x="__"+j;if($&&F[1]){var I=F[1],q=null,R=I;N||(N={}),v[R]||(v[R]=[],v[R].l10n="$l10n_"+L++,w.push("__"+v[R].l10n+'=l10n["'+R+'"]'),N[R]=[]),m=v[R];if(U==y){N[R].push(z+".nodeValue=value;"),m.nodeBind?m.push(z+".nodeValue=value;"):(w.push(g+"="+z),h(o[U],z,g,"value",W),m.nodeBind=g);continue}var X=a(B,"l10n",!1);X!==!1&&N[R].push("bind_attr("+[z,'"'+B[T]+'"',"NaN",X]+");")}m||(m=v[j]=[],w.push(x+"=UNSET"));if(U!=d)if(!m.nodeBind)w.push(g+"="+z),h(o[U],z,g,"value",W),m.nodeBind=g;else switch(U){case p:h(o[U],z,z,"value!==null?String(value):null");break;case y:m.push(z+".nodeValue=value;")}else{var J=B[T];switch(J){case"role-marker":w.push(g+'=""'),h("bind_attr",z,'"'+J+'"',g,"value?value"+(B[5][1]?"+"+u(B[5][1]):"")+':""');break;case"class":var K="",Q="value",G=B[5],Y=B[7];switch(G){case O:case M:var Z=[B[6]],et=B[4],tt=Array.isArray(et)?et:Z.map(function(e){return et+e});Q=(G==M?"!":"")+'value?"'+tt[0]+'":""',Y&&(K=tt[Y-1]);break;case A:var Z=B[8],et=B[4],tt=Array.isArray(et)?et:Z.map(function(e){return et+e});Q=Z.map(function(e,t){return'value=="'+e+'"?"'+tt[t]+'"'}).join(":")+':""',Y&&(K=tt[Y-1]);break;default:var et=B[4];Q='typeof value=="string"||typeof value=="number"?"'+et+'"+value:(value?"'+et+j+'":"")'}w.push(g+'="'+K+'"'),h("bind_attrClass",z,g,Q,V);break;case"style":var X=a(B,"style",k);_=B[8],D[_]||(D[_]=g,w.push(g+"="+(i[B[7]]||'""'))),B[7]&&(X=X.replace(/\+""$/,"")+(s[B[7]]||"")),g=D[_],h("bind_attrStyle",z,'"'+B[6]+'"',g,X);break;default:var nt=t[J],rt=B[6].toLowerCase(),X=nt&&r[J]?a(B,"bool",k)+'?"'+J+'":""':a(B,!1,k);_=B[7],D[_]||(w.push(g+"=UNSET"),D[_]=g),g=D[_];if(J=="tabindex")h("bind_attr",z,'"'+J+'"',g,X+"==-1?"+(["input","button","textarea"].indexOf(rt)==-1?'""':"-1")+":"+X);else{var it=c.getNamespace(J);it?h("bind_attrNS",z,'"'+it+'"','"'+J+'"',g,X):h("bind_attr",z,'"'+J+'"',g,X)}nt&&(nt=="*"||nt.indexOf(rt)!=-1)&&m.push("if("+z+"."+J+"!="+g+")"+z+"."+J+"="+(r[J]?"!!"+g:g)+";")}}}var st=n.object.keys(v),ot="";if(st.length){P.resolve=!0,ot=[";function set(bindName,value){",'if(typeof bindName!="string")'];for(var j in v)v[j].nodeBind&&ot.push("if(bindName==="+v[j].nodeBind+")"+'bindName="'+j+'";'+"else ");ot.push("return;","value=resolve.call(instance,bindName,value,Attaches);","switch(bindName){");for(var j in v){var ut=v[j].l10n||j;ot.push('case"'+j+'":',"if(__"+ut+"!==value)","{","__"+ut+"=value;",v[j].join(""),"}","break;")}ot=ot.join("")+"}}"}var at=[];for(var ft in P)at.push(ft+"=tools."+ft);return{allKeys:st,keys:st.filter(function(e){return e.indexOf("@")==-1}),tools:at,vars:w,set:ot,l10n:N,l10nCompute:C}}}(),F=function(e,t,r,i,s){var o=_[r&&n.path.relative(r)];if(o)return o;e=P(e,0);var u=H(e,"_",s),a=B(u.binding),f=u.markedElementList.join("="),l={keys:a.keys,l10nKeys:n.object.keys(a.l10n)};e.length==1&&(u.path[0]="a=_");if(a.l10n){var c=[];for(var h in a.l10n)c.push('case"'+h+'":'+a.l10n[h].join("")+"break;");l.createL10nSync=j(["_","l10n","bind_attr","TEXT_BUG"],"var "+u.path+";"+"return function(path, value){"+"switch(path){"+c.join("")+"}"+"}")}return l.createInstanceFactory=j(["tid","createDOM","tools","l10nMap","l10nMarkup","getBindings","TEXT_BUG"],"var UNSET={valueOf:function(){}},"+(a.tools.length?a.tools+",":"")+(a.set?"Attaches=function(){};Attaches.prototype={"+a.keys.map(function(e){return e+":null"})+"};":"set=function(){};")+"return function createTmpl_(id,instance,initL10n){"+"var _=createDOM(),"+(a.l10n?"l10n=initL10n?{}:l10nMap,":"")+u.path.concat(a.vars)+(a.l10nCompute.length?";instance.compute=["+a.l10nCompute+"]":"")+";instance.tmpl={"+[u.ref,"templateId_:id","set:set"]+"}"+(f?";if(instance.context||instance.onAction)"+f+"=(id<<12)|tid":"")+a.set+(a.l10n?";if(initL10n){l10n=l10nMap;initL10n(set)};if(l10nMarkup.length)for(var idx=0,token;token=l10nMarkup[idx];idx++)set(token.path,token.token);":"")+(a.set?";if(instance.bindings)instance.handler=getBindings(instance,set)":"")+";"+a.l10nCompute.map(function(e){return'set("'+e+'",'+e+")"})+"}"),l};t.exports={getFunctions:F}},"b.js":function(e,t,n,r,i,s,o,u,a){var f="basisTemplateId_"+n.genUID(),l=1,c=2,h=4,p=5,d=6,v=3,m=8,g=9,y=0,b=1,w=2,E=3,S=4,x={4:"class",5:"style"},T={"class":h,style:p},N={2:S,4:S-1,5:S-1,6:2},C=1,k=2,L=3,A=4,O=5,M=3,_=4,D=3,P=3,H=2,B=1,j=r.document,F=j?function(){var e=j.createElement("div");return e.appendChild(j.createTextNode("a")),e.appendChild(j.createTextNode("a")),e.cloneNode(true).childNodes.length==1}():!0;t.exports={MARKER:f,TYPE_ELEMENT:l,TYPE_ATTRIBUTE:c,TYPE_ATTRIBUTE_CLASS:h,TYPE_ATTRIBUTE_STYLE:p,TYPE_ATTRIBUTE_EVENT:d,TYPE_TEXT:v,TYPE_COMMENT:m,TYPE_CONTENT:g,TOKEN_TYPE:y,TOKEN_BINDINGS:b,TOKEN_REFS:w,ATTR_NAME:E,ATTR_VALUE:S,ATTR_NAME_BY_TYPE:x,ATTR_TYPE_BY_NAME:T,ATTR_VALUE_INDEX:N,ELEMENT_NAME:M,ELEMENT_ATTRIBUTES_AND_CHILDREN:_,TEXT_VALUE:D,COMMENT_VALUE:P,CONTENT_CHILDREN:H,CONTENT_PRIORITY:B,CLASS_BINDING_ENUM:C,CLASS_BINDING_BOOL:k,CLASS_BINDING_INVERT:L,CLASS_BINDING_EQUAL:A,CLASS_BINDING_NOTEQUAL:O,CLONE_NORMALIZATION_TEXT_BUG:F}},"c.js":function(e,t,n,r,i,s,o,u,a){function l(e,t){if(!e)return;var n=e.indexOf(":");if(n!=-1){var r=e.substr(0,n);return f[r]||t&&t.lookupNamespaceURI(r)}}var f={xlink:"http://www.w3.org/1999/xlink",svg:"http://www.w3.org/2000/svg"};t.exports={namespaceURI:f,getNamespace:l}},"d.js":function(e,t,n,r,i,s,o,u,a){function T(e){var t=x[e];if(!t){var r=l.getElementById(e),i="";r&&r.tagName=="SCRIPT"&&r.type=="text/basis-template"&&(i=r.textContent||r.text),t=x[e]=n.resource.virtual("tmpl",i||"")}return t}function N(e,t){return/^#\d+$/.test(e)?S[e.substr(1)]:/^id:/.test(e)?T(e.substr(3)):/^[a-z0-9\.]+$/i.test(e)&&!/\.tmpl$/.test(e)?E(e):n.resource(n.resource.resolveURI(e,t,'<b:include src="{url}"/>'))}function C(){this.destroyBuilder&&k.call(this);var e=this;while(e=e.attaches_)e.handler.call(e.context)}function k(){var e=m(this.source,this.baseURI,!1,{isolate:this.getIsolatePrefix()}),t=this.destroyBuilder,r={},i=this.builder(e.tokens,r);this.createInstance=i.createInstance,this.clearInstance=i.destroyInstance,this.destroyBuilder=i.destroy,b.add(this.templateId,this,r);var s=e.deps,o=this.deps_;this.deps_=s;if(o)for(var u=0,a;a=o[u];u++)a.bindingBridge.detach(a,C,this);if(s)for(var u=0,a;a=s[u];u++)a.bindingBridge.attach(a,C,this);var f=e.resources,l=this.resources;this.resources=f;if(f)for(var u=0,c;c=f[u];u++){var h=n.resource(c.url).fetch();typeof h.startUse=="function"&&h.startUse()}if(l)for(var u=0,c;c=l[u];u++){var h=n.resource(c.url).fetch();typeof h.stopUse=="function"&&h.stopUse()}t&&t(!0)}function M(e,t){return t||(t=e,e=null),typeof e=="string"&&(e=e.split(/\s+/)),new A({rule:t,events:e})}var f="basis.template",l=r.document,c=n.Class,h=n.cleaner,p=n.path,d=n.require("./b.js"),v=n.require("./e.js").VERSION,m=n.require("./e.js").getDeclFromSource,g=n.require("./e.js").makeDeclaration,y=n.require("./e.js").setIsolatePrefixGenerator,b=n.require("./f.js"),w=n.require("./g.js"),E=w.get,S=[],x={},L=c(null,{className:f+".Template",__extend__:function(e){return e instanceof L?e:e instanceof A?new O(e):new L(e)},source:"",baseURI:"",url:"",attaches_:null,init:function(e){if(S.length==4096)throw"Too many templates (maximum 4096)";this.setSource(e||""),this.templateId=S.push(this)-1},bindingBridge:{attach:function(e,t,n){e.attaches_={handler:t,context:n,attaches_:e.attaches_}},detach:function(e,t,n){var r=e,i;while(i=r,r=r.attaches_)if(r.handler===t&&r.context===n){i.attaches_=r.attaches_;return}},get:function(e){var t=e.source;return t&&t.bindingBridge?t.bindingBridge.get(t):t}},createInstance:function(e,t,n,r,i){return k.call(this),this.createInstance(e,t,n,r,i)},clearInstance:function(){},getIsolatePrefix:function(){return"i"+this.templateId+"__"},setSource:function(e){var t=this.source;if(t!=e){if(typeof e=="string"){var n=e.match(/^([a-z]+):/);if(n){e=e.substr(n[0].length);switch(n[1]){case"id":e=T(e);break;case"path":e=E(e);break;default:}}}t&&t.bindingBridge&&(this.url="",this.baseURI="",t.bindingBridge.detach(t,C,this)),e&&e.bindingBridge&&(e.url&&(this.url=e.url,this.baseURI=p.dirname(e.url)+"/"),e.bindingBridge.attach(e,C,this)),this.source=e,C.call(this)}},destroy:function(){this.destroyBuilder&&(b.remove(this.templateId),this.destroyBuilder()),this.attaches_=null,this.createInstance=null,this.resources=null,this.source=null}}),A=function(e){n.object.extend(this,e)},O=n.Class(null,{className:f+".TemplateSwitcher",ruleRet_:null,templates_:null,templateClass:L,ruleEvents:null,rule:String,init:function(e){this.ruleRet_=[],this.templates_=[],this.rule=e.rule;var t=e.events;if(t&&t.length){this.ruleEvents={};for(var n=0,r;r=t[n];n++)this.ruleEvents[r]=!0}h.add(this)},resolve:function(e){var t=this.rule(e),n=this.ruleRet_.indexOf(t);return n==-1&&(this.ruleRet_.push(t),n=this.templates_.push(new this.templateClass(t))-1),this.templates_[n]},destroy:function(){this.rule=null,this.templates_=null,this.ruleRet_=null}});h.add({destroy:function(){for(var e=0,t;t=S[e];e++)t.destroy();S=null}}),t.exports={DECLARATION_VERSION:v,TYPE_ELEMENT:d.TYPE_ELEMENT,TYPE_ATTRIBUTE:d.TYPE_ATTRIBUTE,TYPE_ATTRIBUTE_CLASS:d.TYPE_ATTRIBUTE_CLASS,TYPE_ATTRIBUTE_STYLE:d.TYPE_ATTRIBUTE_STYLE,TYPE_ATTRIBUTE_EVENT:d.TYPE_ATTRIBUTE_EVENT,TYPE_TEXT:d.TYPE_TEXT,TYPE_COMMENT:d.TYPE_COMMENT,TYPE_CONTENT:d.TYPE_CONTENT,TOKEN_TYPE:d.TOKEN_TYPE,TOKEN_BINDINGS:d.TOKEN_BINDINGS,TOKEN_REFS:d.TOKEN_REFS,ATTR_NAME:d.ATTR_NAME,ATTR_VALUE:d.ATTR_VALUE,ATTR_NAME_BY_TYPE:d.ATTR_NAME_BY_TYPE,CLASS_BINDING_ENUM:d.CLASS_BINDING_ENUM,CLASS_BINDING_BOOL:d.CLASS_BINDING_BOOL,CLASS_BINDING_INVERT:d.CLASS_BINDING_INVERT,ELEMENT_NAME:d.ELEMENT_NAME,ELEMENT_ATTRS:d.ELEMENT_ATTRIBUTES_AND_CHILDREN,ELEMENT_ATTRIBUTES_AND_CHILDREN:d.ELEMENT_ATTRIBUTES_AND_CHILDREN,TEXT_VALUE:d.TEXT_VALUE,COMMENT_VALUE:d.COMMENT_VALUE,CONTENT_CHILDREN:d.CONTENT_CHILDREN,CONTENT_PRIORITY:d.CONTENT_PRIORITY,TemplateSwitchConfig:A,TemplateSwitcher:O,Template:L,switcher:M,getDeclFromSource:m,makeDeclaration:g,resolveResource:N,setIsolatePrefixGenerator:y,resolveTemplateInfoByNode:function(e){while(e){if(e[d.MARKER])return b.resolveInfoById(e[d.MARKER]);e=e.parentNode}return null},resolveInfoById:b.resolveInfoById,resolveTemplateById:b.resolveTemplateById,resolveObjectById:b.resolveObjectById,resolveTmplById:b.resolveTmplById,SourceWrapper:w.SourceWrapper,Theme:w.Theme,theme:w.theme,getThemeList:w.getThemeList,currentTheme:w.currentTheme,setTheme:w.setTheme,onThemeChange:w.onThemeChange,define:w.define,get:w.get,getPathList:w.getPathList}},"e.js":function(e,t,n,r,i,s,o,u,a){function J(e){var t=[];for(var n=0;n<e.length;n++)t.push(Array.isArray(e[n])?J(e[n]):e[n]);return t}function K(e,t,r,i){var s=e,o;e.bindingBridge&&(t="baseURI"in e?e.baseURI:"url"in e?n.path.dirname(e.url):t,o="url"in e?e.url:o,s=e.bindingBridge.get(e)),Array.isArray(s)?(r&&(s=J(s)),s={tokens:s}):s&&(typeof s!="object"||!Array.isArray(s.tokens))&&(s=String(s));if(!s||typeof s=="string")s=$(s,t,i,o,e);return s}var f=Object.prototype.hasOwnProperty,l=n.array.search,c=n.array.add,h=n.require("./s.js"),p=n.require("./t.js"),d=n.require("./b.js"),v=n.require("./u.js"),m=n.require("./v.js"),g=n.require("./x.js"),y=n.require("./y.js"),b=n.require("./w.js").walk,w=d.TYPE_ELEMENT,E=d.TYPE_ATTRIBUTE,S=d.TYPE_ATTRIBUTE_CLASS,x=d.TYPE_TEXT,T=d.TYPE_COMMENT,N=d.TYPE_CONTENT,C=d.TOKEN_TYPE,k=d.TOKEN_BINDINGS,L=d.TOKEN_REFS,A=d.ATTR_VALUE_INDEX,O=d.ELEMENT_ATTRIBUTES_AND_CHILDREN,M=d.TEXT_VALUE,_=d.CONTENT_PRIORITY,D=d.CONTENT_CHILDREN,P=v.resourceHash,H=v.getTokenName,B=v.bindingList,j=m.refList,F=m.addTokenRef,I=m.normalizeRefs,q=y.applyAttrs,R=g.styleNamespaceIsolate,U=g.isolateTokens,z={content:n.require("./z.js"),define:n.require("./10.js"),include:n.require("./11.js"),isolate:n.require("./12.js"),l10n:n.require("./13.js"),style:n.require("./14.js"),svg:n.require("./15.js"),text:n.require("./16.js")},W=function(){},X=function(){},V=function(){return n.genUID()+"__"},$=function(){function r(e,t,n){var i=[];for(var s=0,o,u;o=e[s];s++){var a=j(o),f=B(o);switch(o.type){case w:if(o.prefix=="b"){if(!z.hasOwnProperty(o.name))continue;z[o.name](t,n,o,i);continue}u=[1,f,a,H(o)],q(t,n,u,o.attrs),u.push.apply(u,r(o.children,t,n));break;case x:a&&a.length==2&&l(a,"element")&&(f=a[+!a.lastSearchIndex]),u=[3,f,a],(!a||o.value!="{"+a.join("|")+"}")&&u.push(o.value);break;case T:if(n.optimizeSize&&!f&&!a)continue;u=[8,f,a],n.optimizeSize||(!a||o.value!="{"+a.join("|")+"}")&&u.push(o.value);break;default:continue}i.push(u)}return i}function i(e,t,n){if(typeof e=="string"){var r=e.split(":"),i=r[1];if(i&&r[0]=="l10n"){if(r.length==2&&i.indexOf("@")==-1){if(!t)return!1;i=i+"@"+t,e="l10n:"+i}c(n,i)}}return e}function s(e,t,n){b(e,function(e,r){var o=r[k];switch(e){case w:s(r,t,n,O);break;case x:if(o){var u=i(o,n.dictURI,t.l10n);r[k]=u||0,u===!1&&(r[M]="{"+o+"}")}break;case E:if(o){var a=o[0];for(var l=a.length-1;l>=0;l--){var u=i(a[l],n.dictURI,t.l10n);if(u===!1){var c=o[1];for(var h=0;h<c.length;h++)typeof c[h]=="number"&&(c[h]==l?c[h]="{"+a[l]+"}":c[h]>l&&(c[h]=c[h]-1));a.splice(l,1),a.length||(r[k]=0)}else a[l]=u}}break;case S:if(o){for(var h=0,p;p=o[h];h++){if(p.length>2)continue;var d=p[1].split(":"),v=d.pop(),m=d.pop()||"";if(f.call(n.defines,v)){var g=n.defines[v];p[1]=(m?m+":":"")+g[0],p.push.apply(p,g.slice(1))}else p.push(0)}if(n.optimizeSize){var y=A[e];r[y]||(r.length=y)}}}})}function o(e){function t(e,n){for(var r=n;r<e.length;r++){var i=e[r],s=i[C],o;if(s==w||s==x)return i;if(s==T)if(i[L]||i[k])return i;if(s==N){o=t(i,D);if(o)return o}}return null}return t(e,0)}var e=[],t={};return function u(i,a,f,l,c){f=n.object.slice(f),f.Template=W,f.genIsolateMarker=V,f.resolveResource=X,f.getDeclFromSource=K,f.makeDeclaration=u,f.process=r,f.includeStack=e,f.includeOptions=f.includeOptions||{},f.templates={},f.defines={},f.dictURI=l?n.path.resolve(l):a||"";if(f.dictURI){var d=n.path.extname(f.dictURI);d&&d!=".l10n"&&(f.dictURI=f.dictURI.substr(0,f.dictURI.length-d.length)+".l10n")}var v={sourceUrl:l,baseURI:a||"",tokens:null,includes:[],deps:[],templates:{},isolate:!1,styleNSPrefix:{},resources:[],l10n:[],warns:[]};i||(i=""),Array.isArray(i)||(i=h(String(i||""),{loc:!!f.loc,range:!!f.range})),e.push(c!==!0&&c||{}),v.tokens=r(i,v,f),e.pop(),v.tokens.push([N,0]);var m=I(v.tokens),g=o(v.tokens),y=m[":content"];y.node[_]>1&&(y.node[_]=1),y.overrided.forEach(function(e){var t=e.parent.indexOf(e.node);t!=-1&&e.parent.splice.apply(e.parent,[t,1].concat(e.node.slice(D)))}),g||(g=[x,0,0],v.tokens.unshift(g)),m.element||F(g,"element"),s(v.tokens,v,f);if(e.length==0){U(v.tokens,v.isolate||"",v,f);if(v.isolate)for(var b=0,w;w=v.resources[b];b++)w.type=="style"&&w.isolate!==R&&(w.isolate=v.isolate+w.isolate);v.resources=v.resources.filter(function(e,t,r){return e.url&&!n.array.search(r,P(e),P,t+1)}).map(function(e){if(e.type!="style")return{type:e.type,url:e.url};var r=e.url,i=e.isolate,s=i===R,o;if(s){i=R[r];if(r in t)return{type:"style",url:t[r].url}}if(!i)return{type:"style",url:r};var u=n.resource.virtual("css","").ready(function(e){e.url=r+"?isolate-prefix="+i,e.baseURI=n.path.dirname(r)+"/",e.map=o,a()}),a=n.resource(r).ready(function(e){var t=p(e&&e.cssText||"",i,!0);o=t.map,u.update(t.css)});return s&&(t[r]=u),{type:"style",url:u.url}})}return v.warns.length||(v.warns=!1),v}}();n.resource("./d.js").ready(function(e){X=e.resolveResource,W=e.Template}),t.exports={VERSION:3,makeDeclaration:$,walk:b,getDeclFromSource:K,setIsolatePrefixGenerator:function(e){V=e}}},"s.js":function(e,t,n,r,i,s,o,u,a){function P(e){var t,n=[],r=[],i={};for(var s=0;s<e.length;s++)s%2?(t=e[s],i[t]||(i[t]=n.length,n.push(t)),r.push(i[t])):e[s]&&r.push(D(e[s]));return[n,r]}function H(e,t,n){var r=e.value,i=0,s,o;if(r)switch(t){case"class":var u=e.valueRange.start_,a=/(\s*)(\S+)/g,f=[],l=[],h;i=[];while(y=a.exec(r)){var p=y[2],v={value:p,binding:!1,range:{start_:u+=y[1].length,end_:u+=p.length}};n(v),(o=p.match(L))?(h=[o[1]||"",o[2]],h.info_=v,v.binding=!0,i.push(h)):f.push(p),l.push(v)}r=f.join(" "),e.map_=l;break;case"style":var m=[];i=[];if(s=r.match(A))for(var g=0,y;y=s[g];g++){var o=y.match(O),b=o[1],r=o[2].trim(),w=r.split(M);if(w.length>1){var E=P(w);E.push(b),i.push(E)}else m.push(b+": "+D(r))}r=m.join("; "),r&&(r+=";");break;default:s=r.split(k),s.length>1?i=P(s):r=D(r)}i&&!i.length&&(i=0),e.binding=i,e.value=r,e.type=d[t]||c}function B(e,t,n){function r(e){return(e.prefix?e.prefix+":":"")+e.name}function i(e){return e.attrs.reduce(function(e,t){return e[r(t)]=t.value,e},{})}function s(){var e=1,t=0;c=new Array(n.length),d=new Array(n.length);for(var r=0;r<n.length+1;r++)c[r]=e,d[r]=t,n[r]==="\n"?(e++,t=0):t++}function o(e){return{line:c[e],column:d[e]}}function u(e){return{start:o(e.start_),end:o(e.end_)}}function a(e){t.loc&&(e.loc=u(e.range),e.valueRange&&(e.valueLoc=u(e.valueRange))),t.range?(e.range=[e.range.start_,e.range.end_],e.valueRange&&(e.valueRange=[e.valueRange.start_,e.valueRange.end_])):(delete e.range,delete e.valueRange)}function f(e){var t,n;for(var r=0;t=e[r++];n=t){if(t.type==l){var s=i(t);for(var o=0,u;u=t.attrs[o++];){var c=u.name;if(t.prefix=="b"&&u.name=="value"){var d=t.name.match(_);d&&(c=d[1]=="class"?"class":s.name)}H(u,c,a),a(u)}f(t.children)}t.type==h&&(t.value=D(t.value),!t.refs&&n&&n.type==h&&!n.refs&&(n.value+=t.value,n.end_=t.end_,e.splice(--r,1))),t.type==p&&(t.value=D(t.value)),a(t)}}var c,d;t.loc&&s(),f(e)}function j(e,t){var n=[],r=[],i={children:n},s=!1,o,u=m,a=0,f=0,d,k,L,A;if(!t||t.trim!==!1)a=f=e.match(/^\s*/)[0].length,e=e.trimRight();while(a<e.length||u!=m){u.lastIndex=a,L=a,A=u.exec(e);if(!A||A.index!==a){if(u==E&&o&&o.type==p){u=b;continue}s&&(i=r.pop()),o&&i.children.pop();if(o=i.children.pop())o.type==h&&!o.refs?f-=o.value.length:i.children.push(o);s=!1,u=m;continue}a=u.lastIndex;switch(u){case m:d=L+A[1].length;if(f!=d){var O=f==L?A[1]:e.substring(f,d);O=O.replace(/\s*(\r\n?|\n\r?)\s*/g,""),O&&i.children.push({type:h,value:O,range:{start_:f,end_:d}})}f=d,A[3]?i.children.push({type:h,refs:["l10n:"+A[3]],value:"{l10n:"+A[3]+"}",range:{start_:d,end_:a}}):A[2]=="{"?(k=a-1,i.children.push(o={type:h,range:{start_:d,end_:d}}),u=E):A[4]?A[4]=="/"?(o=null,u=w):(i.children.push(o={type:p,range:{start_:d,end_:d}}),A[5]?(k=a-A[5].length,u=E):(k=a,u=b)):A[2]&&(s=!0,r.push(i),i.children.push(o={type:l,attrs:[],children:[],range:{start_:d,end_:d}}),i=o,u=g);break;case w:A[1]!==(i.prefix?i.prefix+":":"")+i.name?i.children.push({type:h,value:"</"+A[0],range:{start_:L-2,end_:L+A[0].length}}):(i.range.end_=L+A[0].length,i=r.pop()),u=m;break;case g:case y:if(A[2]==":"){o.prefix?u=T:o.prefix=A[1];break}A[1]&&(o.name=A[1],o.range.end_=L+A[1].length,o.type==c&&i.attrs.push(o));if(A[2]=="{"){o.type==l?u=E:u=T;break}if(A[3]){s=!1,i.range.end_=a;if(A[3]=="/>"||!i.prefix&&N.test(i.name))i=r.pop();else if(i.prefix=="b"&&i.name in C){u=C[i.name];break}u=m;break}if(A[2]=="="){u=S;break}o={type:c,range:{start_:a,end_:a}},u=y;break;case b:o.value=e.substring(k,a-3),o.range.end_=a,u=m;break;case E:o.refs?o.refs.push(A[1]):o.refs=[A[1]],A[2]!="|"&&(o.type==h?(a-=A[2].length-1,o.value=e.substring(k,a),o.range.end_=a,u=m):o.type==p?u=b:o.type==c&&e[a]=="="?(a++,u=S):(o={type:c,range:{start_:a,end_:a}},u=y));break;case S:o.value=A[1].replace(x,'"'),o.range.end_=a,o.valueRange={start_:L+1,end_:L+1+A[1].length},o={type:c,range:{start_:a,end_:a}},u=y;break;case C.text:case C.style:i.children.push({type:h,value:A[1],range:{start_:L,end_:L+A[1].length}}),i=r.pop(),u=m;break;default:throw v}u==m&&(f=a)}return f!=a&&i.children.push({type:h,value:e.substring(f,a),range:{start_:f,end_:a}}),B(n,t||{},e),n.templateTokens=!0,n}var f=n.require("./b.js"),l=f.TYPE_ELEMENT,c=f.TYPE_ATTRIBUTE,h=f.TYPE_TEXT,p=f.TYPE_COMMENT,d=f.ATTR_TYPE_BY_NAME,v="Invalid or unsupported syntax",m=/((?:.|[\r\n])*?)(\{(?:l10n:([a-zA-Z_][a-zA-Z0-9_\-]*(?:\.[a-zA-Z_][a-zA-Z0-9_\-]*)*(?:\.\{[a-zA-Z_][a-zA-Z0-9_\-]*\})?)\})?|<(\/|!--(\s*\{)?)?|$)/g,g=/([a-z_][a-z0-9\-_]*)(:|\{|\s*(\/?>)?)/ig,y=/([a-z_][a-z0-9_\-]*)(:|\{|=|\s*)|(\/?>)/ig,b=/(.|[\r\n])*?-->/g,w=/([a-z_][a-z0-9_\-]*(?::[a-z_][a-z0-9_\-]*)?)>/ig,E=/([a-z_][a-z0-9_]*)(\||\}\s*)/ig,S=/"((?:(\\")|[^"])*?)"\s*/g,x=/\\"/g,T=/^/g,N=/^(area|base|br|col|command|embed|hr|img|input|link|meta|param|source)$/i,C={text:/((?:.|[\r\n])*?)(?:<\/b:text>|$)/g,style:/((?:.|[\r\n])*?)(?:<\/b:style>|$)/g},k=/\{([a-z_][a-z0-9_]*|l10n:[a-z_][a-z0-9_]*(?:\.[a-z_][a-z0-9_]*)*(?:\.\{[a-z_][a-z0-9_]*\})?)\}/i,L=/^((?:[a-z_][a-z0-9_\-]*)?(?::(?:[a-z_][a-z0-9_\-]*)?)?)\{((anim:)?[a-z_][a-z0-9_\-]*)\}$/i,A=/\s*[^:]+?\s*:(?:\(.*?\)|".*?"|'.*?'|[^;]+?)+(?:;|$)/gi,O=/\s*([^:]+?)\s*:((?:\(.*?\)|".*?"|'.*?'|[^;]+?)+);?$/i,M=/\{([a-z_][a-z0-9_]*)\}/i,_=/^(?:|append-|set-|remove-)(class|attr)$/,D=function(){function s(n,r){return e[r]||(r.charAt(0)=="#"?e[r]=String.fromCharCode(r.charAt(1)=="x"||r.charAt(1)=="X"?parseInt(r.substr(2),16):r.substr(1)):t&&(t.innerHTML=n,e[r]=t.firstChild?t.firstChild.nodeValue:n)),e[r]||n}var e={},t=n.NODE_ENV?null:r.document.createElement("div"),i=/&([a-z]+\d*|#\d+|#x[0-9a-f]{1,4});?/gi;return function(t){return String(t).replace(i,s)}}();t.exports=j},"t.js":function(e,t,n,r,i,s,o,u,a){function v(){return n.genUID()+"__"}function m(e,t,n){function r(t,n){var r=e.indexOf(t,n);N=r!==-1?r+t.length-1:S.length}function i(){var e=S[N];if(e!=='"'&&e!=="'")return;for(N++;N<x&&S[N]!==e;N++)S[N]==="\\"&&N++;return!0}function s(){var e=S[N];if(e==="(")return r(")",N+1),!0;if(e==="["){for(N++;N<x&&S[N]!=="]";N++)i();return!0}}function o(){if(S[N]!=="/"||S[N+1]!=="*")return;return r("*/",N+2),!0}function u(){for(;N<x&&S[N]!=")";N++)if(o()||s()||a()||y())continue}function a(){if(S[N]!==":")return;var t=e.substr(N+1,d).match(p);return t&&(N+=t[0].length+1,u()),!0}function m(){if(S[N]!=="@")return;var t=e.substr(N+1,h).match(c);return t&&(N+=t[0].length,C=!0),!0}function g(){if(S[N]!=="{")return;if(C){N++,b(!0);return}for(N++;N<x&&S[N]!=="}";N++)o()||i()||s();return!0}function y(){if(S[N]!==".")return;var n=e.substr(N+1,l).match(f);return n&&(N++,w[N+E.length/2*t.length-1]=N,E.push(e.substring(T,N),t),T=N),!0}function b(e){for(C=!1;N<x;N++){if(o()||m()||a()||s()||i()||y())continue;if(e&&S[N]=="}")return;g()}}var w={},E=[],S=e.split(""),x=S.length,T=0,N=0,C;return t||(t=v()),b(!1),E=E.join("")+e.substring(T),n?{css:E,map:w,prefix:t}:E}var f=/^\-?([_a-z]|[^\x00-\xb1]|\\[0-9a-f]{1,6}(\r\n|[ \n\r\t\f])?|\\[^\n\r\f0-9a-f])/i,l=8,c=/^(media|supports|document)\b/i,h=8,p=/^(not|has|matches|nth-child|nth-last-child)\(/i,d=15;t.exports=m},"u.js":function(e,t,n,r,i,s,o,u,a){function l(e){return[e.type,e.url,e.isolate].join(";")}function c(e,t){for(var n=0;n<t.length;n++)f(e,t[n])}function h(e){return(e.prefix?e.prefix+":":"")+e.name}function p(e){var t=e.refs;return t&&t.length?t[0]:0}function d(e){var t={};if(e.attrs)for(var n=0,r;r=e.attrs[n];n++)t[h(r)]=r.value;return t}function v(e){var t={};if(e.attrs)for(var n=0,r;r=e.attrs[n];n++)t[h(r)]=r;return t}function m(e){var t={},n=(e||"").trim().split(/\s*,\s*/);for(var r=0;r<n.length;r++){var i=n[r].split(/\s*:\s*/);if(i.length!=2)return{};t[i[0]]=i[1]}return t}function g(e,t){if(t)return(e.sourceUrl||"")+":"+t.start.line+":"+(t.start.column+1)}function y(e,t,n,r){r&&t.loc&&(n=Object(n),n.loc=typeof r=="string"?r:g(e,r)),e.warns.push(n)}function b(e,t,n,r){t.loc&&r&&r.loc&&!n.loc&&(n.loc=g(e,r.loc))}var f=n.array.add;t.exports={resourceHash:l,addUnique:c,getTokenName:h,bindingList:p,getTokenAttrValues:d,getTokenAttrs:v,parseOptionsValue:m,getLocation:g,addTemplateWarn:y,addTokenLocation:b}},"v.js":function(e,t,n,r,i,s,o,u,a){function g(e){var t=e.refs;return t&&t.length?t:0}function y(e,t){e[m]||(e[m]=[]),f(e[m],t),t!="element"&&!e[v]&&(e[v]=e[m].length==1?t:0)}function b(e,t){var n=e[m].indexOf(t);if(n!=-1){var r=e[v]&&typeof e[v]=="number";e[m].splice(n,1),r&&n==e[v]-1&&(e[v]=t,r=!1),e[m].length?r&&(e[v]-=n<e[v]-1):e[m]=0}}function w(e){var t={};return l(e,function(e,n,r){if(e===p){var i=t[":content"];i?n[d]>=i.node[d]?(i.overrided.push({parent:i.parent,node:i.node}),i.parent=r,i.node=n):i.overrided.push({parent:r,node:n}):t[":content"]={parent:r,node:n,overrided:[]}}else if(e!==h){var s=n[m];if(!s)return;for(var o=s.length-1,u;u=s[o];o--){if(u.indexOf(":")!=-1){b(n,u);continue}t[u]&&b(t[u].node,u),n[v]==u&&(n[v]=o+1),t[u]={parent:r,node:n}}}}),t}var f=n.array.add,l=n.require("./w.js").walk,c=n.require("./b.js"),h=c.TYPE_ATTRIBUTE_EVENT,p=c.TYPE_CONTENT,d=c.CONTENT_PRIORITY,v=c.TOKEN_BINDINGS,m=c.TOKEN_REFS;t.exports={refList:g,addTokenRef:y,removeTokenRef:b,normalizeRefs:w}},"w.js":function(e,t,n,r,i,s,o,u,a){function v(e,t){function n(e,r){for(var i=r,s;s=e[i];i++){var o=s[h];t(o,s,e);switch(o){case l:n(s,p);break;case c:n(s,d)}}}n(e,0)}var f=n.require("./b.js"),l=f.TYPE_ELEMENT,c=f.TYPE_CONTENT,h=f.TOKEN_TYPE,p=f.ELEMENT_ATTRIBUTES_AND_CHILDREN,d=f.CONTENT_CHILDREN;t.exports={walk:v}},"x.js":function(e,t,n,r,i,s,o,u,a){function m(e,t,n){for(var r=0,i;i=e[r];r++)i.type=="style"&&(i.isolate!==v&&(i.isolate=t+i.isolate),i.includeToken||(i.includeToken=n))}function g(e,t,r,i,s){var o=t.children[0],u=r?n.resource.resolveURI(r,e.baseURI,'<b:style src="{url}"/>'):n.resource.virtual("css",o?o.value:"",e.sourceUrl).url;return e.resources.push({type:"style",url:u,isolate:i,token:t,includeToken:null,inline:r?!1:o||!0,namespace:s}),u}function y(e,t){function n(e){return e.indexOf(":")<=0?e:t.prefix+e}l(e,function(e,t){if(e!==h)return;var r=t[p],i=d[e];t[i]&&(t[i]=t[i].replace(/\S+/g,n));if(r)for(var s=0,o;o=r[s];s++)o[0]=n(o[0])})}function b(e,t,n){function r(e){if(e.indexOf(":")==-1)return t+e;if(!n)return e;var r=e.split(":");if(!r[0])return r[1];var i=f.call(n.styleNSPrefix,r[0])?n.styleNSPrefix[r[0]]:!1;return i?i.prefix+r[1]:!1}l(e,function(e,t){if(e!==h)return;var n=t[p],i=d[e];t[i]&&(t[i]=t[i].split(/\s+/).map(function(e){return r(e,e,t.valueLocMap?t.valueLocMap[e]:null)}).filter(Boolean).join(" "));if(n){for(var s=0,o,u,a;o=n[s];s++)u=r(o[0],o[0]+"{"+o[1]+"}",o.loc),u===!1?(a=!0,n[s]=null):o[0]=u;a&&(n=n.filter(Boolean),t[p]=n.length?n:0)}})}var f=Object.prototype.hasOwnProperty,l=n.require("./w.js").walk,c=n.require("./b.js"),h=c.TYPE_ATTRIBUTE_CLASS,p=c.TOKEN_BINDINGS,d=c.ATTR_VALUE_INDEX,v={};t.exports={styleNamespaceIsolate:v,adoptStyles:m,addStyle:g,applyStyleNamespaces:y,isolateTokens:b}},"y.js":function(e,t,n,r,i,s,o,u,a){function M(e,t){var n=typeof e[0]=="number"?L:0;for(var r=n,i,s;i=e[r];r++){i[C]==b?s="event-"+i[1]:s=S[i[C]]||i[E];if(s==t)return i}}function _(e,t){var n=e[k];if(n)for(var r=0,i;i=n[r];r++)if(i[2]==t)return i}function D(e,t,n,r,i,s,o){var u=M(n,"style");u||(u=[w,0,0],n.push(u));var a=r.binding,f=u[k],c=!1,h=r.name==s,p=u[3];f&&l(f,_(u,i)),!a||a[0].length!=a[1].length?c=!(h^r.value===""):(a=a.concat(i,r.name),c=h,f?f.push(a):u[k]=[a]),p&&(p=p.replace(new RegExp(i+"\\s*:\\s*[^;]+(;|$)"),"")),c&&(p=(p?p+" ":"")+o),u[3]=p}function P(e,t,n,r){(r.name=="show"||r.name=="hide")&&D(e,t,n,r,"display","show","display: none;"),(r.name=="visible"||r.name=="hidden")&&D(e,t,n,r,"visibility","visible","visibility: hidden;")}function H(e,t,n,r){if(n[C]!==g)return;if(!/[\/\(\)]/.test(r)){var i=[y,[["$role"],[0,r?"/"+r:""]],0,"role-marker"];n.push(i)}}function B(e,t,n,r){var i,s,o,u;for(var a=0,f;f=r[a];a++){if(f.prefix=="b"){switch(f.name){case"ref":var l=(f.value||"").trim().split(/\s+/);for(var h=0;h<l.length;h++)c(n,l[h]);break;case"show":case"hide":i=f;break;case"visible":case"hidden":s=f;break;case"role":H(e,t,n,f.value||"",f)}continue}(u=f.name.match(O))?o=u[1]==f.value?[b,u[1]]:[b,u[1],f.value]:(o=[f.type,f.binding,0],f.type==y&&o.push(d(f)),f.value&&(!t.optimizeSize||!f.binding||f.type!=y)&&o.push(f.value)),n.push(o)}return i&&P(e,t,n,i),s&&P(e,t,n,s),n}function j(e,t,r,i,s,o,u){var a=v(s),c=m(s);o&&(a.name=o);if(!a.name)return;if(!A.test(a.name))return;if(i&&i[C]==g){var h=i,p=a.name.match(O),d=a.name=="class"||a.name=="style",w=p?b:x[a.name]||y,E=T[w]||N,S=h&&M(h,a.name);S&&u=="set"&&(l(h,S),S=null),!S&&(u=="set"||u=="append")&&(u="set",p?S=[w,p[1]]:(S=[w,0,0,w==y?a.name:""],w==y&&S.push("")),h||(h=[],i.push(h)),h.push(S));switch(u){case"set":if(S[C]==b){a.value==p[1]?S.length=2:S[E]=a.value;return}var L=c.value||{};S[k]=L.binding||0,!t.optimizeSize||!S[k]||d?S[E]=L.value||"":S.length=E;if(d&&!S[k]&&!S[E]){l(h,S);return}break;case"append":var L=c.value||{},D=L.value||"",P=L.binding;if(!p)if(P){var H=S[k];if(H)switch(a.name){case"style":for(var B=0,j;j=P[B];B++)l(H,_(S,j[2])),H.push(j);break;case"class":H.push.apply(H,P);break;default:P[0].forEach(function(e){f(this,e)},H[0]);for(var B=0;B<P[1].length;B++){var F=P[1][B];typeof F=="number"&&(F=H[0].indexOf(P[0][F])),H[1].push(F)}}else S[k]=P,d||S[k][1].unshift(S[E])}else!d&&S[k]&&S[k][1].push(a.value);if(D)if(p||a.name=="class"){var I=(S[E]||"").trim(),q=D.trim();I=I?I.split(/\s+/):[],q=q?q.split(/\s+/):[];for(var B=0;B<q.length;B++){var R=q[B];n.array.remove(I,R),I.push(R)}S[E]=I.join(" ")}else S[E]=(S[E]||"")+(S[E]&&d?" ":"")+D;d&&!S[k]&&!S[E]&&l(h,S);break;case"remove-class":if(S){var L=c.value||{},U=(S[E]||"").split(" "),z=(L.value||"").split(" "),W=S[k];if(L.binding&&W){for(var B=0,X;X=L.binding[B];B++)for(var V=W.length-1,$;$=W[V];V--){var J=$[0],K=$[3]||$[1];J===X[0]&&K===X[1]&&W.splice(V,1)}W.length||(S[k]=0)}for(var B=0;B<z.length;B++)l(U,z[B]);S[E]=U.join(" "),!W.length&&!U.length&&l(h,S)}break;case"remove":S&&l(h,S)}}}var f=n.array.add,l=n.array.remove,c=n.require("./v.js").addTokenRef,h=n.require("./b.js"),p=n.require("./u.js"),d=p.getTokenName,v=p.getTokenAttrValues,m=p.getTokenAttrs,g=h.TYPE_ELEMENT,y=h.TYPE_ATTRIBUTE,b=h.TYPE_ATTRIBUTE_EVENT,w=h.TYPE_ATTRIBUTE_STYLE,E=h.ATTR_NAME,S=h.ATTR_NAME_BY_TYPE,x=h.ATTR_TYPE_BY_NAME,T=h.ATTR_VALUE_INDEX,N=h.ATTR_VALUE,C=h.TOKEN_TYPE,k=h.TOKEN_BINDINGS,L=h.ELEMENT_ATTRIBUTES_AND_CHILDREN,A=/^[a-z_][a-z0-9_\-:]*$/i,O=/^event-(.+)$/;t.exports={getAttrByName:M,applyShowHideAttribute:P,addRoleAttribute:H,applyAttrs:B,modifyAttr:j}},"z.js":function(e,t,n,r,i,s,o,u,a){var f=n.require("./b.js"),l=f.TYPE_CONTENT;t.exports=function(e,t,n,r){var i=[l,2];n.children&&i.push.apply(i,t.process(n.children,e,t)),r.push(i)}},"10.js":function(e,t,n,r,i,s,o,u,a){var f=Object.prototype.hasOwnProperty,l=n.require("./b.js"),c=n.require("./u.js"),h=c.getTokenAttrValues,p=l.CLASS_BINDING_BOOL,d=l.CLASS_BINDING_INVERT,v=l.CLASS_BINDING_ENUM;t.exports=function(e,t,n){var r=h(n);if("name"in r&&"type"in r&&!f.call(t.defines,r.name)){var i=r.from||r.name,s=r.name,o=!1,u,a;switch(r.type){case"bool":o=[i,p,s,r["default"]=="true"?1:0];break;case"invert":o=[i,d,s,!r["default"]||r["default"]=="true"?1:0];break;case"enum":if("values"in r==0)break;a=(r.values||"").trim();if(!a)break;a=a.split(/\s+/),u=a.indexOf(r["default"]),o=[i,v,s,u+1,a]}o&&(t.defines[s]=o)}}},"11.js":function(e,t,n,r,i,s,o,u,a){function U(e,t){c(e,function(e,n){n.includeToken||(n.includeToken=t)})}function z(e,t){c(e,function(e,n){if(e!==B||n[H]!="role-marker")return;var r=n[P][1],i=r[1];r[1]="/"+t+i})}function W(e){if(Array.isArray(e))return e.map(W);if(e&&e.constructor===Object){var t={};for(var n in e)t[n]=W(e[n]);return t}return e}function X(e,t){return{type:j,prefix:"b",name:e.instruction,attrs:n.object.iterate(e.attrs||{},function(e,t){return{type:B,name:e,value:t}}).concat(n.object.complete({name:e.valueTo},t))}}var f=n.array.remove,l=n.array.add,c=n.require("./w.js").walk,h=n.require("./u.js"),p=h.addUnique,d=h.getTokenAttrValues,v=h.getTokenAttrs,m=h.parseOptionsValue,g=n.require("./v.js"),y=g.normalizeRefs,b=g.addTokenRef,w=g.removeTokenRef,E=n.require("./x.js"),S=E.styleNamespaceIsolate,x=E.adoptStyles,T=E.addStyle,N=E.isolateTokens,C=E.applyStyleNamespaces,k=n.require("./y.js"),L=k.getAttrByName,A=k.addRoleAttribute,O=k.applyShowHideAttribute,M=k.modifyAttr,_=n.require("./b.js"),D=_.TOKEN_TYPE,P=_.TOKEN_BINDINGS,H=_.ATTR_NAME,B=_.TYPE_ATTRIBUTE,j=_.TYPE_ELEMENT,F=_.ELEMENT_ATTRIBUTES_AND_CHILDREN,I=_.CONTENT_CHILDREN,q=["include","content"],R={"class":{instruction:"append-class",valueTo:"value"},id:{instruction:"set-attr",valueTo:"value",attrs:{name:"id"}},ref:{instruction:"add-ref",valueTo:"name"},show:{instruction:"show",valueTo:"expr"},hide:{instruction:"hide",valueTo:"expr"},visible:{instruction:"visible",valueTo:"expr"},hidden:{instruction:"hidden",valueTo:"expr"}};t.exports=function(e,t,r,i){var s=d(r),o=v(r),u=t.includeStack,a=s.src;if(!a)return;var c;/^#[^\d]/.test(a)?(c=e.templates[a.substr(1)],c&&(c=t.makeDeclaration(W(c.tokens),c.baseURI,c.options,c.sourceUrl))):c=t.resolveResource(a,e.baseURI);if(!c)return;if(u.indexOf(c)!==-1)return;var h=o.isolate?o.isolate.value||t.genIsolateMarker():"",g=s.options?m(s.options):null,E=t.getDeclFromSource(c,"",!0,n.object.merge(t,{includeOptions:g}));U(E.tokens,r),e.includes.push({token:r,resource:c,nested:E.includes}),c.bindingBridge&&l(e.deps,c),E.deps&&p(e.deps,E.deps),E.warns&&e.warns.push.apply(e.warns,E.warns);if(E.resources){var k=E.resources;"no-style"in s?k=k.filter(function(e){return e.type!="style"}):x(k,h,r),e.resources.unshift.apply(e.resources,k)}var _={prefix:t.genIsolateMarker()};C(E.tokens,_);for(var P in E.styleNSPrefix)e.styleNSPrefix[_.prefix+P]=n.object.merge(E.styleNSPrefix[P],{});h&&N(E.tokens,h);var H=!1,B=[],V=y(E.tokens);for(var $ in o)if(R.hasOwnProperty($))B.push(X(R[$],o[$]));else if($==="role"){var J=o.role.value;if(J&&!/[\/\(\)]/.test(J)){var K;z(E.tokens,J,o.role,K)}}B=B.concat(r.children);for(var Q=0,G;G=B[Q];Q++)if(G.type==j&&G.prefix=="b"&&q.indexOf(G.name)===-1){var Y=d(G),Z="ref"in Y?Y.ref:"element",et=Z.charAt(0)===":",tt=Z&&V[Z],nt=tt&&tt.node;switch(G.name){case"style":var Y=d(G),rt=!0;if(Y.options){var it=m(Y.options);for(var st in it)rt=rt&&it[st]==g[st]}if(rt){var ot=Y.namespace?"namespace":"ns",ut=Y[ot],at=ut?S:h,ft=T(e,G,Y.src,at,ut);ut&&(ft in S==0&&(S[ft]=t.genIsolateMarker()),e.styleNSPrefix[_.prefix+ut]={name:ut,prefix:S[ft]})}break;case"replace":case"remove":case"before":case"after":var lt=G.name=="replace"||G.name=="remove",Y=d(G),Z="ref"in Y||!lt?Y.ref:"element",tt=Z&&V[Z];if(tt){var ct=tt.parent,ht=ct.indexOf(tt.node);if(ht!=-1){var pt=[ht+(G.name=="after"),lt];G.name!="remove"&&(pt=pt.concat(t.process(G.children,e,t))),ct.splice.apply(ct,pt)}}break;case"prepend":case"append":if(nt&&nt[D]==j){var dt=t.process(G.children,e,t);G.name=="prepend"?nt.splice.apply(nt,[F,0].concat(dt)):nt.push.apply(nt,dt)}break;case"show":case"hide":case"visible":case"hidden":if(nt&&nt[D]==j){var vt=v(G).expr;if(!vt)break;O(e,t,nt,n.object.complete({name:G.name},v(G).expr))}break;case"attr":case"set-attr":M(e,t,r,nt,G,!1,"set");break;case"append-attr":M(e,t,r,nt,G,!1,"append");break;case"remove-attr":M(e,t,r,nt,G,!1,"remove");break;case"class":case"append-class":M(e,t,r,nt,G,"class","append");break;case"set-class":M(e,t,r,nt,G,"class","set");break;case"remove-class":var mt=v(G).value;mt&&(mt.value=mt.value.split(/\s+/).map(function(e){return e.indexOf(":")>0?_.prefix+e:e}).join(" "),mt.binding&&mt.binding.forEach(function(e){e[0].indexOf(":")>0&&(e[0]=_.prefix+e[0])}),mt.map_&&mt.map_.forEach(function(e){e.value.indexOf(":")>0&&(e.value=_.prefix+e.value)})),M(e,t,r,nt,G,"class","remove-class");break;case"add-ref":var gt=(Y.name||"").trim();if(!nt)break;if(et)break;if(!/^[a-z_][a-z0-9_]*$/i.test(gt))break;b(nt,gt);break;case"remove-ref":var gt=(Y.name||"").trim(),Z="ref"in Y?Y.ref:gt||"element",et=Z.charAt(0)===":",tt=Z&&V[Z],nt=tt&&tt.node;if(!nt)break;if(et)break;if(!/^[a-z_][a-z0-9_]*$/i.test(gt))break;w(nt,gt||Z);break;case"role":case"set-role":var st=Y.name;!st&&"value"in Y&&(st=Y.value);if(!nt)break;f(nt,L(nt,"role-marker")),A(e,t,nt,st||"",G);break;case"remove-role":if(!nt)break;f(nt,L(nt,"role-marker"));break;default:}}else{var tt=V[":content"],yt=t.process([G],e,t);if(tt){var ct=tt.parent,ht=ct.indexOf(tt.node);H||(H=!0,tt.node.splice(I)),tt.node.push.apply(tt.node,yt)}else E.tokens.push.apply(E.tokens,yt)}V.element&&w(V.element.node,"element"),i.push.apply(i,E.tokens)}},"12.js":function(e,t,n,r,i,s,o,u,a){var f=n.require("./u.js"),l=f.getTokenAttrValues;t.exports=function(e,t,n){if(e.isolate)return;e.isolate=l(n).prefix||t.isolate||t.genIsolateMarker()}},"13.js":function(e,t,n,r,i,s,o,u,a){var f=n.require("./u.js").getTokenAttrValues;t.exports=function(e,t,r){var i=f(r);i.src&&(t.dictURI=n.resource.resolveURI(i.src,e.baseURI,"<b:"+r.name+' src="{url}"/>'))}},"14.js":function(e,t,n,r,i,s,o,u,a){var f=n.require("./u.js"),l=n.require("./x.js"),c=l.styleNamespaceIsolate,h=l.addStyle,p=f.parseOptionsValue,d=f.getTokenAttrValues;t.exports=function(e,t,n){var r=!0,i=d(n);if(i.options){var s=p(i.options);for(var o in s)r=r&&s[o]==t.includeOptions[o]}if(r){var u=i.namespace?"namespace":"ns",a=i[u],f=a?c:"",l=h(e,n,i.src,f,a);if(a){l in c==0&&(c[l]=t.genIsolateMarker());if(a in e.styleNSPrefix)return;e.styleNSPrefix[a]={name:a,prefix:c[l]}}}}},"15.js":function(e,t,n,r,i,s,o,u,a){var f=n.array.add,l=n.require("./u.js"),c=l.getTokenName,h=l.getTokenAttrs,p=l.bindingList,d=n.require("./v.js").refList,v=n.require("./y.js").applyAttrs,m=n.require("./b.js").TYPE_ELEMENT;t.exports=function(e,t,r,i){var s=h(r),o=[],u=[m,0,0,"svg:use"],a=[m,p(r),d(r),"svg:svg",u];for(var l in s){var g=s[l];switch(c(g)){case"src":if(!g.value)continue;var y=n.resource.resolveURI(g.value,e.baseURI,"<b:"+r.name+' src="{url}"/>');f(e.deps,n.resource.buildCloak(y)),e.resources.push({type:"svg",url:y});break;case"use":v(e,t,u,[n.object.merge(g,{prefix:"xlink",name:"href"})]);break;default:o.push(g)}}i.push(v(e,t,a,o))}},"16.js":function(e,t,n,r,i,s,o,u,a){var f=n.require("./u.js").getTokenAttrValues;t.exports=function(e,t,r,i){var s=f(r),o=(s.ref||"").trim(),u=r.children[0]||{type:3,value:""};u=n.object.merge(u,{refs:o?o.split(/\s+/):[],value:"notrim"in s?u.value:(u.value||"").replace(/^ *(\r\n?|\n)( *$)?|(\r\n?|\n) *$/g,"")}),i.push.apply(i,t.process([u],e,t))}},"f.js":function(e,t,n,r,i,s,o,u,a){function l(e,t,n){f[e]={template:t,instances:n}}function c(e){delete f[e]}function h(e){var t=e&4095,n=e>>12,r=f[t];return r&&r.instances[n]}function p(e){var t=e&4095,n=e>>12,r=f[t],i=r&&r.instances[n];if(i)return{id:e,template:r.template,context:i.context,tmpl:i.tmpl}}function d(e){var t=e&4095,n=f[t];return n&&n.template}function v(e){var t=h(e);return t&&t.context}function m(e){var t=h(e);return t&&t.tmpl}function g(e){var t=h(e);return t&&{context:t.context,action:t.action}}var f={};t.exports={add:l,remove:c,resolveInfoById:p,resolveTemplateById:d,resolveObjectById:v,resolveTmplById:m,resolveActionById:g}},"g.js":function(e,t,n,r,i,s,o,u,a){function g(){var e=n.array(arguments).join("."),t=c[e];return t||(t=new m("",e),c[e]=t),t}function y(e){var t={},n=[];for(var r=0;r<e.length;r++)t[e[r]]||(t[e[r]]=!0,n.push(e[r]));return n}function b(e,t){var n=[];n.source=y(t).join("/");var r={base:!0};for(var i=0;i<t.length;i++){var s=t[i]||"base";if(s==e||r[s])continue;r[s]=!0,n.push(s),T(s),t.splice.apply(t,[i+1,0].concat(l[s].fallback))}return n.unshift(e),e!="base"&&n.push("base"),n.value=n.join("/"),n}function w(e,t){var n=l[e].sourcesList;for(var r=0,i;i=n[r];r++)if(i.hasOwnProperty(t))return i[t];return""}function E(e){return l[p].fallback.indexOf(e)!=-1}function S(e){g(e).set()}function x(){for(var e in c)S(e)}function T(e){e||(e="base");if(l[e])return l[e].theme;if(!/^([a-z0-9\_\-]+)$/.test(e))throw"Bad name for theme - "+e;var t={},r=[t],i=new v;l[e]={theme:i,sources:t,sourcesList:r,fallback:[]};var s=function(n,r){return n in t==0&&(t[n]=r,E(e)&&S(n)),g(n)};return n.object.extend(i,{name:e,fallback:function(t){if(i!==d&&arguments.length>0){var n=typeof t=="string"?t.split("/"):[],r={};n=b(e,n);if(l[e].fallback.source!=n.source){l[e].fallback.source=n.source;for(var s in l){var o=l[s].fallback,n=b(s,(o.source||"").split("/"));if(n.value!=o.value){r[s]=!0,l[s].fallback=n;var u=l[s].sourcesList;u.length=n.length;for(var a=0;a<u.length;a++)u[a]=l[n[a]].sources}}}for(var s in r)if(E(s)){x();break}}var f=l[e].fallback.slice(1);return f.source=l[e].fallback.source,f},define:function(e,t){typeof e=="function"&&(e=e());if(typeof e=="string"){if(typeof t=="object"){var n=e,r=t,o={};for(var u in r)r.hasOwnProperty(u)&&(o[u]=s(n+"."+u,r[u]));return o}return arguments.length==1?g(e):s(e,t)}if(typeof e=="object"){var r=e;for(var a in r)r.hasOwnProperty(a)&&s(a,r[a]);return i}},apply:function(){if(e!=p){p=e,x(),n.Token.prototype.set.call(T,p);for(var t=0,r;r=h[t];t++)r.fn.call(r.context,e)}return i},getSource:function(n,r){return r?w(e,n):t[n]},drop:function(n){t.hasOwnProperty(n)&&(delete t[n],E(e)&&S(n))}}),l[e].fallback=b(e,[]),r.push(l.base.sources),i}function N(e){return T(e).apply()}function C(e,t,n){h.push({fn:e,context:t}),n&&e.call(t,p)}var f="basis.template.theme",l={},c={},h=[],p="base",d,v=n.Class(null,{className:f+".Theme",get:g}),m=n.Class(n.Token,{className:f+".SourceWrapper",path:"",url:"",baseURI:"",init:function(e,t){this.path=t,n.Token.prototype.init.call(this,"")},get:function(){return this.value&&this.value.bindingBridge?this.value.bindingBridge.get(this.value):this.value},set:function(){var e=w(p,this.path);this.value!=e&&(this.value&&this.value.bindingBridge&&this.value.bindingBridge.detach(this.value,m.prototype.apply,this),this.value=e,this.url=e&&e.url||"",this.baseURI=(typeof e=="object"||typeof e=="function")&&"baseURI"in e?e.baseURI:n.path.dirname(this.url)+"/",this.value&&this.value.bindingBridge&&this.value.bindingBridge.attach(this.value,m.prototype.apply,this),this.apply())},destroy:function(){this.url=null,this.baseURI=null,this.value&&this.value.bindingBridge&&this.value.bindingBridge.detach(this.value,this.apply,this),n.Token.prototype.destroy.call(this)}});n.object.extend(T,new n.Token(p)),T.set=N,n.cleaner.add({destroy:function(){for(var e in c)c[e].destroy();l=null,c=null}}),d=T(),t.exports={SourceWrapper:m,Theme:v,theme:T,getThemeList:function(){return n.object.keys(l)},currentTheme:function(){return l[p].theme},setTheme:N,onThemeChange:C,define:d.define,get:g,getPathList:function(){return n.object.keys(c)}},T("base").define({".0":n.resource("./0.tmpl"),".1":n.resource("./1.tmpl"),".2":n.resource("./2.tmpl"),".3":n.resource("./3.tmpl"),".4":n.resource("./4.tmpl")})},"h.js":function(e,t,n,r,i,s,o,u,a){function $(e){return function(t){if(t.type=="click"&&t.which==3)return;var n=z[t.type]||t.type!="mouseenter"&&t.type!="mouseleave",r=t.path.slice(0,t.path.length-1),i=r.shift(),s;while(i){s=i.getAttribute&&i.getAttribute(e);if(!n||typeof s=="string")break;i=r.shift()}if(typeof s=="string"){var o=i,u=o,a,f;if(z[t.type]){var l=t.relatedTarget;l&&(o===l||W(o,l))&&(o=null)}while(o){a=o[v];if(typeof a=="number")if(f=h(a))break;o=r.shift()}var c=s.trim().split(/\s+/),p=f&&f.action;for(var d=0,m;m=c[d++];)switch(m){case"prevent-default":t.preventDefault();break;case"stop-propagation":t.stopPropagation();break;case"log-event":break;default:p&&(t.actionTarget=u,p.call(f.context,m,t))}}t.type in U&&U[t.type](t,i)}}function J(e,t){K(t),z[e]=!0,U[t]=function(t){t=new c.Event(t),t.type=e,R[e](t)},U[e]=function(t,n){if(!n||!n.parentNode)return;t=new c.Event(t),t.type=e,t.sender=n.parentNode,R[e](t)}}function K(e){if(l.call(R,e))return;R[e]=$("event-"+e);if(q)return;if(!I){if(e=="mouseenter")return J(e,"mouseover");if(e=="mouseleave")return J(e,"mouseout")}for(var t=0,n=c.browserEvents(e),r;r=n[t];t++)c.addGlobalHandler(r,R[e])}function Y(e,t,n){K(t),X&&V.indexOf(t)!=-1&&e.setAttribute("style","cursor:pointer;"+(e.getAttribute("style")||"")),q&&e.setAttribute("on"+t,q+'("'+t+'",event)'),e.setAttribute("event-"+t,n)}function Z(e,t,n){Q&&t=="class"&&(t="className");if(G&&t=="style")return e.style.cssText=n;var r=d.getNamespace(t,e);r?e.setAttributeNS(r,t,n):e.setAttribute(t,n)}var f=r.Node,l=Object.prototype.hasOwnProperty,c=n.require("./i.js"),h=n.require("./f.js").resolveActionById,p=n.require("./b.js"),d=n.require("./c.js"),v=p.MARKER,m=p.CLONE_NORMALIZATION_TEXT_BUG,g=p.TYPE_ELEMENT,y=p.TYPE_ATTRIBUTE,b=p.TYPE_ATTRIBUTE_CLASS,w=p.TYPE_ATTRIBUTE_STYLE,E=p.TYPE_ATTRIBUTE_EVENT,S=p.TYPE_TEXT,x=p.TYPE_COMMENT,T=p.TYPE_CONTENT,N=p.TOKEN_TYPE,C=p.TOKEN_BINDINGS,k=p.TOKEN_REFS,L=p.ATTR_NAME,A=p.ATTR_VALUE,O=p.ATTR_VALUE_INDEX,M=p.ELEMENT_NAME,_=p.ELEMENT_ATTRIBUTES_AND_CHILDREN,D=p.CONTENT_CHILDREN,P=p.TEXT_VALUE,H=p.COMMENT_VALUE,B=p.CLASS_BINDING_ENUM,j=p.CLASS_BINDING_BOOL,F=p.CLASS_BINDING_INVERT,I="onmouseenter"in document.documentElement,q=!1,R={},U={},z={},W,X="ontouchstart"in document.documentElement,V=["mouseover","mouseup","mousedown","mousemove","click","dblclick"];f&&!f.prototype.contains?W=function(e,t){return e.compareDocumentPosition(t)&16}:W=function(e,t){return e.contains(t)},document.addEventListener||(q=n.publicCallback(function(e,t){c.fireEvent(document,e),t.returnValue=!0;var n=R[e];n&&n(new c.Event(t))},!0));var Q=function(){var e=document.createElement("div");return e.setAttribute("class","a"),!e.className}(),G=function(){var e=document.createElement("div");return e.setAttribute("style","position:absolute"),e.style.position!="absolute"}(),et=function(e,t,n){for(var r=t,i;i=e[r];r++){var s=i[N];switch(s){case g:var o=i[M],u=d.getNamespace(o),a=u?document.createElementNS(u,o):document.createElement(o);et(i,_,a),n.appendChild(a);break;case T:et(i,D,n);break;case y:i[C]||Z(n,i[L],i[A]||"");break;case b:var f=i[O[s]];f=f?[f]:[];if(i[C])for(var l=0,c;c=i[C][l];l++){var h=c[4];if(h){var p=c[0];if(Array.isArray(p))f.push(p[h-1]);else switch(c[2]){case j:case F:f.push(p+c[3]);break;case B:f.push(p+c[5][h-1])}}}f.length&&Z(n,"class",f.join(" "));break;case w:var f=i[O[s]];f&&Z(n,"style",(n.getAttribute("style")||"")+f);break;case E:Y(n,i[1],i[2]||i[1]);break;case x:n.appendChild(document.createComment(i[H]||(i[k]?"{"+i[k].join("|")+"}":"")));break;case S:m&&r&&e[r-1][N]==S&&n.appendChild(document.createComment("")),n.appendChild(document.createTextNode(i[P]||(i[k]?"{"+i[k].join("|")+"}":"")||(i[C]?"{"+i[C]+"}":"")))}}return n};t.exports=function(e){var t=et(e,0,document.createDocumentFragment());return t.childNodes.length===1&&(t=t.removeChild(t.firstChild)),t}},"i.js":function(e,t,n,r,i,s,o,u,a){function L(e){return E[e]||[e]}function A(e){var t=[];do t.push(e);while(e=e.parentNode);return t.push(r),t}function M(e){return e instanceof O?e.event_:e||r.event}function _(e){return typeof e=="string"?l.getElementById(e):e}function D(e){var t=e.target||e.srcElement||l;return t.nodeType==3?t.parentNode:t}function P(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function H(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function B(e,t){t=_(t),t?it(t,e,B):(H(e),P(e))}function j(e){return e.keyCode||e.which||0}function F(e){return e.charCode||e.keyCode||0}function I(e,t){return typeof e.which=="number"?e.which==t.VALUE:!!(e.button&t.BIT)}function q(e){return"pageX"in e?e.pageX:"clientX"in e?e.clientX+(l.compatMode=="CSS1Compat"?l.documentElement.scrollLeft:l.body.scrollLeft):0}function R(e){return"pageY"in e?e.pageY:"clientY"in e?e.clientY+(l.compatMode=="CSS1Compat"?l.documentElement.scrollTop:l.body.scrollTop):0}function U(e){if(e.changedTouches)return e.changedTouches[0].pageX}function z(e){if(e.changedTouches)return e.changedTouches[0].pageY}function W(e){var t=0;return"deltaY"in e?t=-e.deltaY:"wheelDelta"in e?t=e.wheelDelta:e.type=="DOMMouseScroll"&&(t=-e.detail),t&&t/Math.abs(t)}function G(e){J&&e!==K&&(K=e,n.codeFrame.start())}function Y(e){J&&e!==Q&&(Q=e,n.codeFrame.finish())}function Z(e){var t=p(X[e.type]),n=V[e.type],r=new O(e);G(e);if(n)n.handler.call(n.thisObject,r);else if(t)for(var i=t.length;i-->0;){var s=t[i];s.handler.call(s.thisObject,r)}Y(e)}function et(e,t,r){V[e]&&tt(e),t||(t=n.fn.$undef),nt(e,t,r),V[e]={handler:t,thisObject:r}}function tt(e){var t=V[e];t&&(rt(e,t.handler,t.thisObject),delete V[e])}function nt(e,t,n){var r=X[e];if(r){for(var i=0,s;s=r[i];i++)if(s.handler===t&&s.thisObject===n)return}else $?it(l,e,h):l.addEventListener(e,Z,!0),r=X[e]=[];r.push({handler:t,thisObject:n})}function rt(e,t,n){var r=X[e];if(r)for(var i=0,s;s=r[i];i++)if(s.handler===t&&s.thisObject===n){r.splice(i,1),r.length||(delete X[e],$?ot(l,e,h):l.removeEventListener(e,Z,!0));return}}function it(e,t,n,i){e=_(e);if(!e)throw"basis.event.addHandler: can't attach event listener to undefined";if(typeof n!="function")throw"basis.event.addHandler: handler is not a function";var s=e===r?d:e[v];s||(s=e[v]={});var o=s[t],u={handler:n,thisObject:i};if(!o)o=s[t]=[u],o.fireEvent=function(e){e=M(e);if($&&e&&X[t]&&typeof e.returnValue=="undefined"){Z(e);if(e.cancelBubble===!0)return;typeof e.returnValue=="undefined"&&(e.returnValue=!0)}G(e);for(var n=0,r=new O(e),i;i=o[n++];)i.handler.call(i.thisObject,r);Y(e)},m?e.addEventListener(t,o.fireEvent,!1):e.attachEvent("on"+t,o.fireEvent);else{for(var a=0,f;f=o[a];a++)if(f.handler===n&&f.thisObject===i)return;o.push(u)}}function st(e,t,n){e=_(e);for(var r in t)it(e,r,t[r],n)}function ot(e,t,n,i){e=_(e);var s=e===r?d:e[v];if(s){var o=s[t];if(o)for(var u=0,a;a=o[u];u++)if(a.handler===n&&a.thisObject===i){o.splice(u,1),o.length||ut(e,t);return}}}function ut(e,t){e=_(e);var n=e===r?d:e[v];if(n)if(typeof t!="string")for(t in n)ut(e,t);else{var i=n[t];i&&(e.removeEventListener?e.removeEventListener(t,i.fireEvent,!1):e.detachEvent("on"+t,i.fireEvent),delete n[t])}}function at(e,t,n){e=_(e);var i=e===r?d:e[v];if(i&&i[t])try{J=!1,i[t].fireEvent(n)}finally{J=!0}}function ft(e,t){n.teardown(e,t)}function ct(e,t){t||(t="div");var n=t+"-"+e;if(lt[n])return lt[n];var r=!1,i=!1;if(!m){var s="on"+e,o=l.createElement("div"),u=o.appendChild(l.createElement(t));o[s]=function(){i=!0};try{u.fireEvent(s),r=!0}catch(a){}}return lt[n]={supported:r,bubble:i}}function ht(e){return function(t,n){return e(M(t),n)}}var f="basis.dom.event",l=r.document,c=n.object.extend,h=n.fn.$null,p=n.array.from,d={},v="basisEvents_"+n.genUID(),m=!!l.addEventListener,g={BACKSPACE:8,TAB:9,CTRL_ENTER:10,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,ESCAPE:27,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123},y={VALUE:1,BIT:1},b={VALUE:2,BIT:4},w={VALUE:3,BIT:2},E={mousewheel:["wheel","mousewheel","DOMMouseScroll"]},S=["returnValue","keyLocation","layerX","layerY","webkitMovementX","webkitMovementY","keyIdentifier"],x=0,T=1,N=2,C=3,k={keydown:x,keypress:x,keyup:x,click:T,dblclick:T,mousedown:T,mouseup:T,mouseover:T,mousemove:T,mouseout:T,mouseenter:T,mouseleave:T,wheel:T,mousewheel:T,DOMMouseScroll:T,touchstart:N,touchmove:N,touchend:N,touchcancel:N,pointerover:C,pointerenter:C,pointerdown:C,pointermove:C,pointerup:C,pointercancel:C,pointerout:C,pointerleave:C},O=n.Class(null,{className:f+".Event",KEY:g,init:function(e){e=M(e);for(var t in e)S.indexOf(t)==-1&&(e.type!="progress"||t!="totalSize"&&t!="position")&&typeof e[t]!="function"&&t in this==0&&(this[t]=e[t]);var r=D(e);c(this,{event_:e,sender:r,target:r,path:e.path?n.array(e.path):A(r)});switch(k[e.type]){case x:c(this,{key:j(e),charCode:F(e)});break;case T:c(this,{mouseLeft:I(e,y),mouseMiddle:I(e,b),mouseRight:I(e,w),mouseX:q(e),mouseY:R(e),wheelDelta:W(e),pointerX:q(e),pointerY:R(e)});break;case N:c(this,{touchX:U(e),touchY:z(e),mouseX:U(e),mouseY:z(e),pointerX:U(e),pointerY:z(e)});break;case C:c(this,{pointerX:q(e),pointerY:R(e),mouseX:q(e),mouseY:R(e)})}},stopBubble:function(){P(this.event_)},stopPropagation:function(){P(this.event_)},preventDefault:function(){H(this.event_)},die:function(){this.stopBubble(),this.preventDefault()}}),X={},V={},$=!m,J=!0,K,Q,lt={};t.exports={W3CSUPPORT:m,browserEvents:L,getEventInfo:ct,KEY:g,MOUSE_LEFT:y,MOUSE_RIGHT:w,MOUSE_MIDDLE:b,Event:O,sender:ht(D),cancelBubble:ht(P),cancelDefault:ht(H),kill:ht(B),key:ht(j),charCode:ht(F),mouseButton:ht(I),mouseX:ht(q),mouseY:ht(R),wheelDelta:ht(W),touchX:ht(U),touchY:ht(z),addGlobalHandler:nt,removeGlobalHandler:rt,captureEvent:et,releaseEvent:tt,addHandler:it,addHandlers:st,removeHandler:ot,clearHandlers:ut,fireEvent:at,onUnload:ft,wrap:M}},"j.js":function(e,t,n,r,i,s,o,u,a){function R(){}function U(){}function z(){}function W(e){e.setDelegate=n.fn.$undef,e.destroy=R}function X(e){var t=e.constructor.prototype;e.setDelegate=t.setDelegate,e.destroy=t.destroy}function V(e){return e.sortingValue}function $(e,t){return e=e.sortingValue||0,t=t.sortingValue||0,+(e>t)||-(e<t)}function J(e,t){return e=e.sortingValue||0,t=t.sortingValue||0,-(e>t)||+(e<t)}function K(e){return e.childNodes.sort(e.sortingDesc?J:$)}function Q(e,t,n,r){if(!e.length)return 0;r=!!r;var i=0,s=e.length-1,o=typeof t,u,a,f;do{f=i+s>>1,u=n(e[f]),a=typeof u;if(r){if(o>a||t>u){s=f-1;continue}if(o<a||t<u){i=f+1;continue}}else{if(o<a||t<u){s=f-1;continue}if(o>a||t>u){i=f+1;continue}}return t==u?f:0}while(i<=s);return f+((a<o||u<t)^r)}function G(e,t,n,r,i){if(t===n)return;var s,o=e,u=[];r&&(e.contextSelection=n,e.selected&&!e.selectedRA_&&u.push(e));while(o){s=!o.selection||i&&o===e?o.firstChild:null;if(s&&s.contextSelection!==t)throw"Try change wrong context selection";while(!s){if(o===e){if(u.length){t&&t.remove(u);if(n){n.add(u);for(var a=0;a<u.length;a++){var f=u[a];f.selected&&!n.has(f)&&(f.selected=!1,f.emit_unselect())}}}return}s=o.nextSibling,s||(o=o.parentNode)}o=s,o.selected&&!o.selectedRA_&&u.push(o),o.contextSelection=n}}function Y(e,t){if(e.contextDisabled!=t){e.contextDisabled=t;if(e.disabled)return;t?e.emit_disable():e.emit_enable()}}function Z(e){return e.isSubclassOf(st)?e:st}function et(e){if(!e)return null;if(e.isSatelliteConfig)return e;if(e instanceof st)return e;e.constructor!==Object&&(e={instance:e});var t=!1,r="update",i={isSatelliteConfig:!0};for(var s in e){var o=e[s];switch(s){case"instance":o instanceof st?i.instance=o:l.isClass(o)?i.instanceClass=Z(o):(typeof o=="string"&&(o=n.getter(o)),i.getInstance=o);break;case"instanceOf":case"satelliteClass":if(s=="instanceOf"&&"satelliteClass"in e)break;if("instance"in e)break;l.isClass(o)&&(i.instanceClass=Z(o));break;case"existsIf":case"delegate":case"dataSource":o&&(typeof o=="string"&&(o=v(o)),typeof o!="function"?o=n.fn.$const(o):t=!0),i[s]=o;break;case"config":typeof o=="string"&&(o=v(o)),i.config=o;break;case"events":r=e.events;break;default:}}!i.instance&&!i.getInstance&&!i.instanceClass&&(i.instanceClass=Z(st));if(t){Array.isArray(r)&&(r=r.join(" "));if(typeof r=="string"){var u={};r=r.split(/\s+/);for(var a=0,f;f=r[a];a++)u[f]=rt,i.handler=u}}return i}function tt(e,t){for(var n in t)t[n]&&typeof t[n]=="object"&&e.setSatellite(n,t[n])}function ft(e,t){var n=t.length-1;e.childNodes=t,e.firstChild=t[0]||null,e.lastChild=t[n]||null;for(var r,i=n;r=t[i];i--)r.nextSibling=t[i+1]||null,r.previousSibling=t[i-1]||null,e.insertBefore(r,r.nextSibling)}function lt(e,t){for(var n=0,r;r=t[n];n++)r.groupNode.nodes.push(r);var i=[e.grouping.nullGroup].concat(e.grouping.childNodes),s=[];for(var n=0,o;o=i[n];n++){var u=o.nodes;o.first=u[0]||null,o.last=u[u.length-1]||null,s.push.apply(s,u),o.emit_childNodesModified({inserted:u})}return s}function ct(e,t){var n;if(typeof e.childFactory=="function"){n=e.childFactory(t);if(n instanceof e.childClass)return n}throw n?M:_}var f="basis.dom.wrapper",l=n.Class,c=n.object.complete,h=n.array,p=n.array.remove,d=n.fn.$undef,v=n.getter,m=n.fn.nullGetter,g=n.require("./6.js"),y=g.create,b=g.events,w=n.require("./2.js"),E=w.resolveValue,S=w.resolveDataset,x=w.createResolveFunction,T=w.SUBSCRIPTION,N=w.STATE,C=w.Object,k=w.ReadOnlyDataset,L=w.Dataset,A=f+": Node can't be inserted at specified point in hierarchy",O=f+": Node was not found",M=f+": Child node has wrong class",_=f+": Child node is null",D=f+": Operation is not allowed because node is under dataSource control",P=f+": Operation is not allowed because node is under dataSource adapter control",H=f+": Node can't has owner and parentNode",B=f+": Node can't has children and dataSource as childClass isn't specified",j="__auto__",F={ANY:!0,NONE:!1,PARENT:"parent",OWNER:"owner"},I={},q={};T.addProperty("owner"),T.addProperty("dataSource"),T.add("CHILD",{childNodesModified:function(e,t){var n;if(n=t.inserted)for(var r=0,i;i=n[r];r++)T.link("child",e,i);if(n=t.deleted)for(var r=0,i;i=n[r];r++)T.unlink("child",e,i)}},function(e,t){var n=t.childNodes||[];for(var r=0,i;i=n[r];r++)e("child",t,i)}),T.add("SATELLITE",{satelliteChanged:function(e,t,n){n&&T.unlink("satellite",e,n),e.satellite[t]&&T.link("satellite",e,e.satellite[t])}},function(e,t){var n=t.satellite;if(n!==nt)for(var r in n)r!==j&&e("satellite",t,n[r])});var nt=l.customExtendProperty({},function(e,t){for(var n in t)e[n]=et(t[n])}),rt=function(){var e=this.name,t=this.config,r=this.owner,i="existsIf"in t==0||t.existsIf(r);if(E(this,rt,i,"existsRA_")){var s=this.instance||t.instance;if(!s||this.factoryType=="value"){if(!this.factoryType){var o=t.getInstance,u=t.instanceClass;typeof o=="function"&&(o=o.call(r,r),l.isClass(o)&&(u=Z(o))),this.factoryType=u?"class":"value",this.factory=u||o}if(this.factoryType=="class"){var a={destroy:z};t.delegate&&(a.autoDelegate=!1,a.delegate=t.delegate(r)),t.dataSource&&(a.dataSource=t.dataSource(r)),t.config&&n.object.complete(a,typeof t.config=="function"?t.config(r):t.config),this.instance=new this.factory(a),r.setSatellite(e,this.instance,!0);return}s=ot(this,rt,this.factory,"instanceRA_")}this.instance!==s&&(this.instance=s||null,r.setSatellite(e,this.instance,!0)),s&&s.owner===r&&(t.delegate&&s.setDelegate(t.delegate(r)),t.dataSource&&s.setDataSource(t.dataSource(r)))}else{var s=this.instance;s&&(t.instance&&(t.delegate&&s.setDelegate(),t.dataSource&&s.setDataSource()),this.instance=null,r.setSatellite(e,null,!0))}},it={destroy:function(){this.instanceRA_||this.owner.setSatellite(this.name,null)}},st=l(C,{className:f+".AbstractNode",propertyDescriptors:{owner:"ownerChanged",parentNode:"parentChanged",childNodes:{nested:["length"],events:"childNodesModified"},childNodesState:"childNodesStateChanged",dataSource:"dataSourceChanged","getChildNodesDataset()":!0,satellite:{nested:!0,events:"satelliteChanged"},sorting:"sortingChanged",sortingDesc:"sortingChanged",grouping:"groupingChanged",ownerSatelliteName:"ownerSatelliteNameChanged",firstChild:!1,lastChild:!1,previousSibling:!1,nextSibling:!1,groupNode:!1,groupId:!0,autoDelegate:!1,destroyDataSourceMember:!1,name:!0},subscribeTo:C.prototype.subscribeTo+T.DATASOURCE+T.SATELLITE,isSyncRequired:function(){return this.state==N.UNDEFINED||this.state==N.DEPRECATED},syncEvents:{activeChanged:!1},emit_update:function(e){C.prototype.emit_update.call(this,e);var t=this.parentNode;t&&(t.matchFunction&&this.match(t.matchFunction),t.insertBefore(this,this.nextSibling))},listen:{owner:{destroy:function(){this.ownerSatelliteName||this.setOwner()}}},autoDelegate:F.NONE,name:null,childNodes:null,emit_childNodesModified:y("childNodesModified","delta")&&function(e){b.childNodesModified.call(this,e);var t=this.listen.childNode,n;if(t){if(n=e.inserted)for(var r=0,i;i=n[r];r++)i.addHandler(t,this);if(n=e.deleted)for(var r=0,i;i=n[r];r++)i.removeHandler(t,this)}},childNodesState:N.UNDEFINED,emit_childNodesStateChanged:y("childNodesStateChanged","oldState"),childClass:l.SELF,dataSource:null,emit_dataSourceChanged:y("dataSourceChanged","oldDataSource"),dataSourceRA_:null,dataSourceMap_:null,destroyDataSourceMember:!0,parentNode:null,emit_parentChanged:y("parentChanged","oldParentNode"),nextSibling:null,previousSibling:null,firstChild:null,lastChild:null,sorting:m,sortingDesc:!1,emit_sortingChanged:y("sortingChanged","oldSorting","oldSortingDesc"),groupingClass:null,grouping:null,emit_groupingChanged:y("groupingChanged","oldGrouping"),groupNode:null,groupId:NaN,satellite:nt,emit_satelliteChanged:y("satelliteChanged","name","oldSatellite"),ownerSatelliteName:null,emit_ownerSatelliteNameChanged:y("ownerSatelliteNameChanged","name","oldName"),owner:null,emit_ownerChanged:y("ownerChanged","oldOwner"),init:function(){C.prototype.init.call(this);var e=this.childNodes,t=this.dataSource;e&&(this.childNodes=null),t&&(this.dataSource=null);var n=this.grouping;n&&(this.grouping=null,this.setGrouping(n)),this.childClass&&(this.childNodes=[],t?this.setDataSource(t):e&&this.setChildNodes(e));var r=this.satellite;r!==nt&&(this.satellite=nt,tt(this,r));var i=this.owner;i&&(this.owner=null,this.setOwner(i))},setChildNodesState:function(e,t){var n=String(e),r=this.childNodesState;if(!N.values[n])throw new Error("Wrong state value");if(r!=n||r.data!=t)this.childNodesState=Object(n),this.childNodesState.data=t,this.emit_childNodesStateChanged(r)},appendChild:function(e){},insertBefore:function(e,t){},removeChild:function(e){},replaceChild:function(e,t){},clear:function(e){},setChildNodes:function(e){},setGrouping:function(e,t){},setSorting:function(e,t){},setDataSource:function(e){},setOwner:function(e){if(!e||e instanceof st==0)e=null;if(e&&this.parentNode)throw H;var t=this.owner;if(t!==e){var n=this.listen.owner;if(t){if(this.ownerSatelliteName&&t.satellite[j]&&this.ownerSatelliteName in t.satellite[j])return;n&&t.removeHandler(n,this),this.ownerSatelliteName&&(this.owner=null,t.setSatellite(this.ownerSatelliteName,null))}e&&n&&e.addHandler(n,this),this.owner=e,this.emit_ownerChanged(t),(this.autoDelegate==F.OWNER||this.autoDelegate===F.ANY)&&this.setDelegate(e)}},setSatellite:function(e,t,n){var r=this.satellite[e]||null,i=this.satellite[j],s=i&&i[e],o=n&&s;if(o)t=s.instance,t&&s.config.instance&&delete s.config.instance.setOwner;else{t=et(t);if(t&&t.owner===this&&i&&t.ownerSatelliteName&&i[t.ownerSatelliteName])return;s&&(delete i[e],s.config.instance&&s.config.instance.removeHandler(it,s),s.config.handler&&this.removeHandler(s.config.handler,s))}if(r!==t){var u=this.listen.satellite,a=this.listen["satellite:"+e],f;if(r){delete this.satellite[e];var l=r.ownerSatelliteName;l!=null&&(r.ownerSatelliteName=null,r.emit_ownerSatelliteNameChanged(l)),s&&r.destroy===z?f=r:(u&&r.removeHandler(u,this),a&&r.removeHandler(a,this),r.setOwner(null)),o&&!t&&s.config.instance&&(s.config.instance.setOwner=U)}if(t){if(t instanceof st==0){var s={owner:this,name:e,config:t,factoryType:null,factory:null,instance:null,instanceRA_:null,existsRA_:null};t.handler&&this.addHandler(t.handler,s),t.instance&&(t.instance.addHandler(it,s),t.instance.setOwner=U),i||(this.satellite===nt&&(this.satellite={}),i=this.satellite[j]={}),i[e]=s,rt.call(s,this),!s.instance&&r&&this.emit_satelliteChanged(e,r),f&&(delete f.destroy,f.destroy());return}if(t.owner!==this){if(s&&s.config.delegate){var c=t.autoDelegate;t.autoDelegate=!1,t.setOwner(this),t.autoDelegate=c}else t.setOwner(this);if(t.owner!==this){this.setSatellite(e,null);return}u&&t.addHandler(u,this),a&&t.addHandler(a,this)}else t.ownerSatelliteName&&(delete this.satellite[t.ownerSatelliteName],this.emit_satelliteChanged(t.ownerSatelliteName,t));this.satellite==nt&&(this.satellite={}),this.satellite[e]=t;var l=t.ownerSatelliteName;l!=e&&(t.ownerSatelliteName=e,t.emit_ownerSatelliteNameChanged(l))}this.emit_satelliteChanged(e,r),f&&(delete f.destroy,f.destroy())}},getChildNodesDataset:function(){return I[this.basisObjectId]||new gt({sourceNode:this})},getSatellitesDataset:function(){return q[this.basisObjectId]||new yt({sourceNode:this})},destroy:function(){C.prototype.destroy.call(this),this.dataSource||this.dataSourceRA_?this.setDataSource():this.firstChild&&this.clear(),this.parentNode&&this.parentNode.removeChild(this),this.grouping&&(this.grouping.setOwner(),this.grouping=null),this.owner&&this.setOwner();var e=this.satellite;if(e!==nt){var t=e[j];delete e[j];for(var n in t)t[n].config.instance&&!t[n].instance&&t[n].config.instance.destroy(),t[n].existsRA_&&E(t[n],null,null,"existsRA_"),t[n].instanceRA_&&E(t[n],null,null,"instanceRA_");for(var n in e){var r=e[n];r.owner=null,r.ownerSatelliteName=null,r.destroy===z&&delete r.destroy,r.destroy()}this.satellite=null}this.childNodes=null}}),ot=x(st),ut=l(st,{className:f+".PartitionNode",autoDestroyIfEmpty:!1,nodes:null,first:null,last:null,init:function(){this.nodes=[],st.prototype.init.call(this)},insert:function(e,t){var n=this.nodes,r=t?n.indexOf(t):-1;r==-1?(n.push(e),this.last=e):n.splice(r,0,e),this.first=n[0],e.groupNode=this,this.emit_childNodesModified({inserted:[e]})},remove:function(e){var t=this.nodes;p(t,e)&&(this.first=t[0]||null,this.last=t[t.length-1]||null,e.groupNode=null,this.emit_childNodesModified({deleted:[e]})),!this.first&&this.autoDestroyIfEmpty&&this.destroy()},clear:function(){if(!this.first)return;var e=this.nodes;for(var t=e.length;t-->0;)e[t].groupNode=null;this.nodes=[],this.first=null,this.last=null,this.emit_childNodesModified({deleted:e}),this.autoDestroyIfEmpty&&this.destroy()},destroy:function(){st.prototype.destroy.call(this),this.nodes=null,this.first=null,this.last=null}}),at={itemsChanged:function(e,t){var n={},r=[];if(t.deleted){n.deleted=r;if(this.childNodes.length==t.deleted.length){r=h(this.childNodes);for(var i=0,s;s=r[i];i++)X(s);this.dataSourceMap_=null,this.clear(!0),this.dataSourceMap_={}}else for(var i=0,o;o=t.deleted[i];i++){var u=o.basisObjectId,a=this.dataSourceMap_[u];X(a),delete this.dataSourceMap_[u],this.removeChild(a),r.push(a)}}if(t.inserted){n.inserted=[];for(var i=0,o;o=t.inserted[i];i++){var f=ct(this,{delegate:o});W(f),this.dataSourceMap_[o.basisObjectId]=f,n.inserted.push(f),this.firstChild&&this.insertBefore(f)}}this.firstChild?this.emit_childNodesModified(n):this.setChildNodes(n.inserted);if(this.destroyDataSourceMember&&r.length)for(var i=0,o;o=r[i];i++)o.destroy()},stateChanged:function(e){this.setChildNodesState(e.state,e.state.data)},destroy:function(){this.dataSourceRA_||this.setDataSource()}},ht={childClass:st,childFactory:null,listen:{dataSource:at},getChild:function(e,t){return n.array.search(this.childNodes,e,t)},getChildByName:function(e){return this.getChild(e,"name")},appendChild:function(e){return this.insertBefore(e)},insertBefore:function(e,t){if(!this.childClass)throw B;if(e.firstChild){var n=this;while(n=n.parentNode)if(n===e)throw A}var r=e&&e instanceof this.childClass;if(this.dataSource){if(!r||!e.delegate||this.dataSourceMap_[e.delegate.basisObjectId]!==e)throw D}else if(this.dataSourceRA_)throw P;r||(e=ct(this,e instanceof C?{delegate:e}:e));if(e.owner)throw H;var i=e.parentNode===this,s=this.childNodes,o=this.grouping,u,a=e.groupNode,f=null,l=this.sorting,c,h=!1,d,v=-1,g,y;i&&(g=e.nextSibling,y=e.previousSibling);if(l!==m){t=null,c=this.sortingDesc,d=l(e);if(d==null)d=-Infinity;else if(typeof d!="number"||d!==d)d=String(d);i&&(d===e.sortingValue?h=!0:(c?h=(!g||typeof g.sortingValue<=typeof d&&g.sortingValue<=d)&&(!y||typeof y.sortingValue>=typeof d&&y.sortingValue>=d):h=(!g||typeof g.sortingValue>=typeof d&&g.sortingValue>=d)&&(!y||typeof y.sortingValue<=typeof d&&y.sortingValue<=d),h&&(e.sortingValue=d)))}if(o){var n;f=o.getGroupNode(e,!0),u=f.nodes;if(a===f)if(h||l===m&&g===t)return e;l!==m?a===f&&h?g&&g.groupNode===f?v=u.indexOf(g):v=u.length:(v=Q(u,d,V,c),e.sortingValue=d):t&&t.groupNode===f?v=u.indexOf(t):v=u.length;if(v<u.length)t=u[v];else if(f.last)t=f.last.nextSibling;else{n=f,t=null;while(n=n.nextSibling)if(t=n.first)break}if(e===t||i&&g===t)return a!==f&&(a&&a.remove(e),f.insert(e,t)),e;v=-1}else if(l!==m){if(h)return e;v=Q(s,d,V,c,this.lll),t=s[v],e.sortingValue=d;if(e===t||i&&g===t)return e}else{if(t&&t.parentNode!==this)throw O;if(i){if(g===t)return e;if(e===t)throw A}}if(i){g?(g.previousSibling=y,e.nextSibling=null):this.lastChild=y,y?(y.nextSibling=g,e.previousSibling=null):this.firstChild=g;if(v==-1)p(s,e);else{var b=s.indexOf(e);s.splice(b,1),v-=b<v}a&&(a.remove(e),a=null)}else e.parentNode&&e.parentNode.removeChild(e);a!=f&&f.insert(e,t);if(t){v==-1&&(v=s.indexOf(t));if(v==-1)throw O;e.nextSibling=t,s.splice(v,0,e)}else v=s.length,s.push(e),t={previousSibling:this.lastChild},this.lastChild=e;return e.parentNode=this,e.previousSibling=t.previousSibling,v==0?this.firstChild=e:t.previousSibling.nextSibling=e,t.previousSibling=e,i||(G(e,e.contextSelection,this.selection||this.contextSelection,!0),Y(e,this.disabled||this.contextDisabled),(e.underMatch_||this.matchFunction)&&e.match&&e.match(this.matchFunction),(e.autoDelegate==F.PARENT||e.autoDelegate===F.ANY)&&e.setDelegate(this),e.emit_parentChanged(null),this.dataSource||this.emit_childNodesModified({inserted:[e]}),e.listen.parentNode&&this.addHandler(e.listen.parentNode,e)),e},removeChild:function(e){if(!e||e.parentNode!==this)throw O;if(e instanceof this.childClass==0)throw M;if(this.dataSource){if(!e.delegate||this.dataSourceMap_[e.delegate.basisObjectId])throw D}else if(this.dataSourceRA_)throw P;var t=this.childNodes.indexOf(e);if(t==-1)throw O;return this.childNodes.splice(t,1),e.parentNode=null,e.nextSibling?e.nextSibling.previousSibling=e.previousSibling:this.lastChild=e.previousSibling,e.previousSibling?e.previousSibling.nextSibling=e.nextSibling:this.firstChild=e.nextSibling,e.nextSibling=null,e.previousSibling=null,e.listen.parentNode&&this.removeHandler(e.listen.parentNode,e),G(e,e.contextSelection,null,!0),e.groupNode&&e.groupNode.remove(e),e.emit_parentChanged(this),this.dataSource||this.emit_childNodesModified({deleted:[e]}),(e.autoDelegate==F.PARENT||e.autoDelegate===F.ANY)&&e.setDelegate(),e},replaceChild:function(e,t){if(this.dataSource)throw D;if(this.dataSourceRA_)throw P;if(t==null||t.parentNode!==this)throw O;return this.insertBefore(e,t),this.removeChild(t)},clear:function(e){if(this.dataSource&&this.dataSourceMap_&&this.dataSource.itemCount)throw D;if(!this.firstChild)return;e&&G(this,this.selection||this.contextSelection,null,!1,!0);var t=this.childNodes;this.firstChild=null,this.lastChild=null,this.childNodes=[],this.emit_childNodesModified({deleted:t});for(var n=t.length;n-->0;){var r=t[n];r.listen.parentNode&&r.parentNode.removeHandler(r.listen.parentNode,r),r.parentNode=null,r.groupNode=null,e?(r.nextSibling=null,r.previousSibling=null,r.emit_parentChanged(this),(r.autoDelegate==F.PARENT||r.autoDelegate===F.ANY)&&r.setDelegate()):r.destroy()}if(this.grouping)for(var t=this.grouping.childNodes,n=t.length-1,i;i=t[n];n--)i.clear()},setChildNodes:function(e,t){!this.dataSource&&!this.dataSourceRA_&&this.clear(t);if(e){"length"in e==0&&(e=[e]);if(e.length){var n=this.emit_childNodesModified;this.emit_childNodesModified=d;for(var r=0,i=e.length;r<i;r++)this.insertBefore(e[r]);this.emit_childNodesModified=n,this.emit_childNodesModified({inserted:this.childNodes})}}},setDataSource:function(e){if(!this.childClass)throw B;e=S(this,this.setDataSource,e,"dataSourceRA_");if(this.dataSource!==e){var t=this.dataSource,n=this.dataSourceMap_||{},r=this.listen.dataSource,i,s;t?(r&&t.removeHandler(r,this),e?(i=e.getItems().filter(function(e){return!t.has(e)}),s=t.getItems().filter(function(t){return!e.has(t)})):s=t.getItems()):e&&(i=e.getItems());if(!t||!e){if(this.firstChild){if(t)for(var o=0,u;u=this.childNodes[o];o++)X(u);this.dataSource=null,this.clear(t&&!this.destroyDataSourceMember)}}else t&&s.length&&r&&r.itemsChanged.call(this,t,{deleted:s});this.dataSource=e,e?(this.dataSourceMap_=n,this.setChildNodesState(e.state,e.state.data),r&&(e.addHandler(r,this),i.length&&r.itemsChanged.call(this,e,{inserted:i}))):(this.dataSourceMap_=null,this.setChildNodesState(N.UNDEFINED)),this.emit_dataSourceChanged(t)}},setGrouping:function(e,t){if(typeof e=="function"||typeof e=="string")e={rule:e};e instanceof dt==0&&(e=e&&typeof e=="object"?new this.groupingClass(e):null);if(this.grouping!==e){var n=this.grouping,r;if(n){this.grouping=null;if(!e&&this.firstChild){this.sorting!==m?r=K(this):r=this.childNodes,n.nullGroup.clear();var i=n.childNodes.slice(0);for(var s=0;s<i.length;s++)i[s].clear();ft(this,r)}n.setOwner()}if(e){this.grouping=e,e.setOwner(this);if(this.firstChild){this.sorting!==m?r=K(this):r=this.childNodes;for(var s=0,o;o=r[s];s++)o.groupNode=this.grouping.getGroupNode(o,!0);r=lt(this,r),ft(this,r)}}this.emit_groupingChanged(n),n&&!t&&n.destroy()}},setSorting:function(e,t){e=v(e),t=!!t;if(this.sorting!==e||this.sortingDesc!=!!t){var n=this.sorting,r=this.sortingDesc;this.sorting=e,this.sortingDesc=!!t;if(e!==m&&this.firstChild){var i=[],s;for(var o=this.firstChild;o;o=o.nextSibling){var u=e(o);if(u==null)u=-Infinity;else if(typeof u!="number"||u!==u)u=String(u);o.sortingValue=u}if(this.grouping){var a=[this.grouping.nullGroup].concat(this.grouping.childNodes);for(var f=0,l;l=a[f];f++)s=l.nodes=K({childNodes:l.nodes,sortingDesc:this.sortingDesc}),l.first=s[0]||null,l.last=s[s.length-1]||null,i.push.apply(i,s)}else i=K(this);ft(this,i)}this.emit_sortingChanged(n,r)}},setMatchFunction:function(e){if(this.matchFunction!=e){var t=this.matchFunction;this.matchFunction=e;for(var n=this.lastChild;n;n=n.previousSibling)n.match(e);this.emit_matchFunctionChanged(t)}}},pt=l(st,ht,{className:f+".Node",propertyDescriptors:{disabled:"disable enable",contextDisabled:!1,selected:"select unselect",contextSelection:!1,selection:"selectionChanged",matched:"match unmatch",matchFunction:"matchFunctionChanged"},emit_satelliteChanged:function(e,t){st.prototype.emit_satelliteChanged.call(this,e,t),this.satellite[e]instanceof pt&&Y(this.satellite[e],this.disabled||this.contextDisabled)},contextDisabled:!1,disabled:!1,disabledRA_:null,emit_enable:y("enable")&&function(){for(var e=this.firstChild;e;e=e.nextSibling)Y(e,!1);b.enable.call(this)},emit_disable:y("disable")&&function(){for(var e=this.firstChild;e;e=e.nextSibling)Y(e,!0);b.disable.call(this)},selection:null,emit_selectionChanged:y("selectionChanged","oldSelection"),contextSelection:null,selected:!1,selectedRA_:null,emit_select:y("select"),emit_unselect:y("unselect"),matched:!0,emit_match:y("match"),emit_unmatch:y("unmatch"),matchFunction:null,emit_matchFunctionChanged:y("matchFunctionChanged","oldMatchFunction"),listen:{owner:{enable:function(){Y(this,!1)},disable:function(){Y(this,!0)}},selection:{destroy:function(){this.setSelection()}}},init:function(){var e=this.disabled;this.disabled=!1;var t=this.selection;t&&(this.selection=null,this.setSelection(t,!0)),st.prototype.init.call(this);if(e){e=!!E(this,this.setDisabled,e,"disabledRA_");if(e){this.disabled=e;for(var n=this.firstChild;n;n=n.nextSibling)Y(n,!0)}}this.selected&&(this.selected=!!E(this,this.setSelected,this.selected,"selectedRA_"))},setSelection:function(e,t){var n=this.selection;e instanceof bt==0&&(e=e?new bt(e):null);if(n!==e)return G(this,n||this.contextSelection,e||this.contextSelection,!1,!0),this.listen.selection&&(n&&n.removeHandler(this.listen.selection,this),e&&e.addHandler(this.listen.selection,this)),this.selection=e,t||this.emit_selectionChanged(n),!0},setSelected:function(e,t){var n=this.contextSelection;return e=!!E(this,this.setSelected,e,"selectedRA_"),this.selected&&n&&(this.selectedRA_?n.has(this)&&(this.selected=!1,n.remove(this),this.selected=!0):n.has(this)||n.add(this)),e!==this.selected?(this.selectedRA_?(this.selected=e,e?this.emit_select():this.emit_unselect()):e?n?t?n.add(this):n.set(this):(this.selected=!0,this.emit_select()):n?n.remove(this):(this.selected=!1,this.emit_unselect()),!0):(!this.selectedRA_&&e&&n&&(t?n.remove(this):n.set(this)),!1)},select:function(e){return this.selectedRA_?!1:this.setSelected(!0,e)},unselect:function(){return this.selectedRA_?!1:this.setSelected(!1)},setDisabled:function(e){return e=!!E(this,this.setDisabled,e,"disabledRA_"),this.disabled!==e?(this.disabled=e,this.contextDisabled||(e?this.emit_disable():this.emit_enable()),!0):!1},disable:function(){return this.disabledRA_?!1:this.setDisabled(!0)},enable:function(){return this.disabledRA_?!1:this.setDisabled(!1)},isDisabled:function(){return this.disabled||this.contextDisabled},match:function(e){typeof e!="function"&&(e=null),this.underMatch_&&!e&&this.underMatch_(this,!0),this.underMatch_=e;var t=!e||e(this);this.matched!=t&&(this.matched=t,t?this.emit_match():this.emit_unmatch())},destroy:function(){this.disabledRA_&&E(this,null,null,"disabledRA_"),this.selectedRA_&&E(this,null,null,"selectedRA_"),this.contextSelection=null,this.selection&&this.setSelection(),st.prototype.destroy.call(this)}}),dt=l(st,ht,{className:f+".GroupingNode",emit_childNodesModified:function(e){b.childNodesModified.call(this,e);var t;if(t=e.inserted){for(var n=0,r;r=t[n++];)r.groupId_=r.delegate?r.delegate.basisObjectId:r.data.id,this.map_[r.groupId_]=r;if(this.dataSource&&this.nullGroup.first){var i=this.owner,s=h(this.nullGroup.nodes);for(var n=s.length;n-->0;)i.insertBefore(s[n],s[n].nextSibling)}}},emit_ownerChanged:function(e){e&&e.grouping===this&&e.setGrouping(null,!0),this.owner&&this.owner.grouping!==this&&this.owner.setGrouping(this),b.ownerChanged.call(this,e),!this.owner&&this.autoDestroyWithNoOwner&&this.destroy()},map_:null,nullGroup:null,autoDestroyWithNoOwner:!0,autoDestroyEmptyGroups:!0,rule:m,childClass:ut,childFactory:function(e){return new this.childClass(c({autoDestroyIfEmpty:this.dataSource?!1:this.autoDestroyEmptyGroups},e))},init:function(){this.map_={},this.nullGroup=new ut,st.prototype.init.call(this)},getGroupNode:function(e,t){var n=this.rule(e),r=n instanceof C,i=this.map_[r?n.basisObjectId:n];return this.dataSource&&(t=!1),!i&&t&&(i=this.appendChild(r?n:{data:{id:n,title:n}})),i||this.nullGroup},setDataSource:function(e){var t=this.dataSource;ht.setDataSource.call(this,e);var n=this.owner;if(n&&this.dataSource!==t){var r=h(n.childNodes);for(var i=r.length-1;i>=0;i--)n.insertBefore(r[i],r[i+1])}},insertBefore:function(e,t){e=ht.insertBefore.call(this,e,t);var n=e.first;if(n){var r=n.parentNode,i=e.last,s,o,u,a=null,f=e;while(f=f.nextSibling)if(a=f.first)break;u=a?a.previousSibling:r.lastChild,s=n.previousSibling,o=i.nextSibling;if(o!==a){var l=r.childNodes,c=e.nodes,h=c.length;s&&(s.nextSibling=o),o&&(o.previousSibling=s),u&&(u.nextSibling=n),a&&(a.previousSibling=i),n.previousSibling=u,i.nextSibling=a;var p=l.indexOf(n),d=a?l.indexOf(a):l.length;d>p&&(d-=h),l.splice(p,h),l.splice.apply(l,[d,0].concat(c));if(!u||!s)r.firstChild=l[0];if(!a||!o)r.lastChild=l[l.length-1];if(n instanceof ut)for(var v=h,m=a;v-->0;)r.insertBefore(c[v],m),m=c[v]}}return e},removeChild:function(e){if(e=ht.removeChild.call(this,e)){delete this.map_[e.groupId_];for(var t=0,n;n=e.nodes[t];t++)n.parentNode.insertBefore(n)}return e},clear:function(e){var t=[],n=this.getGroupNode,r=this.nullGroup;this.getGroupNode=function(){return r};for(var i=this.firstChild;i;i=i.nextSibling)t.push.apply(t,i.nodes);for(var s=0,o;o=t[s];s++)o.parentNode.insertBefore(o);this.getGroupNode=n,ht.clear.call(this,e),this.map_={}},destroy:function(){this.autoDestroyWithNoOwner=!1,st.prototype.destroy.call(this),this.nullGroup.destroy(),this.nullGroup=null,this.map_=null}});st.prototype.groupingClass=dt;var vt={childNodesModified:function(e,t){var n=this.members_,r={},i,s=0,o=0,u=t.inserted,a=t.deleted;if(u&&u.length){r.inserted=u;while(i=u[s])n[i.basisObjectId]=i,s++}if(a&&a.length){r.deleted=a;while(i=a[o])delete n[i.basisObjectId],o++}(s||o)&&this.emit_itemsChanged(r)},destroy:function(){this.destroy()}},mt={satelliteChanged:function(e,t,n){var r={};e.satellite[t]&&(r.inserted=[e.satellite[t]]),n&&(r.deleted=[n]),this.emit_itemsChanged(r)},destroy:function(){this.destroy()}},gt=l(k,{className:f+".ChildNodesDataset",sourceNode:null,init:function(){k.prototype.init.call(this);var e=this.sourceNode;I[e.basisObjectId]=this,e.firstChild&&vt.childNodesModified.call(this,e,{inserted:e.childNodes}),e.addHandler(vt,this)},destroy:function(){this.sourceNode.removeHandler(vt,this),delete I[this.sourceNode.basisObjectId],k.prototype.destroy.call(this)}}),yt=n.Class(k,{className:".SatellitesDataset",sourceNode:null,init:function(){k.prototype.init.call(this);var e=this.sourceNode;q[e.basisObjectId]=this;var t=[];for(var n in e.satellite)if(e.satellite.hasOwnProperty(n)){var r=e.satellite[n];r instanceof st&&t.push(r)}t.length&&this.emit_itemsChanged({inserted:t}),e.addHandler(mt,this)},destroy:function(){this.sourceNode.removeHandler(mt,this),delete q[this.sourceNode.basisObjectId],k.prototype.destroy.call(this)}}),bt=l(L,{className:f+".Selection",multiple:!1,emit_itemsChanged:function(e){var t;L.prototype.emit_itemsChanged.call(this,e);if(t=e.deleted)for(var n=0,r;r=t[n];n++)r.selected&&r.contextSelection===this&&(r.selected=!1,r.emit_unselect());if(t=e.inserted)for(var n=0,r;r=t[n];n++)!r.selected&&r.contextSelection===this&&(r.selected=!0,r.emit_select())},add:function(e){if(!e)return;if(!this.multiple&&this.itemCount)return this.set(e);Array.isArray(e)||(e=[e]),e=e.filter(this.filter,this),!this.multiple&&e.length>1&&(e=[e[0]]);if(e.length)return L.prototype.add.call(this,e)},set:function(e){return e?(Array.isArray(e)||(e=[e]),e=e.filter(this.filter,this),!this.multiple&&e.length>1&&(e=[e[0]]),e.length?L.prototype.set.call(this,e):this.clear()):this.clear()},filter:function(e){return e instanceof pt&&!e.selectedRA_&&e.contextSelection===this}});t.exports={DELEGATE:F,AbstractNode:st,Node:pt,GroupingNode:dt,PartitionNode:ut,ChildNodesDataset:gt,SatellitesDataset:yt,Selection:bt,nullSelection:new k}},"17.js":function(e,t,n,r,i,s,o,u,a){function v(e){l.all.setAndDestroyRemoved(n.array(e).map(l.reader))}var f=n.require("./2.js").Value,l=n.require("./18.js").Endpoint,c=n.require("./18.js").Publisher,h=new f({value:!1}),p=new f,d=io.connect(location.host,{transports:["websocket","polling"]});d.on("connect",function(){d.emit("rempl:host connect",function(e){v(e.endpoints),p.set(e.exclusivePublisher||null),h.set(!0)})}).on("rempl:endpointList",v).on("disconnect",function(){h.set(!1)}),t.exports={online:h,exclusivePublisher:p,getPublisherUI:function(e,t){var n=c(e);d.emit("rempl:get publisher ui",n.data.endpointId,n.data.name,t)},pickPublisher:function(e){d.emit("rempl:pick publisher",e)},cancelPublisherPick:function(){d.emit("rempl:cancel publisher pick")}}},"18.js":function(e,t,n,r,i,s,o,u,a){t.exports={Publisher:n.require("./19.js"),Endpoint:n.require("./1t.js")},n.require("./k.js").validate()},"19.js":function(e,t,n,r,i,s,o,u,a){var f=n.require("./k.js"),l=f.createType("Publisher",{id:f.StringId,endpointId:f.calc("id",function(e){return e.split(/\//)[0]}),name:f.calc("id",function(e){return e.split(/\//)[1]})});t.exports=l},"k.js":function(e,t,n,r,i,s,o,u,a){function W(e){return z[e]=z[e]||0,e+z[e]++}function $(){var e=v(arguments),t=e.pop(),n=e[0],r=e[1],i=e[2],s;if(typeof t!="function")throw"Last argument for calculate field constructor must be a function";switch(e.length){case 0:s=function(){return t()};break;case 1:s=function(e,r,i){return n in e?t(r[n]):i};break;case 2:s=function(e,i,s){return n in e||r in e?t(i[n],i[r]):s};break;case 3:s=function(e,s,o){return n in e||r in e||i in e?t(s[n],s[r],s[i]):o};break;default:s=function(n,r,i){var s=!1,o=[];for(var u=0,a;a=e[u];u++)s=s||a in n,o.push(r[a]);return s?t.apply(null,o):i}}return s.args=e,s.calc=s,s}function J(e){return arguments.length==1?function(t,n,r){return e in t?n[e]!=null?String(n[e]):null:r}:$.apply(null,v(arguments).concat(function(){for(var e=arguments.length-1;e>=0;e--)if(arguments[e]==null)return null;return Array.prototype.join.call(arguments,"-")}))}function K(e,t){var n={},r;e&&e.length&&(r=n.inserted=e),t&&t.length&&(r=n.deleted=t);if(r)return n}function Q(e){var t=n.object.slice(this.items_),r={},i=[],s=[],o=[],u,a;e=v(e),k(!0);for(var f=0,l;l=e[f];f++)a=this.wrapper(l),a&&(t[a.basisObjectId]?t[a.basisObjectId]=null:r[a.basisObjectId]=a);k(!1);for(var c in r)this.items_[c]?i.push(r[c]):s.push(r[c]);for(var c in t)t[c]&&o.push(t[c]);if(u=K(s,o)){if(this instanceof nt){var h=this.listen.item;if(h){if(u.inserted)for(var f=0,l;l=u.inserted[f];f++)l.addHandler(h,this);if(u.deleted)for(var f=0,l;l=u.deleted[f];f++)l.removeHandler(h,this)}}this.emit_itemsChanged(u)}if(o.length){k(!0);for(var f=0,l;l=o[f];f++)l.destroy();k(!1)}return s=s.concat(i),s.length?s:null}function ct(e,t,n){var r=["has"],i=[c],s=[];for(var o in e)if(c.call(e,o)){var u='"'+o.replace(/"/g,'"')+'"';if(c.call(n,o)){s.push(u+":"+"undefined");continue}var a="v"+s.length,f="f"+s.length,l=e[o];r.push(a,f),i.push(l,t[o]);var h="has.call(data,"+u+")"+"?"+"data["+u+"]"+":"+a+(typeof l=="function"?"(data)":""),p=l!==undefined&&typeof l!="function"?","+a:"";s.push(u+":"+f+"("+h+p+")")}var d=s.sort().join(","),v=ft[d];return v||(v=ft[d]=new Function(r,"return function(data){return {"+d+"};"+"};")),v.apply(null,i)}function ht(e,t,r){typeof r=="string"||Array.isArray(r)||typeof r=="function"&&r.calc!==r?r={type:r}:r=r?n.object.slice(r):{};if("type"in r){typeof r.type=="string"&&(r.type=O(r.type,e.fields,t));if(Array.isArray(r.type)){var i=r.type.slice();r.type=H(i),i.indexOf(r.defValue)==-1&&(r.defValue=r.type.DEFAULT_VALUE)}r.type===Array&&(r.type=D,r.defValue=null),r.type===Date&&(r.type=P,r.defValue=null),typeof r.type!="function"&&(r.type=null)}var s=r.type||d;if(r.id||r.index||[I,q,R,U].indexOf(s)!=-1)e.idFields[t]=r;r.calc?(dt(e,t,r.calc),e.fields[t]=lt):(e.fields[t]=s,e.aliases[t]=t),!("defValue"in r)&&typeof r.type=="function"&&"DEFAULT_VALUE"in r.type&&(r.defValue=r.type.DEFAULT_VALUE),"defValue"in r?e.defaults[t]=r.defValue:"DEFAULT_VALUE"in s?e.defaults[t]=s.DEFAULT_VALUE:e.defaults[t]=s(),at[t]||(at[t]={destroy:function(){this.set(t,null)}})}function pt(e,t,n){if(n in e.fields==0)return;if(n in e.calcMap)return;if(t in e.aliases)return;e.aliases[t]=n}function dt(e,t,r){var i=e.calcs,s=e.deps,o=r.args||[],u={args:o,wrapper:r},a=e.calcs.length,f=0;if(o)for(var l=0,c;c=i[l];l++)o.indexOf(c.key)!=-1&&(f=l+1);if(t){u.key=t,e.calcMap[t]=u;for(var l=0,c;c=i[l];l++)if(c.args.indexOf(t)!=-1){a=l;break}if(f>a)return;s[t]=o.reduce(function(e,t){var r=s[t]||[t];for(var i=0;i<r.length;i++)n.array.add(e,r[i]);return e},[]);for(var h in s){var p=s[h].indexOf(t);p!=-1&&Array.prototype.splice.apply(s[h],[p,1].concat(s[t]))}}else a=f;i.splice(Math.min(a,f),0,u)}function vt(e){return function(t){return t&&this.modified&&e in this.modified?this.modified[e]:this.data[e]}}function mt(e){return function(t,n){return this.set(e,t,n)}}function wt(e){return e&&e instanceof yt}function Et(e,t){var r=e||{};return typeof e=="string"?r={name:r,fields:t||{}}:t&&(r=n.object.merge(r,{fields:t})),new ut(r)}function St(e,t,r){switch(arguments.length){case 0:case 1:e&&e.constructor===Object?(r=n.object.slice(e),t=n.object.splice(r).type,e=n.object.splice(r).name):(t=e,e=undefined);break;case 2:t&&t.constructor===Object&&(r=t,t=e,e=undefined)}return new st(t,e,r)}var f="basis.entity",l=n.Class,c=Object.prototype.hasOwnProperty,h=n.object.keys,p=n.object.extend,d=n.fn.$self,v=n.array.from,m=n.require("./6.js"),g=m.Emitter,y=m.create,b=n.require("./2.js"),w=b.Object,E=b.Slot,S=b.Dataset,x=b.ReadOnlyDataset,T=n.require("./l.js"),N=T.Filter,C=T.Split,k=S.setAccumulateState,L=n.require("./m.js"),A=L.defineType,O=L.getTypeByName,M=L.getTypeByNameIfDefined,_=L.validate,D=L.array.nullable,P=L.date.nullable,H=L["enum"],B={},j=[],F={string:!0,number:!0},I=function(e){return e==null||isNaN(e)?null:Number(e)},q=function(e){return e==null||isNaN(e)?null:Number(e)},R=function(e){return e==null||isNaN(e)?null:parseInt(e,10)},U=function(e){return e==null?null:String(e)},z={},X={},V=l(null,{className:f+".Index",items:null,init:function(){this.items={}},get:function(e,t){var n=c.call(this.items,e)&&this.items[e];if(n&&(!t||n.entityType===t))return n},add:function(e,t){if(t){var n=this.get(e);if(!n)return this.items[e]=t,!0;if(n!==t)throw"basis.entity: Value `"+e+"` for index is already occupied"}},remove:function(e,t){if(this.items[e]===t)return delete this.items[e],!0},destroy:function(){this.items=null}}),G=function(e){return{name:null,wrapper:d,setAndDestroyRemoved:Q,destroy:function(){e.destroy.call(this),this.name=null,this.wrapper=null}}},Y="wrapped"+n.genUID(),Z=function(e,t){return function(n){n&&!Array.isArray(n)&&(n=[n]);var r=n&&!n[Y];if(r){if(this.localId){var i=this.getItems().slice();n=n.map(function(e){for(var t=0;t<i.length;t++)if(this.localId(e,i[t]))return this.wrapper(e,i[t]);return e=this.wrapper(e),i.push(e),e},this)}else n=n.map(this.wrapper);n[Y]=!0}var s=e.prototype[t].call(this,n);if(r){n[Y]=!1;if(this.localId&&s&&s.deleted){k(!0);for(var o=0,u;u=s.deleted[o];o++)u.root&&u.destroy();k(!1)}}return s}},et=function(e,t){return function(){this.name||(this.name=W(t)),e.prototype.init.call(this)}},tt=l(x,G,{className:f+".ReadOnlyEntitySet",init:et(x,"ReadOnlyEntitySet")}),nt=l(S,G,{className:f+".EntitySet",init:et(S,"EntitySet"),add:Z(S,"add"),remove:Z(S,"remove"),set:Z(S,"set"),setAndDestroyRemoved:function(e){return this.localId?this.set(e):this.itemCount?(this.localId&&(!e||!e.length)&&this.clear(),Q.call(this,e)):this.add(e)},clear:function(){var e=S.prototype.clear.call(this);if(this.localId&&e&&e.deleted){k(!0);for(var t=0,n;n=e.deleted[t];t++)n.destroy();k(!1)}return e}}),rt=l(N,G,{className:f+".EntityCollection",init:et(N,"EntityCollection")}),it=l(C,{className:f+".EntityGrouping",name:null,subsetClass:tt,init:et(C,"EntityGrouping"),getSubset:function(e,t){var n=C.prototype.getSubset.call(this,e,t);return n&&n.dataset&&(n.dataset.wrapper=this.wrapper),n}}),st=function(e,t,n){function r(e){if(typeof e=="string")return function(t,n){return t[e]==n.data[e]};if(typeof e=="function")return e}if(this instanceof st){e||(e=d);if(!t||M(t))t=W("UntitledEntitySetType");var i=new ot({entitySetClass:{wrapper:e,localId:r(n&&n.localId)}}),s=i.entitySetClass,o=function(e,t){return e!=null?(t instanceof nt==0&&(t=i.createEntitySet()),t.set(e instanceof S?e.getItems():v(e)),t):null};return typeof e=="string"&&(s.prototype.wrapper=O(e,s.prototype,"wrapper")),A(t,o),p(o,{type:i,typeName:t,toString:function(){return t+"()"},reader:function(e){if(Array.isArray(e)){var t=s.prototype.wrapper;return e.map(t.reader||t)}return e},extendClass:function(e){return s.extend.call(s,e),o},extendReader:function(e){var t=o.reader;return o.reader=function(n){return Array.isArray(n)&&e(n),t(n)},o},entitySetType:i,extend:function(){return s.extend.apply(s,arguments)}}),o}},ot=l(null,{className:f+".EntitySetConstructor",entitySetClass:nt,extendConstructor_:!0,createEntitySet:function(){return new this.entitySetClass}}),ut=function(e){if(this instanceof ut){var t;e.singleton?t=function(e){var t=n.get();return t?e&&t.update(e):t=new r(e||{}),t}:t=function(e,t){if(e!=null){if(!t||t.entityType!==n)t=null;if(e===t||e.entityType===n)return e;var i,s=n.idField;if(F[typeof e]){if(!s)return;if(t=n.index.get(e,n))return t;i=e,e={},e[s]=i}else n.compositeKey&&(i=n.compositeKey(e,e)),i!=null&&(t=n.index.get(i,n));return t&&t.entityType===n?t.update(e):t=new r(e),t}};var n=new gt(e||{},t),r=n.entityClass,i=n.name;return A(i,t),p(t,{all:n.all,type:n,typeName:i,toString:function(){return i+"()"},get:function(e){return n.get(e)},getSlot:function(e,t){return n.getSlot(e,t)},reader:function(e){return n.reader(e)},readList:function(e,n){if(!e)return[];Array.isArray(e)||(e=[e]),typeof n!="function"&&(n=d);for(var r=0;r<e.length;r++)e[r]=t(t.reader(n(e[r],r)));return e},extendClass:function(e){return r.extend.call(r,e),t},extendReader:function(e){var n=t.reader;return t.reader=function(t){return t&&typeof t=="object"&&e(t),n(t)},t},entityType:n,extend:function(){return r.extend.apply(r,arguments)}}),t}},at={},ft={},lt=function(e,t){return t},gt=l(null,{className:f+".EntityType",wrapper:null,all:null,fields:null,idField:null,idFields:null,compositeKey:null,idProperty:null,defaults:null,calcs:null,calcMap:null,aliases:null,slots:null,singleton:!1,index:null,indexes:null,entityClass:null,init:function(e,t){this.name=e.name;if(!this.name||M(this.name))this.name=W("UntitledEntityType");this.fields={},this.calcs=[],this.calcMap={},this.deps={},this.idFields={},this.defaults={},this.aliases={},this.slots={};var n=e.index;n&&n instanceof V&&(this.index=n),this.wrapper=t;if("all"in e==0||e.all||e.singleton)this.all=new tt(e.all),this.all.wrapper=t,this.all.set=function(e){return Array.isArray(e)&&(e=e.map(function(e){return e instanceof v==0?t.reader(e):e})),Q.call(this,e)}.bind(this.all);this.singleton=!!e.singleton;if(this.singleton){var r;this.get=function(){return r},this.all.addHandler({itemsChanged:function(e,t){r=t.inserted?t.inserted[0]:null}},this)}for(var i in e.fields)ht(this,i,e.fields[i]);for(var i in e.aliases)pt(this,i,e.aliases[i]);e.constrains&&e.constrains.forEach(function(e){dt(this,null,e)},this),this.calcs.length||(this.calcs=null);var s=h(this.idFields),o={};if(s.length){for(var u in this.idFields){var a=this.idFields[u],n=a.index,f;if(!n||n instanceof V==0)typeof n=="string"?(n in X==0&&(X[n]=new V),n=X[n]):(this.index||(this.index=new V),n=this.index);f=o[n.basisObjectId],f||(f=o[n.basisObjectId]={index:n,fields:[]}),f.fields.push(u),this.idFields[u]=f}this.index&&this.index.basisObjectId in o==0&&(this.index=null);for(var l in o){var f=o[l];f.property="__id__"+l,f.compositeKey=J.apply(null,f.fields),f.fields.length==1&&(f.idField=f.fields[0])}var c=h(o),p=o[this.index?this.index.basisObjectId:c[0]];this.index=p.index,this.idField=p.idField,this.compositeKey=p.compositeKey,this.idProperty=p.property,this.indexes=o}else this.index&&(this.index=null);var d={};for(var i in this.defaults)d[i]=undefined;var v=bt(this,this.all,this.fields,this.slots);this.entityClass=v,v.extend({entityType:this,type:t,typeName:this.name,generateData:ct(this.defaults,this.fields,this.calcMap),initDelta:d});for(var m in this.fields)v.prototype["get_"+m]=vt(m),this.fields[m]!==lt&&(v.prototype["set_"+m]=mt(m));j.push(this)},reader:function(e){var t={};if(F[typeof e])return this.idField?e:null;if(!e||e==null)return null;for(var n in e){var r=this.aliases[n];if(r){var i=this.fields[r].reader;t[r]=i?i(e[n]):e[n]}}return t},get:function(e){var t=this.getId(e);if(this.index&&t!=null)return this.index.get(t,this)},getId:function(e){if(this.compositeKey&&e!=null){if(F[typeof e])return e;if(e&&e.entityType===this)return e[this.idProperty];e instanceof w&&(e=e.data);if(this.compositeKey)return this.compositeKey(e,e)}},getSlot:function(e){var t=this.getId(e);if(t!=null){var n=c.call(this.slots,t)&&this.slots[t];if(!n){if(F[typeof e]){var r={};this.idField&&(r[this.idField]=e),e=r}n=this.slots[t]=new E({delegate:this.get(t)||null,data:e})}return n}}}),yt=l(w,{className:f+".BaseEntity",target:!0,setDelegate:function(){},extendConstructor_:!1,fieldHandlers_:null,propertyDescriptors:{modified:{nested:!0,events:"rollbackUpdate"}},modified:null,emit_rollbackUpdate:y("rollbackUpdate")}),bt=function(e,t,r,i){function s(t,n,r){var i=e.calcs,s=t.data,u=!1;try{if(i)for(var a=0,f;f=i[a];a++){var l=f.key,c=s[l],h=f.wrapper(n,s,c);l&&h!==c&&(n[l]=c,s[l]=h,u=!0)}for(var p in e.indexes){var d=e.indexes[p],v=t[d.property],m=v;d.compositeKey&&(m=d.compositeKey(n,s,v)),m!==v&&(o(d.index,t,v,m),t[d.property]=m)}return u}catch(g){for(var l in n)t.data[l]=n[l];r&&!t.modified&&(t.modified=r)}}function o(e,t,n,r){r!=null&&(e.add(r,t),c.call(i,r)&&i[r].setDelegate(t)),n!=null&&(e.remove(n,t),c.call(i,n)&&i[n].setDelegate())}return l(yt,{className:e.name,syncEvents:{update:!0,stateChanged:!0,subscribersChanged:!0},isSyncRequired:function(){return w.prototype.isSyncRequired.call(this)&&(!e.idProperty||this[e.idProperty]!=null)},init:function(e){this.delegate=null,this.data=this.generateData(e),yt.prototype.init.call(this);var n;for(var r in this.data)n=this.data[r],n&&n!==this&&n instanceof g&&(n.addHandler(at[r],this),this.fieldHandlers_||(this.fieldHandlers_={}),this.fieldHandlers_[r]=!0);s(this,this.initDelta),t&&t.emit_itemsChanged({inserted:[this]})},toString:function(){return"[object "+this.constructor.className+"("+this.entityType.name+")]"},getId:function(){return this[e.idProperty]},get:function(e,t){return t&&this.modified&&e in this.modified?this.modified[e]:this.data[e]},set:function(t,n,i,o){var u=r[t];if(!u)return!1;var a,f=this.modified;u===D&&f&&t in f&&(n=D(n,f[t]));var l=u(n,this.data[t]),c=this.data[t],p=l!==c&&(!l||!c||l.constructor!==Date||c.constructor!==Date||+l!==+c);if(p)e:{a={};if(!e.idFields[t])if(i)f||(this.modified=f={}),t in f==0?(a.rollback={key:t,value:undefined},f[t]=c):f[t]===l&&(a.rollback={key:t,value:l},delete f[t],h(f).length||(this.modified=null));else if(f&&t in f){if(f[t]!==l){a.rollback={key:t,value:f[t]},f[t]=l;break e}return!1}this.data[t]=l,this.fieldHandlers_&&this.fieldHandlers_[t]&&(c.removeHandler(at[t],this),this.fieldHandlers_[t]=!1),l&&l!==this&&l instanceof g&&(l.addHandler(at[t],this),this.fieldHandlers_||(this.fieldHandlers_={}),this.fieldHandlers_[t]=!0),a.key=t,a.value=c,a.delta={},a.delta[t]=c}else!i&&f&&t in f&&(a={rollback:{key:t,value:f[t]}},delete f[t],h(f).length||(this.modified=null));if(!o&&a){var d=a.key,v=a.delta||{},m;a.rollback&&(m={},m[a.rollback.key]=a.rollback.value),s(this,v,m)&&(d=!0),d&&(this.emit_update(v),a.delta=v),m&&this.emit_rollbackUpdate(m)}return a||!1},update:function(e,t){var n=!1,r={};if(e){var i,o;for(var u in e)if(o=this.set(u,e[u],t,!0))o.key&&(n=!0,r[o.key]=o.value),o.rollback&&(i||(i={}),i[o.rollback.key]=o.rollback.value);s(this,r,i)&&(n=!0),n&&this.emit_update(r),i&&this.emit_rollbackUpdate(i)}return n?r:!1},read:function(e){return this.update(this.type.reader(e))},generateData:function(){return{}},reset:function(){this.update(this.generateData({}))},clear:function(){var e={};for(var t in this.data)e[t]=undefined;return this.update(e)},commit:function(e){var t=this.modified;this.modified=null,e&&this.update(e),t&&this.emit_rollbackUpdate(t)},rollback:function(t){var r=this.modified;r&&t&&(Array.isArray(t)||(t=[t]),r=n.object.slice(r,t.reduce(function(t,n){return t.concat(e.deps[n]||n)},[]))),this.update(r,!0)},destroy:function(){if(this.fieldHandlers_){for(var n in this.fieldHandlers_)this.fieldHandlers_[n]&&this.data[n].removeHandler(at[n],this);this.fieldHandlers_=null}for(var n in e.indexes){var r=e.indexes[n],i=this[r.property];i!=null&&o(r.index,this,i,null)}t&&t.has(this)&&t.emit_itemsChanged({deleted:[this]}),w.prototype.destroy.call(this),this.data=B,this.modified=null}})};t.exports={isEntity:wt,createType:Et,createSetType:St,validate:_,getTypeByName:function(e){return M(e)},getIndexByName:function(e){return X[e]},is:function(e,t){var n;return typeof t=="string"&&(t=M(t)),n=t&&t.type&&t.type.entityClass,e&&n?e instanceof n:!1},get:function(e,t){var n=M(e);if(n)return n.get(t)},resolve:function(e,t){var n=M(e);if(n)return n(t)},getByIndex:function(e,t){if(e in X)return X[e].get(t)},NumericId:I,NumberId:q,IntId:R,StringId:U,Index:V,CalculateField:$,ConcatStringField:J,calc:$,arrayField:D,dateField:P,EntityType:ut,Entity:bt,BaseEntity:yt,EntitySetType:st,EntitySet:nt,ReadOnlyEntitySet:tt,Collection:rt,Grouping:it}},"l.js":function(e,t,n,r,i,s,o,u,a){t.exports={getDelta:n.require("./1a.js"),createRuleEvents:n.require("./1b.js"),SourceDataset:n.require("./1c.js"),Merge:n.require("./1d.js"),Subtract:n.require("./1e.js"),MapFilter:n.require("./1f.js"),Split:n.require("./1g.js"),Cloud:n.require("./1i.js"),Extract:n.require("./1j.js"),Filter:n.require("./1k.js"),Slice:n.require("./1l.js")}},"1.js":function(e,t,n,r,i,s,o,u,a){function v(e){l.title=e}function m(e){return typeof e=="string"?l.getElementById(e):e}function g(e,t){try{return e.parentNode.replaceChild(t,e),t}catch(n){return e}}function y(e,t){try{return e.appendChild(t)}catch(n){return e.appendChild(l.createComment(""))}}var f=n.require("./2.js").resolveValue,l=r.document||{title:"unknown"},c=l.title,h=n.fn.$undef,p,d,b=n.fn.lazyInit(function(e){var t=[],r=!1,i={inited:!1,setTitle:function(e){e!=c&&(c instanceof n.Token&&c.detach(v),e instanceof n.Token?(e.attach(v),v(e.get())):v(e),c=e)},setElement:function(e){e=f(i,i.setElement,e,"elementRA_"),e&&e.element&&(e=e.element);var t=m(e);if(d===t)return;if(d){d=g(d,t);return}p||(p={type:"append",node:l.body});var n=m(p.node);d=t;if(!n)return;p.type=="append"?d=y(n,d):d=g(n,d)},ready:function(e,n){r?e.call(n,i):t.push({fn:e,context:n})}};typeof e=="function"&&!n.fn.isFactory(e)?e={init:e}:e.constructor!==Object&&(e={element:e});for(var s in e){var o=e[s];switch(s){case"title":i.setTitle(o);break;case"container":p={type:"append",node:o};break;case"replace":p={type:"replace",node:o};break;case"element":d=o;break;case"init":h=typeof o=="function"?o:h;break;default:}}return n.doc.body.ready(function(){var e=d,n=h.call(i);n&&(e=n),d=null,i.setElement(e),r=!0,i.inited=!0;var s;while(s=t.shift())s.fn.call(s.context,i)}),i});t.exports={create:b}},"1b.js":function(e,t,n,r,i,s,o,u,a){var f=n.object.extend,l=n.require("./6.js").createHandler;t.exports=function(t,n){return function r(e){return e?e.__extend__?e:(typeof e!="string"&&!Array.isArray(e)&&(e=null),f(l(e,t),{__extend__:r})):null}(n)}},"1c.js":function(e,t,n,r,i,s,o,u,a){var f=n.require("./6.js").create,l=n.require("./2.js").resolveDataset,c=n.require("./2.js").ReadOnlyDataset,h=n.require("./2.js").Dataset.setAccumulateState,p=n.require("./4.js");p.addProperty("source"),t.exports=c.subclass({className:"basis.data.dataset.SourceDataset",propertyDescriptors:{source:"sourceChanged",subtrahend:"subtrahendChanged"},active:n.PROXY,subscribeTo:p.SOURCE,source:null,emit_sourceChanged:f("sourceChanged","oldSource"),sourceRA_:null,sourceMap_:null,listen:{source:{destroy:function(){this.sourceRA_||this.setSource()}}},init:function(){var e=this.source;this.source=null,this.sourceMap_={},c.prototype.init.call(this),e&&this.setSource(e)},setSource:function(e){e=l(this,this.setSource,e,"sourceRA_");if(this.source!==e){var t=this.source,n=this.listen.source,r=n&&n.itemsChanged;this.source=null,h(!0),t&&(n&&t.removeHandler(n,this),r&&r.call(this,t,{deleted:t.getItems()})),this.source=e,this.emit_sourceChanged(t),e&&(n&&e.addHandler(n,this),r&&r.call(this,e,{inserted:e.getItems()})),h(!1)}},destroy:function(){this.setSource(),c.prototype.destroy.call(this),this.sourceMap_=null}})},"1d.js":function(e,t,n,r,i,s,o,u,a){var f=n.array.add,l=n.array.remove,c=n.require("./6.js").create,h=n.require("./6.js").Emitter,p=n.require("./2.js").resolveDataset,d=n.require("./2.js").ReadOnlyDataset,v=n.require("./1a.js"),m=n.require("./4.js");m.add("SOURCES",{sourcesChanged:function(e,t){var n;if(n=t.inserted)for(var r=0,i;i=n[r];r++)m.link("source",e,i);if(n=t.deleted)for(var r=0,i;i=n[r];r++)m.unlink("source",e,i)}},function(e,t){var n=t.sources;for(var r=0,i;i=n[r++];)e("source",t,i)});var g=function(e){return e>0},y=function(e,t){return e==t},b=function(e){return e==1},w=function(e,t){return t==1||e>1},E=function(e,t){return t==1||e<t},S={itemsChanged:function(e,t){var n=this.members_,r={},i,s;if(t.inserted)for(var o=0;i=t.inserted[o];o++)s=i.basisObjectId,n[s]?n[s].count++:n[s]={count:1,isMember:!1,object:i},r[s]=n[s];if(t.deleted)for(var o=0;i=t.deleted[o];o++)s=i.basisObjectId,r[s]=n[s],n[s].count--;this.applyRule(r)}},x=d.subclass({className:"basis.data.dataset.Merge",propertyDescriptors:{rule:"ruleChanged"},active:n.PROXY,subscribeTo:m.SOURCES,emit_sourcesChanged:c("sourcesChanged","delta"),sources:null,sourceValues_:null,sourcesMap_:null,sourceDelta_:null,rule:g,emit_ruleChanged:c("ruleChanged","oldRule"),listen:{source:S,sourceValue:{destroy:function(e){this.removeSource(e)}}},init:function(){d.prototype.init.call(this);var e=this.sources;this.sources=[],this.sourcesMap_={},this.sourceValues_=[],e&&this.setSources(e)},setRule:function(e){e=n.getter(e||g);if(this.rule!==e){var t=this.rule;return this.rule=e,this.emit_ruleChanged(t),this.applyRule()}},applyRule:function(e){var t=this.members_,n=this.rule,r=this.sources.length,i=[],s=[],o,u,a;e||(e=t);for(var f in e)o=t[f],u=r&&o.count&&n(o.count,r),u!=o.isMember&&(u?(o.isMember=!0,i.push(o.object)):(o.isMember=!1,s.push(o.object))),o.count==0&&delete t[f];return(a=v(i,s))&&this.emit_itemsChanged(a),a},addDataset_:function(e){this.sources.push(e),this.listen.source&&e.addHandler(this.listen.source,this);var t=this.members_;for(var n in e.items_)t[n]?t[n].count++:t[n]={count:1,isMember:!1,object:e.items_[n]};return!0},removeDataset_:function(e){l(this.sources,e),this.listen.source&&e.removeHandler(this.listen.source,this);var t=this.members_;for(var n in e.items_)t[n].count--},updateDataset_:function(e){var t=this.owner,n=t.sourcesMap_,r=p(this,t.updateDataset_,e,"adapter",t),i,s,o;if(this.dataset===r)return;if(r){var u=(n[r.basisObjectId]||0)+1;n[r.basisObjectId]=u,u==1&&(t.addDataset_(r),i=[r])}if(this.dataset){var u=(n[this.dataset.basisObjectId]||0)-1;n[this.dataset.basisObjectId]=u,u==0&&(t.removeDataset_(this.dataset),s=[this.dataset])}this.dataset=r,t.applyRule();if(o=v(i,s)){var a=t.sourceDelta_;a?(o.inserted&&o.inserted.forEach(function(e){l(this.deleted,e)||f(this.inserted,e)},a),o.deleted&&o.deleted.forEach(function(e){l(this.inserted,e)||f(this.deleted,e)},a)):t.emit_sourcesChanged(o)}return o},getSourceValues:function(){return this.sourceValues_.map(function(e){return e.source})},addSource:function(e){if(!e||typeof e!="object"&&typeof e!="function")return;if(this.hasSource(e))return;var t={owner:this,source:e,adapter:null,dataset:null};this.sourceValues_.push(t),this.updateDataset_.call(t,e),this.listen.sourceValue&&e instanceof h&&e.addHandler(this.listen.sourceValue,this)},removeSource:function(e){for(var t=0,n;n=this.sourceValues_[t];t++)if(n.source===e){this.listen.sourceValue&&e instanceof h&&e.removeHandler(this.listen.sourceValue,this),this.updateDataset_.call(n,null),this.sourceValues_.splice(t,1);return}},hasSource:function(e){for(var t=0,n;n=this.sourceValues_[t];t++)if(n.source===e)return!0;return!1},setSources:function(e){var t=this.sourceValues_.map(function(e){return e.source}),n=[],r=[],i;e||(e=[]),this.sourceDelta_={inserted:n,deleted:r};for(var s=0;s<e.length;s++){var o=e[s];l(t,o)||this.addSource(o)}return t.forEach(this.removeSource,this),this.sourceDelta_=null,(i=v(n,r))&&this.emit_sourcesChanged(i),i},destroy:function(){this.setSources(),d.prototype.destroy.call(this),this.sourceValues_=null,this.sourcesMap_=null,this.sourceDelta_=null,this.sources=null}});x.UNION=g,x.INTERSECTION=y,x.DIFFERENCE=b,x.MORE_THAN_ONE_INCLUDE=w,x.AT_LEAST_ONE_EXCLUDE=E,t.exports=x},"1e.js":function(e,t,n,r,i,s,o,u,a){var f=n.require("./6.js").create,l=n.require("./2.js").resolveDataset,c=n.require("./2.js").ReadOnlyDataset,h=n.require("./1a.js"),p=n.require("./4.js"),d=n.require("./2.js").Dataset;p.addProperty("minuend"),p.addProperty("subtrahend");var v=function(e){return!this.has(e)},m={itemsChanged:function(e,t){if(!this.subtrahend)return;d.flushChanges(this);var n=h(t.inserted&&t.inserted.filter(v,this.subtrahend),t.deleted&&t.deleted.filter(this.has,this));n&&this.emit_itemsChanged(n)},destroy:function(){this.minuendRA_||this.setMinuend(null)}},g={itemsChanged:function(e,t){if(!this.minuend)return;d.flushChanges(this);var n=h(t.deleted&&t.deleted.filter(this.minuend.has,this.minuend),t.inserted&&t.inserted.filter(this.has,this));n&&this.emit_itemsChanged(n)},destroy:function(){this.subtrahendRA_||this.setSubtrahend(null)}};t.exports=c.subclass({className:"basis.data.dataset.Subtract",propertyDescriptors:{minuend:"minuendChanged",subtrahend:"subtrahendChanged"},active:n.PROXY,subscribeTo:p.MINUEND+p.SUBTRAHEND,minuend:null,minuendRA_:null,emit_minuendChanged:f("minuendChanged","oldMinuend"),subtrahend:null,subtrahendRA_:null,emit_subtrahendChanged:f("subtrahendChanged","oldSubtrahend"),listen:{minuend:m,subtrahend:g},init:function(){c.prototype.init.call(this);var e=this.minuend,t=this.subtrahend;this.minuend=null,this.subtrahend=null,(e||t)&&this.setOperands(e,t)},setOperands:function(e,t){var n,r=!1,i=this.minuend,s=this.subtrahend;e=l(this,this.setMinuend,e,"minuendRA_"),t=l(this,this.setSubtrahend,t,"subtrahendRA_");if(i!==e){r=!0,this.minuend=e;var o=this.listen.minuend;o&&(i&&i.removeHandler(o,this),e&&e.addHandler(o,this)),this.emit_minuendChanged(i)}if(s!==t){r=!0,this.subtrahend=t;var o=this.listen.subtrahend;o&&(s&&s.removeHandler(o,this),t&&t.addHandler(o,this)),this.emit_subtrahendChanged(s)}if(!r)return!1;if(!e||!t)this.itemCount&&this.emit_itemsChanged(n={deleted:this.getItems()});else{var u=[],a=[];for(var f in this.items_)(!e.items_[f]||t.items_[f])&&u.push(this.items_[f]);for(var f in e.items_)!this.items_[f]&&!t.items_[f]&&a.push(e.items_[f]);(n=h(a,u))&&this.emit_itemsChanged(n)}return n},setMinuend:function(e){return this.setOperands(e,this.subtrahendRA_?this.subtrahendRA_.source:this.subtrahend)},setSubtrahend:function(e){return this.setOperands(this.minuendRA_?this.minuendRA_.source:this.minuend,e)},destroy:function(){this.setOperands(),c.prototype.destroy.call(this)}})},"1f.js":function(e,t,n,r,i,s,o,u,a){var f=n.fn.$self,l=n.fn.$true,c=n.fn.$false,h=n.require("./6.js").create,p=n.require("./1b.js"),d=n.require("./1a.js"),v=n.require("./2.js").Object,m=n.require("./2.js").isEqual,g=n.require("./2.js").Dataset.setAccumulateState,y=n.require("./1c.js"),b=function(e){var t=this.map?this.map(e):e;if(t instanceof v==0||this.filter(t))t=null;var n=this.sourceMap_[e.basisObjectId],r=n.member;if(!m(r,t)){var i=this.members_,s,o,u;n.member=t;if(r){var a=r.basisObjectId;this.removeMemberRef&&this.removeMemberRef(r,e),--i[a]==0&&(delete i[a],u=[r])}if(t){var f=t.basisObjectId;this.addMemberRef&&this.addMemberRef(t,e),i[f]?i[f]++:(i[f]=1,o=[t])}(s=d(o,u))&&this.emit_itemsChanged(s)}},w={itemsChanged:function(e,t){var n=this.sourceMap_,r=this.members_,i=[],s=[],o,u,a,f=this.ruleEvents;g(!0);if(t.inserted)for(var l=0;o=t.inserted[l];l++){a=this.map?this.map(o):o;if(a instanceof v==0||this.filter(a))a=null;f&&o.addHandler(f,this),n[o.basisObjectId]={sourceObject:o,member:a};if(a){var c=a.basisObjectId;r[c]?r[c]++:(r[c]=1,i.push(a)),this.addMemberRef&&this.addMemberRef(a,o)}}if(t.deleted)for(var l=0;o=t.deleted[l];l++){u=o.basisObjectId,a=n[u].member,f&&o.removeHandler(f,this),delete n[u];if(a){var c=a.basisObjectId;--r[c]==0&&(delete r[c],s.push(a)),this.removeMemberRef&&this.removeMemberRef(a,o)}}g(!1),(t=d(i,s))&&this.emit_itemsChanged(t)}};t.exports=y.subclass({className:"basis.data.dataset.MapFilter",propertyDescriptors:{rule:"ruleChanged",addMemberRef:!1,removeMemberRef:!1,ruleEvents:!1},map:f,filter:c,rule:n.getter(l),emit_ruleChanged:h("ruleChanged","oldRule"),ruleEvents:p(b,"update"),addMemberRef:null,removeMemberRef:null,listen:{source:w},setMap:function(e){typeof e!="function"&&(e=f);if(this.map!==e)return this.map=e,this.applyRule()},setFilter:function(e){typeof e!="function"&&(e=c);if(this.filter!==e)return this.filter=e,this.applyRule()},setRule:function(e){e=n.getter(e||l);if(this.rule!==e){var t=this.rule;return this.rule=e,this.emit_ruleChanged(t),this.applyRule()}},applyRule:function(){var e=this.sourceMap_,t=this.members_,n,r,i,s,o,u,a=[],f=[],l;for(var c in e){u=e[c],o=u.sourceObject,n=u.member,r=this.map?this.map(o):o;if(r instanceof v==0||this.filter(r))r=null;m(n,r)||(u.member=r,n&&(i=n.basisObjectId,this.removeMemberRef&&this.removeMemberRef(n,o),t[i]--),r&&(s=r.basisObjectId,this.addMemberRef&&this.addMemberRef(r,o),s in t?t[s]++:(t[s]=1,a.push(r))))}for(i in this.items_)t[i]==0&&(delete t[i],f.push(this.items_[i]));return(l=d(a,f))&&this.emit_itemsChanged(l),l}})},"1g.js":function(e,t,n,r,i,s,o,u,a){var f=n.fn.$undef,l=n.require("./2.js").ReadOnlyDataset,c=n.require("./2.js").DatasetWrapper,h=n.require("./2.js").KeyObjectMap,p=n.require("./1f.js"),d=n.require("./1h.js");t.exports=p.subclass({className:"basis.data.dataset.Split",subsetClass:l,subsetWrapperClass:c,keyMap:null,map:function(e){return this.keyMap.resolve(e)},rule:n.getter(f),setRule:function(e){e=n.getter(e||f);if(this.rule!==e){var t=this.rule;return this.rule=e,this.keyMap.keyGetter=e,this.emit_ruleChanged(t),this.applyRule()}},addMemberRef:function(e,t){e.dataset.emit_itemsChanged({inserted:[t]})},removeMemberRef:function(e,t){e.dataset.emit_itemsChanged({deleted:[t]})},init:function(){if(!this.keyMap||this.keyMap instanceof h==0)this.keyMap=d(this.keyMap,this.rule,this.subsetWrapperClass,this.subsetClass);p.prototype.init.call(this)},getSubset:function(e,t){return this.keyMap.get(e,t)},destroy:function(){p.prototype.destroy.call(this),this.keyMap.destroy(),this.keyMap=null}})},"1h.js":function(e,t,n,r,i,s,o,u,a){var f=n.object.extend,l=n.require("./2.js").KeyObjectMap;t.exports=function(t,n,r,i){return new l(f({keyGetter:n,itemClass:r,create:function(e,t){var n=l.prototype.create.call(this,e,t);return n.ruleValue=e,n.setDataset(new i({ruleValue:e})),n}},t))}},"1i.js":function(e,t,n,r,i,s,o,u,a){var f=n.fn.$self,l=n.fn.$undef,c=n.require("./2.js").ReadOnlyDataset,h=n.require("./2.js").DatasetWrapper,p=n.require("./2.js").KeyObjectMap,d=n.require("./2.js").Dataset.setAccumulateState,v=n.require("./1c.js"),m=n.require("./1h.js"),g=n.require("./1b.js"),y=n.require("./1a.js"),b=function(e){var t=this.sourceMap_,n=this.members_,r=e.basisObjectId,i=t[r].list,s=t[r].list={},o=this.rule(e),u,a=[],f=[],l;if(Array.isArray(o))for(var c=0;c<o.length;c++)l=this.keyMap.get(o[c],!0),l&&!l.has(e)&&(h=l.basisObjectId,s[h]=l,i[h]||(l.dataset.emit_itemsChanged({inserted:[e]}),n[h]?n[h]++:(a.push(l),n[h]=1)));for(var h in i)if(!s[h]){var l=i[h];l.dataset.emit_itemsChanged({deleted:[e]}),--n[h]||(delete n[h],f.push(l))}(u=y(a,f))&&this.emit_itemsChanged(u)},w={itemsChanged:function(e,t){var n=this.sourceMap_,r=this.members_,i=this.ruleEvents,s,o,u,a=[],f=[];d(!0);if(s=t.inserted)for(var l=0,c;c=s[l];l++){var h=this.rule(c),p={object:c,list:{}};n[c.basisObjectId]=p;if(Array.isArray(h))for(var v=0,m={};v<h.length;v++)o=this.keyMap.get(h[v],!0),o&&!m[o.basisObjectId]&&(u=o.basisObjectId,m[u]=!0,p.list[u]=o,o.dataset.emit_itemsChanged({inserted:[c]}),r[u]?r[u]++:(a.push(o),r[u]=1));i&&c.addHandler(i,this)}if(s=t.deleted)for(var l=0,c;c=s[l];l++){var g=c.basisObjectId,h=n[g].list;delete n[g];for(var u in h)o=h[u],o.dataset.emit_itemsChanged({deleted:[c]}),--r[u]||(delete r[u],f.push(o));i&&c.removeHandler(i,this)}d(!1),(t=y(a,f))&&this.emit_itemsChanged(t)}};t.exports=v.subclass({className:"basis.data.dataset.Cloud",subsetClass:c,subsetWrapperClass:h,rule:n.getter(l),ruleEvents:g(b,"update"),keyMap:null,map:f,listen:{source:w},init:function(){if(!this.keyMap||this.keyMap instanceof p==0)this.keyMap=m(this.keyMap,this.rule,this.subsetWrapperClass,this.subsetClass);v.prototype.init.call(this)},getSubset:function(e,t){return this.keyMap.get(e,t)},destroy:function(){v.prototype.destroy.call(this),this.keyMap.destroy(),this.keyMap=null}})},"1j.js":function(e,t,n,r,i,s,o,u,a){function S(e,t,n){var r=e.sourceMap_[t.basisObjectId];if(r&&r.visited!==n){for(var i=r;i=i.ref;)if(i.object===e.source)return!0;r.visited=n;for(var i=r;i=i.ref;)if(S(e,i.object,n||{}))return!0}}function x(e,t,n){var r=e.sourceMap_,i=e.members_,s=c(t),o=[];for(var u=0;u<s.length;u++){var a=s[u],f=a.basisObjectId;f||(n=a.ref,a=a.object,f=a.basisObjectId);var l=r[f];if(l)l.ref={object:n,ref:l.ref};else{l=r[f]={source:a,ref:{object:n,ref:null},visited:null,value:null};if(a instanceof p){var h=e.rule(a)||null;if(h instanceof p||h instanceof v)l.value=h,s.push({object:h,ref:a});i[f]=l,o.push(a),e.ruleEvents&&a.addHandler(e.ruleEvents,e)}else{a.addHandler(E,e);for(var d=0,m=a.getItems();d<m.length;d++)s.push({object:m[d],ref:a})}}}return o}function T(e,t,n){var r=e.sourceMap_,i=e.members_,s=c(t),o=[];for(var u=0;u<s.length;u++){var a=s[u],f=a.basisObjectId;f||(n=a.ref,a=a.object,f=a.basisObjectId);var l=r[f],h=l.value;for(var v=l,m=l;v=v.ref;){if(d(v.object,n)){m.ref=v.ref;break}m=v}if(!l.ref){if(a instanceof p)delete i[f],o.push(a),e.ruleEvents&&a.removeHandler(e.ruleEvents,e),h&&s.push({object:h,ref:a});else{a.removeHandler(E,e);for(var g=0,y=a.getItems();g<y.length;g++)s.push({object:y[g],ref:a})}delete r[f]}else h&&!S(e,a)&&(l.value=null,s.push({object:h,ref:a}))}return o}var f=n.object.values,l=n.fn.$undef,c=n.array.from,h=n.require("./6.js").create,p=n.require("./2.js").Object,d=n.require("./2.js").isEqual,v=n.require("./2.js").ReadOnlyDataset,m=n.require("./1c.js"),g=n.require("./1b.js"),y=n.require("./1a.js"),b=function(e){var t=this.sourceMap_[e.basisObjectId],n=this.rule(e)||null,r=t.value,i,s,o;if(d(n,r))return;if(n instanceof p||n instanceof v)i=x(this,n,e);r&&(s=T(this,r,e)),t.value=n,(o=y(i,s))&&this.emit_itemsChanged(o)},w=function(e,t){var n=t.inserted,r=t.deleted,t;n&&(n=x(this,n,e)),r&&(r=T(this,r,e)),(t=y(n,r))&&this.emit_itemsChanged(t)},E={itemsChanged:w,destroy:function(e){var t=this.sourceMap_;for(var n=t[e.basisObjectId];n=n.ref;)t[n.object.basisObjectId].value=null;delete t[e.basisObjectId]}};t.exports=m.subclass({className:"basis.data.dataset.Extract",propertyDescriptors:{rule:"ruleChanged"},rule:n.getter(l),emit_ruleChanged:h("ruleChanged","oldRule"),ruleEvents:g(b,"update"),listen:{source:{itemsChanged:w}},setRule:function(e){e=n.getter(e||l);if(this.rule!==e){var t=this.rule;return this.rule=e,this.emit_ruleChanged(t),this.applyRule()}},applyRule:function(){var e={},t={},n;for(var r in this.sourceMap_){var i=this.sourceMap_[r],s=i.source;if(s instanceof p){var o=this.rule(s)||null,u=i.value;if(d(o,u))continue;if(o instanceof p||o instanceof v){var a=x(this,o,s);for(var l=0;l<a.length;l++){var c=a[l],h=c.basisObjectId;t[h]?delete t[h]:e[h]=c}}if(u){var m=T(this,u,s);for(var l=0;l<m.length;l++){var c=m[l],h=c.basisObjectId;e[h]?delete e[h]:t[h]=c}}i.value=o}}return(n=y(f(e),f(t)))&&this.emit_itemsChanged(n),n}})},"1k.js":function(e,t,n,r,i,s,o,u,a){var f=n.require("./1f.js");t.exports=f.subclass({className:"basis.data.dataset.Filter",filter:function(e){return!this.rule(e)}})},"1l.js":function(e,t,n,r,i,s,o,u,a){function g(e){return e!==e?undefined:e}function y(e,t){if(!e.length)return 0;var n=t.value,r=t.object.basisObjectId,i,s,o,u,a=0,f=e.length-1;do{o=a+f>>1,u=e[o],i=u.value;if(n<i)f=o-1;else if(n>i)a=o+1;else{s=u.object.basisObjectId;if(r<s)f=o-1;else{if(!(r>s))return o;a=o+1}}}while(a<=f);return o+(i==n?s<r:i<n)}function w(e,t){return+(e.value>t.value)||-(e.value<t.value)||e.object.basisObjectId-t.object.basisObjectId}var f=n.fn.$true,l=n.object.values,c=n.object.slice,h=n.require("./6.js").create,p=n.require("./2.js").Value,d=n.require("./1b.js"),v=n.require("./1a.js"),m=n.require("./1c.js"),b=function(e){var t=this.sourceMap_[e.basisObjectId],n=g(this.rule(e)),r=this.index_;if(n!==t.value){var i=y(r,t),s=r[i-1],o=r[i+1];t.value=n;if(s&&(s.value>n||s.value==n&&s.object.basisObjectId>t.object.basisObjectId)||o&&(o.value<n||o.value==n&&o.object.basisObjectId<t.object.basisObjectId))r.splice(i,1),r.splice(y(r,t),0,t),this.applyRule()}},E={itemsChanged:function(e,t){var n=this.sourceMap_,r=this.index_,i=this.ruleEvents,s=!1,o=!1,u,a=t.inserted,f=t.deleted;if(f){f.length>r.length-f.length&&(s=!0,o=f.length!=r.length,r.length=0);for(var l=0,c;c=f[l];l++)s||(u=n[c.basisObjectId],r.splice(y(r,u),1)),delete n[c.basisObjectId],i&&c.removeHandler(i,this);if(o)for(var h in n)u=n[h],r.splice(y(r,u),0,u)}if(a){o=!r.length;for(var l=0,c;c=a[l];l++)u={object:c,value:g(this.rule(c))},n[c.basisObjectId]=u,o?r.push(u):r.splice(y(r,u),0,u),i&&c.addHandler(i,this);o&&r.sort(w)}this.applyRule()}};t.exports=m.subclass({className:"basis.data.dataset.Slice",propertyDescriptors:{limit:"rangeChanged",offset:"rangeChanged",orderDesc:"ruleChanged",rule:"ruleChanged"},rule:n.getter(f),emit_ruleChanged:h("ruleChanged","oldRule","oldOrderDesc"),ruleEvents:d(b,"update"),index_:null,left_:null,right_:null,orderDesc:!1,offset:0,limit:10,listen:{source:E},emit_rangeChanged:h("rangeChanged","oldOffset","oldLimit"),init:function(){this.index_=[],m.prototype.init.call(this)},setRange:function(e,t){var n=this.offset,r=this.limit,i=!1;if(n!=e||r!=t)this.offset=e,this.limit=t,i=this.applyRule(),this.emit_rangeChanged(n,r);return i},setOffset:function(e){return this.setRange(e,this.limit)},setLimit:function(e){return this.setRange(this.offset,e)},setRule:function(e,t){e=n.getter(e||f),t=!!t;if(this.rule!=e||this.orderDesc!=t){var r=this.rule,i=this.orderDesc;if(this.rule!=e){var s=this.index_;for(var o=0;o<s.length;o++)s[o].value=g(e(s[o].object));s.sort(w),this.rule=e}return this.orderDesc=t,this.rule=e,this.emit_ruleChanged(r,i),this.applyRule()}},applyRule:function(){var e=this.offset,t=e+this.limit;this.orderDesc&&(e=this.index_.length-t,t=e+this.limit);var n=c(this.members_),r=this.index_.slice(Math.max(0,e),Math.max(0,t)),i=[],s;for(var o=0,u;u=r[o];o++){var a=u.object.basisObjectId;n[a]?delete n[a]:(i.push(u.object),this.members_[a]=u.object)}for(var a in n)delete this.members_[a];if(this.left_)for(var f in this.left_){var u=this.index_[this.orderDesc?t+Number(f)-1:e-Number(f)];this.left_[f].set(u?u.object:null)}if(this.right_)for(var f in this.right_){var u=this.index_[this.orderDesc?e-Number(f):t+Number(f)-1];this.right_[f].set(u?u.object:null)}return(s=v(i,l(n)))&&this.emit_itemsChanged(s),s},left:function(e){e=parseInt(e,10)||0,this.left_||(this.left_={});var t=this.left_[e];if(!t){var n=this.offset,r=n+this.limit;this.orderDesc&&(n=this.index_.length-r,r=n+this.limit);var i=this.index_[this.orderDesc?r+e-1:n-e];t=this.left_[e]=new p({value:i?i.object:null})}return t},right:function(e){e=parseInt(e,10)||0,this.right_||(this.right_={});var t=this.right_[e];if(!t){var n=this.offset,r=n+this.limit;this.orderDesc&&(n=this.index_.length-r,r=n+this.limit);var i=this.index_[this.orderDesc?n-e:r+e-1];t=this.right_[e]=new p({value:i?i.object:null})}return t},destroy:function(){m.prototype.destroy.call(this);if(this.left_){for(var e in this.left_)this.left_[e].destroy();this.left_=null}if(this.right_){for(var e in this.right_)this.right_[e].destroy();this.right_=null}this.index_=null}})},"m.js":function(e,t,n,r,i,s,o,u,a){function p(e,t){var n=c[e];if(n){for(var r=0,i;i=n[r];r++){var s=i[0],o=i[1];s[o]=t}delete c[e]}delete h[e],l[e]=t}function d(e,t,n){if(l.hasOwnProperty(e))return l[e];if(t&&n){var r=c[e];r||(r=c[e]=[]),r.push([t,n])}else h[e]=!0;return function(t,n){var r=l.hasOwnProperty(e)?l[e]:null;if(r)return r(t,n)}}function v(e){if(l.hasOwnProperty(e))return l[e]}function m(){for(var e in h)n.dev.warn(f+": type `"+e+"` is not defined, but used via type.getTypeByName()");for(var e in c)n.dev.warn(f+": type `"+e+"` is not defined, but used by "+c[e].length+" type(s)")}var f="basis.type",l={},c={},h={};t.exports={string:n.require("./1m.js"),number:n.require("./1n.js"),"int":n.require("./1o.js"),"enum":n.require("./1p.js"),array:n.require("./1q.js"),object:n.require("./1r.js"),date:n.require("./1s.js"),validate:m,getTypeByName:d,getTypeByNameIfDefined:v,defineType:p}},"1m.js":function(e,t,n,r,i,s,o,u,a){function f(e,t){if(t){if(e!==null&&typeof e!="string")return l.nullable}else if(typeof e!="string")return l;var n=function(e,n){return typeof e=="string"?e:t&&e===null?null:n};return n.DEFAULT_VALUE=e,n}var l=f("",!1);l["default"]=function(e){return f(e,!1)},l.nullable=f(null,!0),l.nullable["default"]=function(e){return f(e,!0)},t.exports=l},"1n.js":function(e,t,n,r,i,s,o,u,a){function f(e){return e===0||typeof e!="object"&&isFinite(e)}function l(e,t){if(t){if(e!==null&&!f(e))return c.nullable}else if(!f(e))return c;e=e===null?null:Number(e);var n=function(e,n){return f(e)?Number(e):t&&e===null?null:n};return n.DEFAULT_VALUE=e,n}var c=l(0,!1);c["default"]=function(e){return l(e,!1)},c.nullable=l(null,!0),c.nullable["default"]=function(e){return l(e,!0)},t.exports=c},"1o.js":function(e,t,n,r,i,s,o,u,a){function f(e){return e===0||typeof e!="object"&&isFinite(e)}function l(e,t){if(t){if(e!==null&&!f(e))return c.nullable}else if(!f(e))return c;e=e===null?null:parseInt(e,10);var n=function(e,n){return f(e)?parseInt(e,10):t&&e===null?null:n};return n.DEFAULT_VALUE=e,n}var c=l(0,!1);c["default"]=function(e){return l(e,!1)},c.nullable=l(null,!0),c.nullable["default"]=function(e){return l(e,!0)},t.exports=c},"1p.js":function(e,t,n,r,i,s,o,u,a){function f(e){Array.isArray(e)||(e=[e]);if(!e.length)throw new Error("basis.type.enum constructor expected non-empty array but got empty.");var t=function(t,n){return e.indexOf(t)!==-1?t:n};return t.DEFAULT_VALUE=e[0],t["default"]=function(n){if(e.indexOf(n)===-1)return t;var r=function(){return t.apply(this,arguments)};return r.DEFAULT_VALUE=n,r},t}t.exports=f},"1q.js":function(e,t,n,r,i,s,o,u,a){function f(e,t){if(e===t)return!0;if(e.length!=t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}function l(e,t){if(t){if(e!==null&&!Array.isArray(e))return h.nullable}else if(!Array.isArray(e))return h;var n=function(e,n){return Array.isArray(e)?n&&f(e,n)?n:e:t&&e===null?null:n};return n.DEFAULT_VALUE=e,n}var c=[],h=l(c,!1);h["default"]=function(e){return l(e,!1)},h.nullable=l(null,!0),h.nullable["default"]=function(e){return l(e,!0)},t.exports=h},"1r.js":function(e,t,n,r,i,s,o,u,a){function f(e){return e?Array.isArray(e)?!1:typeof e=="object":!1}function l(e,t){if(t){if(e!==null&&!f(e))return h.nullable}else if(!f(e))return h;var n=function(e,n){return f(e)?e:t&&e===null?null:n};return n.DEFAULT_VALUE=e,n}var c={},h=l(c,!1);h["default"]=function(e){return l(e,!1)},h.nullable=l(null,!0),h.nullable["default"]=function(e){return l(e,!0)},t.exports=h},"1s.js":function(e,t,n,r,i,s,o,u,a){function h(e){return typeof e=="number"&&isFinite(e)?new Date(e):e&&typeof e=="string"?c(e):e instanceof Date?e:undefined}function p(e,t){var n=h(e);if(t){if(e!==null&&n===undefined)return d.nullable}else if(n===undefined)return d;var r=function(e,n){if(t&&e===null)return null;var r=h(e);return r===undefined?n:r&&n&&r.getTime()===n.getTime()?n:r};return r.DEFAULT_VALUE=n||null,r}var f=/\D/,l=/(.{10,})([\-\+]\d{1,2}):?(\d{1,2})?$/,c=function(){function e(e,n,r,i,s,o,u){var a=new Date(e,n-1,r,i||0,0,o||0,u?u.substr(0,3):0);return a.setMinutes((s||0)-t-a.getTimezoneOffset()),a}var t;return function(n){return t=0,e.apply(null,String(n||"").replace(l,function(e,n,r,i){return t=Number(r||0)*60+Number(i||0),n}).split(f))}}(),d=p(new Date(0),!1);d["default"]=function(e){return p(e,!1)},d.nullable=p(null,!0),d.nullable["default"]=function(e){return p(e,!0)},t.exports=d},"1t.js":function(e,t,n,r,i,s,o,u,a){function l(e){return e==null?null:String(e)}var f=n.require("./k.js"),c=f.createType("Endpoint",{id:f.StringId,sessionId:l,type:String,online:Boolean,title:String,location:String,pid:Number,num:Number,publishers:f.createSetType("Publisher",{localId:"id"})});c.extendReader(function(e){e.publishers=e.publishers.map(function(t){return e.id+"/"+t})}),t.exports=c},"1u.js":function(e,t,n,r,i,s,o,u,a){var f=n.require("./2.js").Value,l=n.require("./n.js").Merge,c=n.require("./18.js").Endpoint,h=n.require("./18.js").Publisher,p=n.require("./o.js"),d=n.require("./17.js"),v=f.from(p.route("*id").param("id")),m=new f({proxy:function(e){return e&&decodeURIComponent(e)}}),g=new f({value:!1}),y=m.as(h.getSlot),b=y.query("data.endpointId").as(c.getSlot),w=new l({sources:{endpoint:b,publisher:y},fields:{id:"publisher:id",endpointId:"publisher",name:"publisher","*":"endpoint"}});m.link(null,function(){g.value&&d.cancelPublisherPick()}),d.online.link(g,function(e){e||this.set(!1)}),d.exclusivePublisher.link(null,function(e){e?(v.unlink(m),m.unlink(location),m.set(e),document.title=w.data.name):(document.title="Rempl WS server",v.link(m,m.set),m.link(location,function(e){this.hash=e||""}))}),t.exports={isPickMode:g,selected:w,selectById:function(e){m.set(e)},unselect:function(){m.set(null)},togglePickMode:function(){g.value?(g.set(!1),d.cancelPublisherPick()):(g.set(!0),d.pickPublisher(function(e,t){g.set(!1),m.set(e+"/"+t)}))}}},"n.js":function(e,t,n,r,i,s,o,u,a){function v(e){return new Function("data","return {"+n.object.iterate(e,function(e,t){return e=e.replace(/"/g,'\\"'),t=t.replace(/"/g,'\\"'),'"'+e+'": data["'+t+'"]'})+"}")}function g(e){this.host.setSource(this.name,e)}var f="basis.data.object",l=n.require("./6.js").create,c=n.require("./2.js").SUBSCRIPTION,h=n.require("./2.js").Object,p=n.require("./2.js").resolveObject;c.add("OBJECTSOURCE",{sourceChanged:function(e,t,n){n&&c.unlink("sources",e,n),e.sources[t]&&c.link("sources",e,e.sources[t])}},function(e,t){var n=t.sources;for(var r in n)e("sources",t,n[r])});var d={update:function(e,t){var n=this.host.fields,r={};if(this.name==n.defaultSource)for(var i in t)i in n.fieldSource==0&&(r[i]=e.data[i]);else for(var i in t){var s=n.fromNames[this.name][i];s&&this.host.fields.fieldSource[s]==this.name&&(r[s]=e.data[i])}for(var i in r)return this.host.update(r)},destroy:function(){this.host.setSource(this.name,null)}},m=function(e){var t={},n={},r={},i={defaultSource:!1,fieldSource:{},toNames:n,fromNames:r,sources:t,__extend__:m};e["*"]&&(i.defaultSource=e["*"]);for(var s in e){var o=e[s].split(":"),u=o.shift(),a=o.length?o.join(":"):s;if(u==i.defaultSource)continue;if(u=="-"&&a!=s)continue;n[u]||(n[u]={},r[u]={}),n[u][s]=a,r[u][a]=s,i.fieldSource[s]=u}for(var u in n)t[u]=v(n[u]);return i.defaultSource&&(t[i.defaultSource]=function(e){var t={};for(var n in e)n in i.fieldSource==0&&(t[n]=e[n]);return t}),i},y=h.subclass({className:f+".Merge",subscribeTo:h.prototype.subscribeTo+c.OBJECTSOURCE,propertyDescriptors:{sources:{nested:!0,events:"sourceChanged"}},fields:m({"*":"-"}),sources:null,sourcesContext_:null,emit_sourceChanged:l("sourceChanged","name","oldSource"),delta_:null,init:function(){var e=this.data,t=this.sources;this.delegate=null;if(e&&"-"in this.fields.sources)if(this.fields.defaultSource!=="-")this.data=this.fields.sources["-"](e);else{this.data={};for(var n in e){var r=this.fields.fieldSource[n]||this.fields.defaultSource;r=="-"&&(this.data[n]=e[n])}}else this.data={};h.prototype.init.call(this),this.sources={},this.sourcesContext_={},t&&this.setSources(t)},update:function(e){if(this.delta_){for(var t in e){var n=this.fields.fieldSource[t]||this.fields.defaultSource;if(!n)continue;var r=n!=this.fields.defaultSource?this.fields.toNames[n][t]:t,i=this.sources[n].data[r];i!==this.data[t]&&(t in this.delta_==0?this.delta_[t]=this.data[t]:this.delta_[t]===i&&delete this.delta_[t],this.data[t]=i)}return}var s,o={};this.delta_=o;for(var t in e){var n=this.fields.fieldSource[t]||this.fields.defaultSource;if(!n)continue;if(n=="-"){o[t]=this.data[t],this.data[t]=e[t];continue}if(this.sources[n]){var r=n!=this.fields.defaultSource?this.fields.toNames[n][t]:t;this.sources[n].data[r]!==e[t]?(s||(s={}),n in s==0&&(s[n]={}),s[n][r]=e[t]):this.data[t]!==e[t]&&(o[t]=this.data[t],this.data[t]=e[t])}}if(s)for(var n in s)this.sources[n].update(s[n]);this.delta_=null;for(var t in o)return this.emit_update(o),o;return!1},setDelegate:function(){},setSource:function(e,t){var n=this.sources[e];if(e in this.fields.sources==0)return;if(e=="-")return;e in this.sourcesContext_==0&&(this.sourcesContext_[e]={host:this,name:e,adapter:null}),t=p(this.sourcesContext_[e],g,t,"adapter",this);if(n!==t){var r=this.listen["source:"+e];n&&(r&&n.removeHandler(r,this),n.removeHandler(d,this.sourcesContext_[e])),this.sources[e]=t;if(t){t.addHandler(d,this.sourcesContext_[e]),r&&t.addHandler(r,this);var i=this.fields.sources[e](t.data);if(this.fields.defaultSource==e)for(var s in this.data)!this.fields.fieldSource.hasOwnProperty(s)&&!i.hasOwnProperty(s)&&(i[s]=undefined);this.update(i)}this.emit_sourceChanged(e,n)}},setSources:function(e){e||(e={});for(var t in this.fields.sources)this.setSource(t,e[t])},destroy:function(){this.setSources(),this.sources=null,this.sourcesContext_=null,h.prototype.destroy.call(this)}});t.exports={Merge:y}},"o.js":function(e,t,n,r,i,s,o,u,a){function x(e,t){var n=m(e.callbacks);for(var r=0,i;i=n[r];r++)(!t||!i.enterInited)&&i.callback.enter&&(i.enterInited=!0,i.callback.enter.call(i.context))}function T(e){var t=m(e.callbacks);for(var n=0,r;r=t[n];n++)r.callback.leave&&r.callback.leave.call(r.context)}function N(e,t){var n=m(e.callbacks);for(var r=0,i;i=n[r];r++)(!t||!i.matchInited)&&i.callback.match&&(i.matchInited=!0,i.callback.match.apply(i.context,e.matched))}function L(e){function i(e){return t.substr(e).match(/^\w+/)}function s(e,o){var u="",a;for(var f=e;f<t.length;f++){var l=t.charAt(f);switch(l){case o:return{result:u,offset:f};case"\\":u+="\\"+t.charAt(++f);break;case"|":u+=o!=")"?"\\|":"|";break;case"(":(a=s(f+1,")"))?(f=a.offset,u+="(?:"+a.result+")?"):u+="\\(";break;case":":(a=i(f+1))?(f+=a[0].length,u+="([^/]+)",r.push(a[0])):u+=":";break;case"*":(a=i(f+1))?(f+=a[0].length,u+="(.*?)",r.push(a[0])):u+="\\*";break;default:u+=n.string.forRegExp(l)}}return o?null:u}var t=String(e||""),r=[],o=new RegExp("^"+s(0)+"$","i");return o.params=r,o}function A(){y||(d?h.addHandler(r,"hashchange",_):w=setInterval(_,v),y=!0,_())}function O(){y&&(y=!1,d?h.removeHandler(r,"hashchange",_):clearInterval(w))}function M(e){if(S)return!0;var t=Date.now();E=E.filter(function(e){return t-e.time<200});var r=n.array.lastSearch(E,e,"path");if(r&&n.array.lastSearch(E,e,"path",E.lastSearchIndex))return S=setTimeout(function(){S=null,_()},200),!0;E.push({time:Date.now(),path:e})}function _(){var e=l.hash.substr(1)||"";if(e!=b){var t=[],n=[],r=[];if(M(e))return;b=e;for(var i in g){var s=g[i],o=e.match(s.regexp);s.inited=!0,C.remove(s.token),o?(s.matched||t.push(s),s.matched=m(o,1),r.push(s)):s.matched&&(n.push(s),s.matched=null)}for(var u=0,s;s=n[u];u++)s.token.set(null),T(s);for(var u=0,s;s=t[u];u++)x(s);for(var u=0,s;s=r[u];u++)s.token.set(s.matched),N(s)}else for(var i in g){var s=g[i];s.matched&&(x(s,!0),N(s,!0))}}function D(e,t){e instanceof k&&(e=e.path);var n=g[e];if(!n&&t){var r=Object.prototype.toString.call(e)=="[object RegExp]"?e:L(e),i=new k(r.params,e);n=g[e]={id:e,regexp:r,enterInited:!1,matchInited:!1,matched:null,token:i,callbacks:[]};if(typeof b=="string"){var s=b.match(n.regexp);s&&(s=m(s,1),n.matched=s,n.token.set(s))}}return n}function P(e,t,n){var r=D(e,!0);return r.callbacks.push({inited:!1,cb_:t,context:n,callback:typeof t!="function"?t||{}:{match:t}}),C.add(r.token),r.token}function H(e,t,n){var r=D(e);if(!r)return;for(var i=0,s;s=r.callbacks[i];i++)if(s.cb_===t&&s.context===n){r.callbacks.splice(i,1),r.matched&&t&&t.leave&&t.leave.call(n);if(!r.callbacks.length){var o=r.token;(!o.handler||!o.handler.handler)&&!o.matched.handler&&delete g[r.id]}return}}function B(e,t){t?l.replace(l.pathname+"#"+e):l.hash=e,y&&_()}var f="basis.router",l=r.location,c=r.document,h=n.require("./i.js"),p=c.documentMode,d="onhashchange"in r&&(p===undefined||p>7),v=50,m=n.array.from,g={},y=!1,b,w,E=[],S,C=n.asap.schedule(function(e){var t=D(e);t.matched&&(x(t,!0),N(t,!0))}),k=n.Token.subclass({className:f+".Route",path:null,matched:null,params_:null,names_:null,init:function(e,t){n.Token.prototype.init.call(this,null),this.path=t,this.matched=this.as(Boolean),this.names_=Array.isArray(e)?e:[],this.params_={}},param:function(e){var t=typeof e=="number"?e:this.names_.indexOf(e);return t in this.params_==0&&(this.params_[t]=this.as(function(e){return e&&e[t]})),this.params_[t]},set:function(e){if(e){e=n.object.slice(e);for(var t in e)t in this.names_&&(e[this.names_[t]]=e[t])}n.Token.prototype.set.call(this,e)},add:function(e,t){return P(this,e,t)},remove:function(e,t){H(this,e,t)}});A(),t.exports={debug:!1,start:A,stop:O,checkUrl:_,navigate:B,add:P,remove:H,route:function(e){return D(e,!0).token}}},"0.js":function(e,t,n,r,i,s,o,u,a){var f=n.fn.runOnce(function(){n.require("./1.js").create(n.require("./r.js"))});n.ready(function l(){if(typeof io=="undefined")return setTimeout(l,50);n.require("./17.js").online.link(null,function(e){e&&f()})})},"1v.js":function(e,t,n,r,i,s,o,u,a){var f=n.require("./7.js").Node,l=n.require("./2.js").Value,c=n.require("./18.js").Endpoint,h=n.require("./1u.js");t.exports=new f({template:n.template.get(".1"),active:!0,dataSource:c.all,childClass:{disabled:l.query("data.publishers.itemCount").as(n.bool.invert),template:n.template.get(".2"),binding:{title:{events:"update",getter:function(e){return e.data.title||"<no title>"}},isBrowser:l.query("data.type").as(function(e){return e=="browser"}),isNode:l.query("data.type").as(function(e){return e=="node"}),location:"data:",pid:"data:",online:"data:",num:"data:",pickMode:h.isPickMode},action:{select:function(){this.isDisabled()||h.selectById(this.data.publishers.pick().data.id)}},dataSource:l.query("data.publishers"),childClass:{template:n.template.get(".3"),binding:{name:"data:"},action:{select:function(){h.selectById(this.data.id)}}}}})},"2.js":function(e,t,n,r,i,s,o,u,a){function Y(e,t,r){var i=t[r],s=!1;/^<static>/.test(i)&&(s=!0,i=i.substr(8));var o=e.propertyDescriptors[i],u=o?o.events:null;o&&o.isPrivate&&(s=!0,u=null),o&&o.isStatic&&(s=!0);if(u){if(s)u=null;else if(o&&o.nested&&r<t.length-1){var a=i,f=t[++r],l=a+"."+f;if(Array.isArray(o.nested)&&o.nested.indexOf(f)==-1)return;i=G[l],i||(i=function(e){return e=e&&e[a],e?e[f]:undefined},i=G[l]=n.getter(i))}}else if(!s)return;return{getter:i,rest:t.slice(r+1).join("."),events:u||null}}function Z(e){var t=Q[e];if(!t){var r=function(t){if(t instanceof T)return R.query(t,e)};t=Q[e]=n.getter(r)}return t}function et(e){return e.factory=M,e.deferred=tt,e.compute=nt,e.query=st,e.pipe=it,e.as=rt,e}function tt(){var e=this;return et(function(t){return t=e(t),t?t.deferred():t})}function nt(e,t){var n=this;return et(function(r){var i=n(r);return i?i.compute(e,t)(r):i})}function rt(e){var t=this;return et(function(n){return n=t(n),n?n.as(e):n})}function it(e,t){var n=this;return et(function(r){return r=n(r),r?r.pipe(e,t):r})}function st(e){var t=this;return et(function(n){return n=t(n),n?n.query(e):n})}function ut(e,t){while(t&&t!==e&&t!==t.delegate)t=t.delegate;return t===e}function at(e,t,n){var r=e.delegate;r&&(e.root=r.root,e.target=r.target,e.data=r.data,e.state=r.state);if(!D(e.root,t)){var i=e.listen.root;i&&(t&&!D(t,e)&&t.removeHandler(i,e),e.root&&!D(e.root,e)&&e.root.addHandler(i,e)),e.emit_rootChanged(t)}if(!D(e.target,n)){var s=e.listen.target;s&&(n&&!D(n,e)&&n.removeHandler(s,e),e.target&&!D(e.target,e)&&e.target.addHandler(s,e)),e.emit_targetChanged(n)}var o=e.delegates_;while(o)o.delegate&&at(o.delegate,t,n),o=o.next}function dt(e,t){var n={},r;e&&e.length&&(r=n.inserted=e),t&&t.length&&(r=n.deleted=t);if(r)return n}function vt(e,t){if(!e||!e.itemCount){if(t&&t.itemCount)return{inserted:t.getItems()}}else{if(!!t&&!!t.itemCount){var n=[],r=[];for(var i in e.items_){var s=e.items_[i];s.basisObjectId in t.items_==0&&r.push(s)}for(var i in t.items_){var s=t.items_[i];s.basisObjectId in e.items_==0&&n.push(s)}return dt(n,r)}if(e.itemCount)return{deleted:e.getItems()}}}function wt(){this.fn.call(this.context,this.source)}function Et(e,t,n,r,i){var s=e[r]||null,o=null;t!==wt&&typeof n=="function"&&(n=n.call(i||e,i||e));if(n){var u=o=s&&s.source===n?s:null;n instanceof mt?(o=u||new b(e,t,n,bt),n=n.dataset):n.bindingBridge&&(o=u||new w(e,t,n,E),n=Et(o,wt,n.value,"next"))}n instanceof gt==0&&(n=null);if(r&&s!==o){var a=s;while(a){var u=a;u.detach(),a=u.next,u.next=null}o&&o.attach(S),e[r]=o}return n}function St(e){return Array.isArray(e)?e.map(function(e){return{data:e}}):{data:e}}function xt(e){if(!e||e.constructor!==Object)e={value:e};return new ft({data:e})}function Tt(e,t){var n=t?xt:St;return Array.isArray(e)?e.map(n):n(e)}var f="basis.data",l=n.Class,c=Array.prototype.slice,h=n.object.values,p=n.fn.$self,d=n.require("./3.js"),v=n.require("./4.js"),m=n.require("./5.js"),g=m.createResolveFunction,y=m.resolveValue,b=m.ResolveAdapter,w=m.BBResolveAdapter,E=m.DEFAULT_CHANGE_ADAPTER_HANDLER,S=m.DEFAULT_DESTROY_ADAPTER_HANDLER,x=n.require("./6.js"),T=x.Emitter,N=x.create,C=x.createHandler,k=x.events,L=n.require("./q.js"),A={},O=[],M=n.FACTORY,_=n.PROXY;v.addProperty("delegate"),v.addProperty("target"),v.addProperty("dataset"),v.addProperty("value","change");var D=function(e,t){return e===t},P=n.getter.ID,H={destroy:function(e){this.value.unlink(e,this.fn)}},B={destroy:function(){this.set(null)}},j={},F={},I=function(e){R.prototype.set.call(this,e)},q=function(e,t){t instanceof T?t.removeHandler(this.pipeHandler,this):t=null,e instanceof T?e.addHandler(this.pipeHandler,this):e=null,e!==t&&R.prototype.set.call(this,e)},R=l(L,{className:f+".Value",propertyDescriptors:{value:"change",bindingBridge:!1,initValue:!1,locked:!1,proxy:!1,setNullOnEmitterDestroy:!1},subscribeTo:v.VALUE,emit_change:N("change","oldValue")&&function(e){k.change.call(this,e);var t=this;while(t=t.links_)t.fn.call(t.context,this.value,e)},value:null,initValue:null,proxy:null,locked:0,lockedValue_:null,links_:null,deferred_:null,pipes_:null,setNullOnEmitterDestroy:!0,bindingBridge:{attach:function(e,t,n,r){e.link(n,t,!0,r)},detach:function(e,t,n){e.unlink(n,t)},get:function(e){return e.value}},init:function(){L.prototype.init.call(this),this.proxy&&(this.value=this.proxy(this.value)),this.setNullOnEmitterDestroy&&this.value instanceof T&&this.value.addHandler(B,this),this.initValue=this.value},set:function(e){var t=this.value,n=this.proxy?this.proxy(e):e,r=n!==t;return r&&(this.setNullOnEmitterDestroy&&(t instanceof T&&t.removeHandler(B,this),n instanceof T&&n.addHandler(B,this)),this.value=n,this.locked||this.emit_change(t)),r},reset:function(){this.set(this.initValue)},isLocked:function(){return this.locked>0},lock:function(){this.locked++,this.locked==1&&(this.lockedValue_=this.value)},unlock:function(){if(this.locked){this.locked--;if(!this.locked){var e=this.lockedValue_;this.lockedValue_=null,this.value!==e&&this.emit_change(e)}}},compute:function(e,t){t||(t=e,e=null),t||(t=p);var n=this,r=C(e,function(e){R.prototype.set.call(this,t(e,n.value))}),i=t[P]||String(t),s=r.events.concat(i,this.basisObjectId).join("_"),o=j[s];if(!o){var u={};r.destroy=function(e){delete u[e.basisObjectId],this.destroy()},this.addHandler({change:function(){for(var e in u){var n=u[e];R.prototype.set.call(n.value,t(n.object,this.value))}},destroy:function(){for(var e in u){var t=u[e];t.object.removeHandler(r,t.value),t.value.destroy()}u=null,n=null}}),o=j[s]=function(e){var i=e.basisObjectId,s=u[i],o=t(e,n.value);if(!s){var a=new U({value:o});e.addHandler(r,a),s=u[i]={value:a,object:e}}else R.prototype.set.call(s.value,o);return s.value}}return et(o)},pipe:function(e,t){var r=C(e,J),i=t[P]||String(t),s=r.events.join("_")+"_"+i,o=this.pipes_,u;return o?u=o[s]:o=this.pipes_={},u||(u=new V({source:this,pipeId:s,pipeHandler:r}),u.proxy=n.getter(t),this.value instanceof T&&(u.value=u.proxy(this.value),this.value.addHandler(r,u)),o[s]=u,this.link(u,q,!0,u.destroy)),u},as:function(e){if(!e||e===p)return this;typeof e=="string"&&(e=n.getter(e));if(this.links_){var t=this,r=e[P]||String(e);while(t=t.links_){var i=t.context;if(i instanceof U&&i.proxy&&(i.proxy[P]||String(i.proxy))==r)return i}}var s=new U({proxy:e,value:this.value});return this.link(s,I,!0,s.destroy),s},query:function(e){return R.query(this,"value."+e)},deferred:function(){return this.deferred_||(this.deferred_=new X({source:this,value:this.value})),this.deferred_},link:function(e,t,n,r){if(typeof t!="function"){var i=String(t);t=F[i],t||(t=F[i]=function(e){this[i]=e})}return this.links_={value:this,context:e,fn:t,destroy:r||null,links_:this.links_},e instanceof T&&e.addHandler(H,this.links_),n||t.call(e,this.value),e},unlink:function(e,t){var r=this,i;while(i=r,r=r.links_)r.context===e&&(!t||r.fn===t)&&(r.fn=n.fn.$undef,i.links_=r.links_,r.context instanceof T&&r.context.removeHandler(H,r))},destroy:function(){L.prototype.destroy.call(this),this.setNullOnEmitterDestroy&&this.value instanceof T&&this.value.removeHandler(B,this);var e=this.links_;this.links_=null;while(e)e.context instanceof T&&e.context.removeHandler(H,e),e.destroy&&e.destroy.call(e.context),e=e.links_;this.proxy=null,this.initValue=null,this.value=null,this.lockedValue_=null,this.deferred_=null,this.pipes_=null}}),U=l(R,{className:f+".ReadOnlyValue",setNullOnEmitterDestroy:!1,set:n.fn.$false}),z=n.asap.schedule(function(e){e.unlock()}),W={change:function(e){this.isLocked()||(this.lock(),z.add(this)),R.prototype.set.call(this,e.value)},destroy:function(){this.destroy()}},X=l(U,{className:f+".DeferredValue",source:null,init:function(){U.prototype.init.call(this),this.source.addHandler(W,this)},deferred:function(){return this},destroy:function(){z.remove(this),this.source=null,U.prototype.destroy.call(this)}}),V=l(U,{className:f+".PipeValue",source:null,pipeId:null,pipeHandler:null,destroy:function(){var e=this.source,t=e.value;t instanceof T&&t.removeHandler(this.pipeHandler,this),e.pipes_[this.pipeId]=null,this.source=null,this.pipeHandler=null,U.prototype.destroy.call(this)}}),$={},J=function(e){R.prototype.set.call(this,e)};R.from=function(e,t,r){var i;if(!e)return null;if(e instanceof T){r||(r=t,t=null),r||(r=p);var s=C(t,J),o=r[P]||String(r),u=s.events.concat(o,e.basisObjectId).join("_");i=$[u],i||(i=$[u]=new U({proxy:n.getter(r),value:e,emit_destroy:function(){u in $&&(delete $[u],e.removeHandler(s,this)),U.prototype.emit_destroy.call(this)}}),s.destroy=function(){u in $&&(delete $[u],this.destroy())},e.addHandler(s,i))}if(!i){var u=e.basisObjectId,a=e.bindingBridge;u&&a&&(i=$[u],i||(i=$[u]=new U({value:a.get(e),handler:{destroy:function(){$[u]=null,a.detach(e,R.prototype.set,i)}}}),a.attach(e,R.prototype.set,i,i.destroy)))}if(!i)throw new Error("Bad object type");return i};var K=new U({value:undefined}),Q={},G={};R.query=function(e,t){if(arguments.length==1)return t=e,et(function(e){return R.query(e,t)});if(e instanceof T==0)throw new Error("Bad target type");if(typeof t!="string")throw new Error("Path should be a string");var n=Y(e,t.split("."),0),r;return n?(r=R.from(e,n.events,n.getter),n.rest&&(r=r.as(Z(n.rest)).pipe("change","value")),r):K},R.factory=function(e,t){return et(function(r){return R.from(r,e,t)})},R.state=function(e){return e instanceof L?R.from(e,"stateChanged","state"):d.UNDEFINED},R.stateFactory=function(e,t){return R.factory(e,t).pipe("stateChanged","state").as(function(e){return e||d.UNDEFINED})};var ot={},ft=l(L,{className:f+".Object",propertyDescriptors:{delegate:"delegateChanged",target:"targetChanged",root:"rootChanged",data:{nested:!0,events:"update"}},subscribeTo:v.DELEGATE+v.TARGET,data:null,emit_update:N("update","delta")&&function(e){var t=this.delegates_;k.update.call(this,e);while(t)t.delegate&&t.delegate.emit_update(e),t=t.next},emit_stateChanged:function(e){var t=this.delegates_;L.prototype.emit_stateChanged.call(this,e);while(t)t.delegate&&(t.delegate.state=this.state,t.delegate.emit_stateChanged(e)),t=t.next},delegate:null,delegateRA_:null,delegates_:null,emit_delegateChanged:N("delegateChanged","oldDelegate"),target:null,emit_targetChanged:N("targetChanged","oldTarget"),root:null,emit_rootChanged:N("rootChanged","oldRoot"),init:function(){this.root=this,L.prototype.init.call(this);var e=this.delegate,t=this.data;e?(this.delegate=null,this.target=null,this.data=ot,this.setDelegate(e),this.data===ot&&(this.data=t||{})):(t||(this.data={}),this.target!==null&&(this.target=this))},setDelegate:function(e){e=lt(this,this.setDelegate,e,"delegateRA_");if(e&&e instanceof ft){if(e.delegate&&ut(this,e))return!1}else e=null;if(!D(this.delegate,e)){var t=this.state,n=this.data,r=this.delegate,i=this.target,s=this.root,o=this.listen.delegate,u=!1,a;if(r){o&&r.removeHandler(o,this);var f=r.delegates_,l=r;while(f){if(D(f.delegate,this)){f.delegate=null,D(l,r)?r.delegates_=f.next:l.next=f.next;break}l=f,f=f.next}}if(e){this.delegate=e,o&&e.addHandler(o,this),e.delegates_={delegate:this,next:e.delegates_};if(this.data!==ot){a={};for(var c in e.data)c in n==0&&(u=!0,a[c]=undefined);for(var c in n)n[c]!==e.data[c]&&(u=!0,a[c]=n[c])}}else{this.delegate=null,this.target=null,this.root=this,this.data={};for(var c in n)this.data[c]=n[c]}return at(this,s,i),u&&this.emit_update(a),a&&t!==this.state&&(String(t)!=this.state||t.data!==this.state.data)&&this.emit_stateChanged(t),this.emit_delegateChanged(r),!0}return!1},setState:function(e,t){return this.delegate?this.root.setState(e,t):L.prototype.setState.call(this,e,t)},update:function(e){if(this.delegate)return this.root.update(e);if(e){var t={},n=!1;for(var r in e)this.data[r]!==e[r]&&(n=!0,t[r]=this.data[r],this.data[r]=e[r]);if(n)return this.emit_update(t),t}return!1},destroy:function(){L.prototype.destroy.call(this);var e=this.delegates_;this.delegates_=null;while(e)e.delegate.setDelegate(),e=e.next;this.delegate&&this.setDelegate(),this.delegateRA_&&lt(this,!1,!1,"delegateRA_"),this.data=A,this.root=null,this.target=null}}),lt=g(ft),ct=l(ft,{className:f+".Slot"}),ht={destroy:function(){delete this.map[this.id]}},pt=l(L,{className:f+".KeyObjectMap",itemClass:ft,keyGetter:n.getter(p),autoDestroyMembers:!0,map_:null,extendConstructor_:!0,init:function(){this.map_={},L.prototype.init.call(this)},resolve:function(e){return this.get(this.keyGetter(e),e)},create:function(e){var t;return e instanceof ft?t={delegate:e}:t={data:{id:e,title:e}},new this.itemClass(t)},get:function(e,t){var n=e instanceof ft?e.basisObjectId:e,r=this.map_[n];!r&&t&&(r=this.map_[n]={map:this.map_,id:n,item:this.create(e,t)},r.item.addHandler(ht,r));if(r)return r.item},destroy:function(){L.prototype.destroy.call(this);var e=this.map_;this.map_=null;for(var t in e){var n=e[t];this.autoDestroyMembers?n.item.destroy():n.item.removeHandler(ht,n)}}}),mt=l(ft,{className:f+".DatasetWrapper",propertyDescriptors:{dataset:"datasetChanged",itemCount:"itemsChanged","pick()":"itemsChanged","getItems()":"itemsChanged"},active:_,subscribeTo:ft.prototype.subscribeTo+v.DATASET,listen:{dataset:{itemsChanged:function(e,t){this.itemCount=e.itemCount,this.emit_itemsChanged(t)},destroy:function(){this.setDataset()}}},dataset:null,datasetRA_:null,emit_datasetChanged:N("datasetChanged","oldDataset"),emit_itemsChanged:N("itemsChanged","delta"),init:function(){ft.prototype.init.call(this);var e=this.dataset;e&&(this.dataset=null,this.setDataset(e))},setDataset:function(e){e=Et(this,this.setDataset,e,"datasetRA_");if(this.dataset!==e){var t=this.listen.dataset,n=this.dataset,r;t&&(n&&n.removeHandler(t,this),e&&e.addHandler(t,this)),this.itemCount=e?e.itemCount:0,this.dataset=e,(r=vt(n,e))&&this.emit_itemsChanged(r),this.emit_datasetChanged(n)}},has:function(e){return this.dataset?this.dataset.has(e):null},getItems:function(){return this.dataset?this.dataset.getItems():[]},getValues:function(e){return this.dataset?this.dataset.getValues(e):[]},pick:function(){return this.dataset?this.dataset.pick():null},top:function(e){return this.dataset?this.dataset.top(e):[]},forEach:function(e){if(this.dataset)return this.dataset.forEach(e)},destroy:function(){(this.dataset||this.datasetRA_)&&this.setDataset(),ft.prototype.destroy.call(this)}}),gt=l(L,{className:f+".ReadOnlyDataset",propertyDescriptors:{itemCount:"itemsChanged","pick()":"itemsChanged","getItems()":"itemsChanged"},itemCount:0,items_:null,members_:null,cache_:null,emit_itemsChanged:N("itemsChanged","delta")&&function(e){var t,n=0,r=0,i;if(t=e.inserted)while(i=t[n])this.items_[i.basisObjectId]=i,n++;if(t=e.deleted)while(i=t[r])delete this.items_[i.basisObjectId],r++;this.itemCount+=n-r,this.cache_=n==this.itemCount?e.inserted:null,k.itemsChanged.call(this,e)},init:function(){L.prototype.init.call(this),this.members_={},this.items_={}},has:function(e){return!!e&&!!this.items_[e.basisObjectId]},getItems:function(){return this.cache_||(this.cache_=h(this.items_)),this.cache_},getValues:function(e){return this.getItems().map(n.getter(e||p))},pick:function(){for(var e in this.items_)return this.items_[e];return null},top:function(e){var t=[];if(e)for(var n in this.items_)if(t.push(this.items_[n])>=e)break;return t},forEach:function(e){var t=this.getItems();for(var n=0;n<t.length;n++)e(t[n])},destroy:function(){yt.preventAccumulations(this),L.prototype.destroy.call(this),this.cache_=O,this.itemCount=0,this.members_=null,this.items_=null}}),yt=l(gt,{className:f+".Dataset",listen:{item:{destroy:function(e){this.remove([e])}}},init:function(){gt.prototype.init.call(this);var e=this.items;e&&(this.items=null,this.set(e))},add:function(e){var t=this.members_,n=this.listen.item,r=[],i;e&&!Array.isArray(e)&&(e=[e]);for(var s=0;s<e.length;s++){var o=e[s];if(o instanceof ft){var u=o.basisObjectId;t[u]||(t[u]=o,n&&o.addHandler(n,this),r.push(o))}}return r.length&&this.emit_itemsChanged(i={inserted:r}),i},remove:function(e){var t=this.members_,n=this.listen.item,r=[],i;e&&!Array.isArray(e)&&(e=[e]);for(var s=0;s<e.length;s++){var o=e[s];if(o instanceof ft){var u=o.basisObjectId;t[u]&&(n&&o.removeHandler(n,this),delete t[u],r.push(o))}}return r.length&&this.emit_itemsChanged(i={deleted:r}),i},set:function(e){if(!this.itemCount)return this.add(e);if(!e||!e.length)return this.clear();var t=this.members_,n=this.listen.item,r={},i=[],s=[],o,u,a;for(var f=0;f<e.length;f++)o=e[f],o instanceof ft&&(u=o.basisObjectId,r[u]=o,t[u]||(t[u]=o,n&&o.addHandler(n,this),s.push(o)));for(var u in t)r[u]||(o=t[u],n&&o.removeHandler(n,this),delete t[u],i.push(o));return(a=dt(s,i))&&this.emit_itemsChanged(a),a},sync:function(e){return this.setAndDestroyRemoved(e)},setAndDestroyRemoved:function(e){var t=this.set(e)||{},n=t.deleted;yt.setAccumulateState(!0);if(n)for(var r=0,i;i=n[r];r++)i.destroy();return yt.setAccumulateState(!1),t.inserted},clear:function(){yt.flushChanges(this);var e=this.getItems(),t=this.listen.item,n;if(e.length){if(t)for(var r=0;r<e.length;r++)e[r].removeHandler(t,this);this.emit_itemsChanged(n={deleted:e}),this.members_={}}return n},destroy:function(){this.clear(),gt.prototype.destroy.call(this)}}),bt={datasetChanged:E,destroy:S};(function(){function u(e){o.call(e.dataset,e)}function a(){function n(t){var n=i[t];n&&(i[t]=null,n!==e&&u(n))}var i=r,s=t.emit_itemsChanged;t.emit_itemsChanged=function(e){n(this.basisObjectId),s.call(this,e)},r={};for(var o in i)n(o);t.emit_itemsChanged=s}function f(e){var t=this,n=t.basisObjectId,i=e.inserted,s=e.deleted,a=r[n];if(i&&s||a&&a.mixed){a&&(r[n]=null,u(a)),o.call(t,e);return}if(a){var f=i?"inserted":"deleted",l=a[f];if(!l){var h=i?"deleted":"inserted",p=a[h],d={},v=i||s,m=[],g=0;for(var y=0;y<p.length;y++)d[p[y].basisObjectId]=y;for(var y=0;y<v.length;y++){var b=v[y].basisObjectId;b in d==0?m.push(v[y]):(g||(p=c.call(p)),g++,p[d[b]]=null)}g&&(g<p.length?p=p.filter(Boolean):p=null,a[h]=p),m.length?(a[f]=m,p&&(a.mixed=!0)):(m=null,p||(r[n]=null))}else l.push.apply(l,i||s);return}r[n]={inserted:i,deleted:s,dataset:t,mixed:!1}}function l(){s=null,i&&(i=0,h())}function h(){t.emit_itemsChanged=o,a()}var e={},t=gt.prototype,r={},i=0,s,o;yt.flushChanges=function(e){var t=r[e.basisObjectId];t&&u(t),r[e.basisObjectId]=null},yt.preventAccumulations=function(t){var n=r[t.basisObjectId];n&&n!==e&&o.call(n.dataset,n),r[t.basisObjectId]=e},yt.setAccumulateState=function(e){e?(i==0&&(o=t.emit_itemsChanged,t.emit_itemsChanged=f,s||(s=n.setImmediate(l))),i++):(i-=i>0,i==0&&h())}})(),t.exports={STATE:d,SUBSCRIPTION:v,AbstractData:L,Value:R,ReadOnlyValue:U,DeferredValue:X,PipeValue:V,Object:ft,Slot:ct,KeyObjectMap:pt,ReadOnlyDataset:gt,Dataset:yt,DatasetWrapper:mt,isEqual:D,chainValueFactory:et,isConnected:ut,getDatasetDelta:vt,ResolveAdapter:b,createResolveFunction:g,resolveValue:y,resolveObject:lt,resolveDataset:Et,wrapData:St,wrapObject:xt,wrap:Tt}},"3.js":function(e,t,n,r,i,s,o,u,a){var f=Object.prototype.hasOwnProperty,l=n.object.values,c={},h={priority:[],values:{},add:function(e,t){var n=e,r=e.toLowerCase();h[n]=r,c[r]=n,this.values[r]=n,t?t=this.priority.indexOf(t):t=-1,t==-1?this.priority.push(r):this.priority.splice(t,0,r)},getList:function(){return l(c)},isValid:function(e){return f.call(c,e)}};h.add("READY"),h.add("DEPRECATED"),h.add("UNDEFINED"),h.add("ERROR"),h.add("PROCESSING"),t.exports=h},"4.js":function(e,t,n,r,i,s,o,u,a){function h(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}var f={},l=1,c={},p={NONE:0,ALL:0,add:function(e,t,n){f[l]={handler:t,action:n},p[e]=l,p.ALL|=l,l<<=1},addProperty:function(e,t){var n={};n[t||e+"Changed"]=function(t,n){n&&p.unlink(e,t,n),t[e]&&p.link(e,t,t[e])},this.add(e.toUpperCase(),n,function(t,n){n[e]&&t(e,n,n[e])})},getMaskConfig:function(e){var t=c[e];if(!t){var n=[],r={},i=1;t=c[e]={actions:n,handler:r};while(e){if(e&1){var s=f[i];n.push(s.action);for(var o in s.handler)r[o]=r[o]?h(r[o],s.handler[o]):s.handler[o]}i<<=1,e>>=1}}return t},link:function(e,t,n){var r=e+t.basisObjectId,i=n.subscribers_;i||(i=n.subscribers_={});if(!i[r]){i[r]=t;var s=n.subscriberCount+=1;s==1&&n.emit_subscribersChanged(1)}},unlink:function(e,t,n){var r=e+t.basisObjectId,i=n.subscribers_;if(i&&i[r]){delete i[r];var s=n.subscriberCount-=1;s==0&&(n.emit_subscribersChanged(-1),n.subscribers_=null)}},subscribe:function(e,t){var n=this.getMaskConfig(t);for(var r=0,i;i=n.actions[r];r++)i(p.link,e);e.addHandler(n.handler)},unsubscribe:function(e,t){var n=this.getMaskConfig(t);for(var r=0,i;i=n.actions[r++];)i(p.unlink,e);e.removeHandler(n.handler)},changeSubscription:function(e,t,n){var r=t^n;if(r){var i=p.getMaskConfig(t),s=p.getMaskConfig(n);e.removeHandler(i.handler),e.addHandler(s.handler);var o=1;while(r){if(r&1){var u=f[o];t&o?u.action(p.unlink,e):u.action(p.link,e)}o<<=1,r>>=1}}}};t.exports=p},"1w.js":function(e,t,n,r,i,s,o,u,a){function d(e,t){function r(e,t){for(var n=0;n<h[e].length;n++)h[e][n].apply(null,t)}var i=f.query(e,"data.sessionId"),s=f.query(e,"data.online"),o=f.query(e,"delegate.sources.publisher.delegate").as(Boolean),u=new f({value:!1}),a=new l(o,u,function(e,t){return e&&t}),c,h={data:[],session:[],connection:[]},d=io("",{transports:["websocket","polling"]}).on("connect",function m(){d.emit("rempl:connect to publisher",e.data.endpointId,e.data.name,function(e){e?c=setTimeout(m,2e3):u.set(!0)})}).on("disconnect",function(){u.set(!1)}).on("rempl:to subscriber",function(){r("data",arguments)});i.link(h,function(e){r("session",[e])}),s.link(h,function(e){r("connection",[e])});var v=p(t,function(e){h.data.push(e.send),e.subscribe(function(){d.emit.apply(d,["rempl:to publisher"].concat(n.array(arguments)))})});return a.link(v,v.setConnected),function(){clearTimeout(c),u.destroy(),i.unlink(h),s.unlink(h),v.destroy(),v=null,d.close(),d=null}}var f=n.require("./2.js").Value,l=n.require("./p.js").Expression,c=n.require("./7.js").Node,h=n.require("./17.js"),p=n.require("./1z.js");t.exports=new c({destroySandbox:null,loading:new n.Token(!1),error:new n.Token(!1),template:n.template.get(".4"),binding:{hasPublisher:f.query("data.id").as(Boolean),nonExclusiveMode:h.exclusivePublisher.as(n.bool.invert),loading:"loading",error:"error",online:"data:",title:"data:",isBrowser:f.query("data.type").as(function(e){return e=="browser"}),isNode:f.query("data.type").as(function(e){return e=="node"}),location:"data:",pid:"data:",frame:"satellite:"},action:{drop:function(){this.owner.dropSelection()}},handler:{update:function(e,t){"id"in t?this.syncUI():"online"in t&&this.data.online&&this.error.value&&this.syncUI()}},syncUI:function(){typeof this.destroySandbox=="function"&&(this.destroySandbox(),this.destroySandbox=null),this.data.id&&(this.loading.set(!0),this.error.set(),h.getPublisherUI(this.data.id,function(e,t,n){this.loading.set(!1),e?this.error.set(e):this.destroySandbox=d(this,{type:t,content:n,container:this.tmpl.frameWrapper})}.bind(this)))}})},"p.js":function(e,t,n,r,i,s,o,u,a){var f=n.require("./1x.js"),l=n.require("./1y.js");t.exports={ObjectSet:f,Expression:l,expression:l.create}},"1x.js":function(e,t,n,r,i,s,o,u,a){var f=n.cleaner,l=n.require("./2.js"),c=l.AbstractData,h=l.Value,p=l.STATE,d=p.priority,v={stateChanged:function(){this.fire(!1,!0)},update:function(){this.fire(!0)},change:function(){this.fire(!0)},destroy:function(e){this.remove(e)}},m=n.asap.schedule(function(e){e.update()});t.exports=h.subclass({className:"basis.data.value.ObjectSet",objects:null,value:0,valueChanged_:!1,calculateValue:function(){return this.value+1},calculateOnInit:!1,statePriority:d,stateChanged_:!0,init:function(){h.prototype.init.call(this);var e=this.objects;this.objects=[],e&&Array.isArray(e)&&(this.lock(),this.add.apply(this,e),this.unlock()),this.valueChanged_=this.stateChanged_=!!this.calculateOnInit,this.update()},add:function(){for(var e=0,t=arguments.length;e<t;e++){var r=arguments[e];r instanceof c&&n.array.add(this.objects,r)&&r.addHandler(v,this)}this.fire(!0,!0)},remove:function(e){n.array.remove(this.objects,e)&&e.removeHandler(v,this),this.fire(!0,!0)},clear:function(){for(var e=0,t;t=this.objects[e];e++)t.removeHandler(v,this);this.objects.length=0,this.fire(!0,!0)},fire:function(e,t){this.locked||(this.valueChanged_=this.valueChanged_||!!e,this.stateChanged_=this.stateChanged_||!!t,(this.valueChanged_||this.stateChanged_)&&m.add(this))},lock:function(){this.locked=!0},unlock:function(){this.locked=!1},update:function(){var e=this.valueChanged_,t=this.stateChanged_;this.valueChanged_=!1,this.stateChanged_=!1,m.remove(this);if(!f.globalDestroy){e&&this.set(this.calculateValue());if(t){var n=this.objects.length;if(!n)this.setState(p.UNDEFINED);else{var r=-2,i;for(var s=0;s<n;s++){var o=this.objects[s],u=this.statePriority.indexOf(String(o.state));u>r&&(i=o,r=u)}i&&this.setState(i.state,i.state.data)}}}},destroy:function(){this.lock(),this.clear(),m.remove(this),h.prototype.destroy.call(this)}})},"1y.js":function(e,t,n,r,i,s,o,u,a){function y(){var e=arguments.length-1,t=arguments[e],n=new Array(e);if(typeof t!="function")throw new Error(h+": Last argument of constructor must be a function");for(var r=0;r<e;r++){var i=n[r]=arguments[r];if(!i.bindingBridge)throw new Error(h+": bb-value required");i.bindingBridge.attach(i,d,this,v)}return this.calc_=t,this.values_=n,this.update(),this}var f=n.require("./2.js"),l=f.Value,c=f.ReadOnlyValue,h="basis.data.Expression",p={},d=function(){g.add(this)},v=function(){this.destroy()},m=function(e){return e.bindingBridge.get(e)},g=n.asap.schedule(function(e){e.update()}),b=c.subclass({className:h,calc_:null,values_:null,extendConstructor_:!1,init:function(e){c.prototype.init.call(this);if(e===p)return;y.apply(this,arguments)},update:function(){g.remove(this),l.prototype.set.call(this,this.calc_.apply(null,this.values_.map(m)))},destroy:function(){g.remove(this);for(var e=0,t;t=this.values_[e];e++)t.bindingBridge.detach(t,d,this);c.prototype.destroy.call(this)}});b.create=function(){return y.apply(new b(p),arguments)},t.exports=b},"1z.js":function(e,t,n,r,i,s,o,u,a){var f=n.require("./20.js").isNode;t.exports=f?function(){throw new Error("[rempl] createSundbox() doesn't supported on node.js")}:n.require("./21.js")},"20.js":function(e,t,n,r,i,s,o,u,a){function l(e,t){for(var n in t)n in e==0&&(e[n]=t[n]);return e}function c(e,t){return Array.prototype.slice.call(e,t)}function h(e){function t(e){return Math.round(e).toString(36)}var n=t(10+25*Math.random());e||(e=16);while(n.length<e)n+=t(new Date*Math.random());return n.substr(0,e)}function p(e,t){return e.push(t),function(){var n=e.indexOf(t);n!==-1&&e.splice(n,1)}}var f=typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]"&&Object.prototype.toString.call(r.self)!=="[object Window]",d=function(){var e=r.console,t={log:function(){},info:function(){},warn:function(){},error:function(){}};if(e)for(var n in t)t[n]="bind"in Function.prototype&&typeof e[n]=="function"?Function.prototype.bind.call(e[n],e):function(){Function.prototype.apply.call(e[n],e,arguments)};return t}();t.exports={isNode:f,complete:l,slice:c,genUID:h,subscribe:p,log:d.log,info:d.info,warn:d.warn,error:d.error}},"21.js":function(e,t,n,r,i,s,o,u,a){var f=n.require("./22.js"),l=n.require("./20.js"),c=new WeakMap;parent!==self&&addEventListener("message",function(e){var t=e.data||{};t.to==="rempl-env-publisher:connect"&&c.set(e.source,t)}),t.exports=function(t,n){function r(e){if(t.type==="script")for(var r in t.content)e.eval(t.content[r]+"\n//# sourceURL="+r);if(parent!==self&&e!==self){var i=NaN,s=NaN;o&&removeEventListener("message",o,!0),addEventListener("message",o=function(t){var n=t.data||{};switch(n.to){case"rempl-env-subscriber:connect":case i:s=n.from,e.postMessage(n,"*");break;case"rempl-env-publisher:connect":case s:i=n.from,parent.postMessage(n,"*")}},!0);if(t.type!=="script"){var l=c.get(e);l&&(i=l.from,parent.postMessage(l,"*"))}}u=f.get("rempl-sandbox","rempl-subscriber",e).onInit({},function(e){n(e)}),a&&u.ownEndpoints.set(["*"])}var i=null,s=null,o=null,u=null,a=!1;return t=t||{},t.window?r(t.window):(s=document.createElement("iframe"),s.name=l.genUID(),s.onload=function(){r(s.contentWindow)},t.type==="url"?s.src=t.content:s.srcdoc="<!doctype html>",(t.container||document.documentElement).appendChild(s)),{setConnected:function(e){a=Boolean(e),u&&u.ownEndpoints.set(a?["*"]:[])},destroy:function(){removeEventListener("message",o,!0),u&&u.ownEndpoints.set([]),i!==null&&(i(),i=null),s!==null&&(s.parentNode.removeChild(s),s.setAttribute("srcdoc",""),s.setAttribute("src",""),s=null)}}}},"22.js":function(e,t,n,r,i,s,o,u,a){function m(e,t,n){m.all.push(this),this.name=e,this.connectTo=t,this.inputChannelId=e+":"+p.genUID(),this.connections=Object.create(null),this.connected=new l(!1),this.endpointGetUI={},this.ownEndpoints=new c,this.remoteEndpoints=new h,this.ownEndpoints.on(function(e){this.connected.value&&this.send({type:"endpoints",data:[e]})},this),this.initCallbacks=[],this.dataCallbacks=[],this.sendCallbacks={},this.inited=!1,this.onInit=this.onInit.bind(this),this.window=n||r;if(typeof this.window.postMessage!="function"||typeof addEventListener!="function"){p.warn(v+"Event (postMessage) transport isn't supported");return}addEventListener("message",function(e){this._onMessage(e)}.bind(this),!1),this._handshake(!1)}var f=Object.prototype.hasOwnProperty,l=n.require("./23.js"),c=n.require("./24.js"),h=n.require("./25.js"),p=n.require("./20.js"),d=!1,v="[rempl][event-transport] ";m.all=[],m.get=function(e,t,n){n||(n=r);for(var i=0;i<m.all.length;i++){var s=m.all[i];if(s.connectTo===t&&s.window===n&&s.name===e)return s}return new m(e,t,n)},m.prototype={_handshake:function(e){this._send(this.connectTo+":connect",{initiator:this.name,inited:e,endpoints:this.ownEndpoints.value})},_onMessage:function(e){var t=e.data||{},n=t.payload||{};if(e.source!==this.window||e.target!==r)return;switch(t.to){case this.name+":connect":n.initiator===this.connectTo&&this._onConnect(t.from,n);break;case this.inputChannelId:t.from in this.connections?this._onData(t.from,n):p.warn(v+"unknown incoming connection",t.from)}},_onConnect:function(e,t){t.inited||this._handshake(!0);if(e in this.connections==0){var n=new c(t.endpoints);this.remoteEndpoints.add(n),this.connections[e]={ttl:Date.now(),endpoints:n},this._send(e,{type:"connect",endpoints:this.ownEndpoints.value})}this.inited=!0},_onData:function(e,t){d&&p.log(v+"receive from "+this.connectTo,t.type,t);switch(t.type){case"connect":this.connections[e].endpoints.set(t.endpoints),this.connected.set(!0),this.initCallbacks.splice(0).forEach(function(e){this.onInit.apply(this,e)},this);break;case"endpoints":this.connections[e].endpoints.set(t.data[0]);break;case"disconnect":this.connections[e].endpoints.set([]),this.connected.set(!1);break;case"callback":f.call(this.sendCallbacks,t.callback)&&(this.sendCallbacks[t.callback].apply(null,t.data),delete this.sendCallbacks[t.callback]);break;case"data":var n=Array.prototype.slice.call(t.data),r=t.callback;r&&(n=n.concat(this._wrapCallback(e,r))),this.dataCallbacks.forEach(function(e){e.endpoint===t.endpoint&&e.fn.apply(null,n)});break;case"getRemoteUI":f.call(this.endpointGetUI,t.endpoint)?this.endpointGetUI[t.endpoint](t.data[0]||!1,t.callback?this._wrapCallback(e,t.callback):Function):(p.warn(v+"receive unknown endpoint for getRemoteUI(): "+t.endpoint),this._wrapCallback(e,t.callback)("Wrong endpoint ‚Äì "+t.endpoint));break;default:p.warn(v+"Unknown message type `"+t.type+"` for `"+this.name+"`",t)}},_wrapCallback:function(e,t){return function(){this._send(e,{type:"callback",callback:t,data:Array.prototype.slice.call(arguments)})}.bind(this)},_send:function(e,t){d&&p.log(v+"emit event",e,t),typeof this.window.postMessage=="function"&&this.window.postMessage({from:this.inputChannelId,to:e,payload:t},"*")},subscribeToEndpoint:function(e,t){return p.subscribe(this.dataCallbacks,{endpoint:e,fn:t})},sendToEndpoint:function(e,t){var n=Array.prototype.slice.call(arguments,2),r=!1;n.length&&typeof n[n.length-1]=="function"&&(r=p.genUID(),this.sendCallbacks[r]=n.pop()),this.send({type:t,endpoint:e,data:n,callback:r})},send:function(e){for(var t in this.connections)this._send(t,e)},onInit:function(e,t){var n=e.id||null;return n&&(this.ownEndpoints.set(this.ownEndpoints.value.concat(n)),typeof e.getRemoteUI=="function"&&(this.endpointGetUI[n]=e.getRemoteUI)),this.inited?t({connected:this.connected,getRemoteUI:this.sendToEndpoint.bind(this,n,"getRemoteUI"),subscribe:this.subscribeToEndpoint.bind(this,n),send:this.sendToEndpoint.bind(this,n,"data")}):this.initCallbacks.push(arguments),this},sync:function(e){var t=p.genUID(8)+":"+this.connectTo,n=this.remoteEndpoints;return this.onInit(e,function(r){r.subscribe(e.processInput),r.connected.link(function(i){e.setupChannel(t,r.send,n,i)})}),this}},t.exports=m},"23.js":function(e,t,n,r,i,s,o,u,a){var f=function(e){this.value=e};f.prototype={handler:null,set:function(e){this.value!==e&&(this.value=e,this.apply())},get:function(){return this.value},on:function(e,t){var n=this;while(n=n.handler)n.fn===e&&n.context===t&&console.warn("Token#on: duplicate fn & context pair");this.handler={fn:e,context:t,handler:this.handler}},link:function(e,t){this.on(e,t),e.call(t,this.value)},off:function(e,t){var n=this,r;while(r=n,n=n.handler)if(n.fn===e&&n.context===t){n.fn=function(){},r.handler=n.handler;return}console.warn("Token#off: fn & context pair not found, nothing was removed")},apply:function(){var e=this;while(e=e.handler)e.fn.call(e.context,this.value)}},t.exports=f},"24.js":function(e,t,n,r,i,s,o,u,a){function l(e,t){var n;return Array.isArray(t)||(t=[]),t=t.filter(function(e,t,n){return t===0||n.lastIndexOf(e,t-1)===-1}),n=t.length!==e.length||t.some(function(t){return e.indexOf(t)===-1}),n?t:e}function c(e){f.call(this,l([],e))}var f=n.require("./23.js");c.prototype=Object.create(f.prototype),c.prototype.set=function(e){return f.prototype.set.call(this,l(this.value,e))},t.exports=c},"25.js":function(e,t,n,r,i,s,o,u,a){function l(){this.endpointLists=[],f.call(this,[])}var f=n.require("./24.js");l.prototype=Object.create(f.prototype),l.prototype.set=function(){return f.prototype.set.call(this,this.endpointLists.reduce(function(e,t){return e.concat(t.value)},[]))},l.prototype.add=function(e){var t=this.endpointLists.indexOf(e);t===-1&&(this.endpointLists.push(e),e.on(this.set,this),this.set())},l.prototype.remove=function(e){var t=this.endpointLists.indexOf(e);t!==-1&&(this.endpointLists.splice(t,1),e.off(this.set,this),this.set())},t.exports=l},"5.js":function(e,t,n,r,i,s,o,u,a){function l(){this.fn.call(this.context,this.source)}function m(e){return function t(n,r,i,s,o){var u=n[s]||null,a=null;r!==l&&typeof i=="function"&&(i=i.call(o||n,o||n)),i&&i.bindingBridge&&(!u||u.source!==i?a=new h(n,r,i,p):a=u,i=t(a,l,i.bindingBridge.get(i),"next")),i instanceof e==0&&(i=null);if(s&&u!==a){var f=u;while(f){var c=f;c.detach(),f=c.next,c.next=null}a&&a.attach(d),n[s]=a}return i}}function g(e,t,r,i,s){var o=e[i]||null,u=null;r&&t!==l&&n.fn.isFactory(r)&&(r=r.call(s||e,s||e)),r&&r.bindingBridge&&(!o||o.source!==r?u=new h(e,t,r,p):u=o,r=g(u,l,r.bindingBridge.get(r),"next"));if(i&&o!==u){var a=o;while(a){var f=a;f.detach(),a=f.next,f.next=null}u&&u.attach(v),e[i]=u}return r}var f={},c=function(e,t,n,r){this.context=e,this.fn=t,this.source=n,this.handler=r};c.prototype={context:null,fn:null,source:null,handler:null,next:null,attach:function(){this.source.addHandler(this.handler,this)},detach:function(){this.source.removeHandler(this.handler,this)}};var h=function(){c.apply(this,arguments)};h.prototype=new c,h.prototype.attach=function(e){this.source.bindingBridge.attach(this.source,this.handler,this,e)},h.prototype.detach=function(){this.source.bindingBridge.detach(this.source,this.handler,this)};var p=function(){this.fn.call(this.context,this.source)},d=function(){this.fn.call(this.context,null)},v=function(){this.fn.call(this.context,g(f,null,this.source.bindingBridge.get(this.source)))};t.exports={DEFAULT_CHANGE_ADAPTER_HANDLER:p,DEFAULT_DESTROY_ADAPTER_HANDLER:d,ResolveAdapter:c,BBResolveAdapter:h,createResolveFunction:m,resolveValue:g}},"1a.js":function(e,t,n,r,i,s,o,u,a){t.exports=function(t,n){var r={},i;t&&t.length&&(i=r.inserted=t),n&&n.length&&(i=r.deleted=n);if(i)return r}}};(function n(r,i,s){function m(e){function t(e){return Math.round(e).toString(36)}var n=t(10+25*Math.random());e||(e=16);while(n.length<e)n+=t(new Date*Math.random());return n.substr(0,e)}function y(e,t){for(var n in t)e[n]=t[n];return e}function b(e,t){for(var n in t)n in e==0&&(e[n]=t[n]);return e}function w(e){var t=[];for(var n in e)t.push(n);return t}function E(e){var t=[];for(var n in e)t.push(e[n]);return t}function S(e,t){var n={};if(!t)return y(n,e);for(var r=0,i;i=t[r++];)i in e&&(n[i]=e[i]);return n}function x(e,t){var n={};if(!t)return y(n,e);for(var r=0,i;i=t[r++];)i in e&&(n[i]=e[i],delete e[i]);return n}function T(){var e={};for(var t=0;t<arguments.length;t++)y(e,arguments[t]);return e}function N(e,t,n){var r=[];for(var i in e)r.push(t.call(n,i,e[i]));return r}function C(e){return e==undefined}function k(e){return e!=undefined}function L(e){return e==null||e==undefined}function A(e){return e!=null&&e!=undefined}function O(e){return e===this}function M(e){return e!==this}function _(e){return e}function D(e){return function(){return e}}function P(){return!1}function H(){return!0}function B(){return null}function j(){}function q(e){return function(t){var n={};return n[e]=t,n}}function R(e,t){var n=0,r,i;return r=function(){return n++||(r.inited=!0,r.data=i=e.apply(t||this,arguments)),i}}function U(e,t,n){var r=0,i,s;return i=function(){return r++||(i.inited=!0,i.data=s=e.call(n||this)),t.apply(s,arguments),s}}function z(e,t){var n=0;return function(){if(!(n++))return e.apply(t||this,arguments)}}function W(e){typeof e!="function"&&(e=F(e));var t=function(t){return e(t)};return t.factory=d,t}function X(e){return typeof e=="function"&&e.factory===d}function V(e,t){var n="basisjsCallback"+m();return u[n]=t?e:function(){try{delete u[n]}catch(t){u[n]=undefined}return e.apply(this,arguments)},n}function tt(){var e=s;if(!e)if(c)Z=a.basisjsFilename;else{var t=f.scripts;for(var n=0,r;r=t[n];n++){var i=r.hasAttribute("basis-config")?r.getAttribute("basis-config"):r.getAttribute("data-basis-config");r.removeAttribute("basis-config"),r.removeAttribute("data-basis-config");if(i!==null){Z=Y.normalize(r.src);try{e=Function("return{"+i+"}")()}catch(o){}break}}Z||(Z=Y.normalize(t[0].src))}return nt(e)}function nt(e){e=S(e),b(e,{implicitExt:c?!0:!1});var t=[],n=T(e.path,e.modules,{basis:Z});e.modules={};if(e.autoload){var r=String(e.autoload).match(/^((?:[^\/]*\/)*)([a-z$_][a-z0-9$_]*)((?:\.[a-z$_][a-z0-9$_]*)*)$/i);r&&(n[r[2]]={autoload:!0,filename:r[1]+r[2]+(r[3]||".js")}),delete e.autoload}for(var i in n){var s=n[i];typeof s=="string"&&(s={filename:s.replace(/\/$/,"/"+i+".js")});var o=s.filename,u=s.path;o&&!u&&(o=Y.resolve(o),u=o.substr(0,o.length-Y.extname(o).length),o="../"+Y.basename(o)),u=Y.resolve(u),!o&&u&&(o=Y.basename(u),u=Y.dirname(u)),Y.extname(o)||(o+=".js"),o=Y.resolve(u,o),e.modules[i]={path:u,filename:o},s.autoload&&(e.autoload=t,t.push(i))}return e}function ht(e){var t=lt[e.url];if(t)for(var n=0;n<t.length;n++)t[n](e.get(),e.url)}function gt(e,t,n){try{return new Function(t,'"use strict";\n'+n)}catch(r){$.error("Compilation error at "+e+("line"in r?":"+(r.line-1):"")+": "+r)}}function Tt(e){if(e in wt==0){var t=e.split("."),n=t.shift(),r=pt(n+":"+t.join("/")+".js").replace(/\/\.js$/,".js");wt[e]=r,Et[r]=e}return wt[e]}function Nt(e){var t=bt[e];return t||(t=bt[e]=new xt(e),t.namespaces_={},t.namespaces_[e]=t,et.noConflict||(u[e]=t)),t}function Ct(e){if(p.call(bt,e))return bt[e];e=e.split(".");var t=Nt(e[0]),n=t;for(var r=1;r<e.length;r++){var i=e[r],s=e.slice(0,r+1).join(".");if(!p.call(t.namespaces_,s)){var o=new xt(s);et.implicitExt&&(n[i]=o),t.namespaces_[s]=o}n=t.namespaces_[s]}return bt[e.join(".")]=n,n}function Lt(e,t){!/[^a-z0-9_\.]/i.test(e)&&Y.extname(e)!=".js"?e=Tt(e):e=pt(e,null,"basis.patch('{url}')"),lt[e]?lt[e].push(t):lt[e]=[t];var n=mt.get(e);n&&n.isResolved()&&t(n.get(),n.url)}function At(e,t){if(e!=null){var n=e.length;if(typeof n=="undefined"||h.call(e)=="[object Function]")return[e];t||(t=0);if(n-t>0){for(var r=[],i=0,s=t;s<n;)r[i++]=e[s++];return r}}return[]}function Ot(e,t,n){var r=[],i=typeof t=="function";for(var s=0;s<e;s++)r[s]=i?t.call(n,s,r):t;return r}var o="1.10.2",u=Function("return this")(),a=u.process,f=u.document,l=u.location,c=u!==r&&a&&a.argv?u:!1,h=Object.prototype.toString,p=Object.prototype.hasOwnProperty,d={},v={},g=function(){return function(){}}(),F=function(){function u(t){var i=this,o,a,c;if(typeof t=="function"||typeof t=="string"){o=f(t,i[n]),c=e+o[n];if(p.call(i,c))return i[c];typeof o[r]=="function"&&(o=o[r]),a=function(e){return o(i(e))}}else{var h=t;if(!h)return I;a=function(e){return h[i(e)]}}return a[n]=s++,a[r]=t,a.__extend__=l,a.as=u,c&&(i[c]=a),a}function a(e){return new Function("object","return object != null ? object."+e+" : object")}function f(e,t){var i=e,f;if(e&&typeof e=="string"){if(p.call(o,e))return o[e];i=o[e]=a(e)}return typeof i!="function"?I:i.__extend__===l?i:p.call(i,t)?i[t]:(f=i[t]=i!==e?i:function(e){return i(e)},f[n]=s++,f[r]=e,f.__extend__=l,f.as=u,f)}function l(e,n){var r=e&&e!==I?f(e,t):I;return n||n===""?(typeof n=="string"&&(n=Bt.formatter(n)),r.as(n)):r}var e="basisGetterId"+m()+"_",t=e+"root",n=e,r=e+"base",i=e+"parent",s=1,o={};return l.ID=n,l.SOURCE=r,l.PARENT=i,l}(),I=function(){var e=function(){};return e[F.ID]=F.ID+"nullGetter",e.__extend__=F,e.as=function(){return e},e}(),$=function(){var e=u.console,t={log:j,info:j,warn:j,error:j};return e&&N(t,function(n){t[n]="bind"in Function.prototype&&typeof e[n]=="function"?Function.prototype.bind.call(e[n],e):function(){Function.prototype.apply.call(e[n],e,arguments)}}),t}(),J=u.setImmediate||u.msSetImmediate,K=u.clearImmediate||u.msSetImmediate;J&&(J=J.bind(u)),K&&(K=K.bind(u)),J||function(){var e=function(){var e={},n=0;return J=function(r){if(typeof r!="function")return;return e[++n]={fn:r,args:At(arguments,1)},t(n),n},K=function(t){delete e[t]},function(t){var n=e[t];n&&(delete e[t],n.fn.apply(undefined,n.args)),Q.process()}}(),t=function(t){setTimeout(function(){e(t)},0)};if(c&&c.process&&typeof a.nextTick=="function")t=function(t){a.nextTick(function(){e(t)})};else{var n=u.postMessage&&!u.importScripts;if(n){var r=u.onmessage;u.onmessage=function(){n=!1},u.postMessage("","*"),u.onmessage=r}if(n){var i={},s=function(t){if(t&&t.source==u){var n=t.data;if(p.call(i,n)){var r=i[n];delete i[n],e(r)}}};u.addEventListener?u.addEventListener("message",s,!0):u.attachEvent("onmessage",s),t=function(e){var t=m(32);i[t]=e,u.postMessage(t,"*")}}else if(u.MessageChannel){var o=new u.MessageChannel;o.port1.onmessage=function(t){e(t.data)},t=function(e){o.port2.postMessage(e)}}else{var l=function(){return f.createElement("script")};if(f&&"onreadystatechange"in l()){var h=t;t=function d(n){typeof Ut!="undefined"&&(t=h,Ut.head.ready(function(){t=function(t){var n=l();n.onreadystatechange=function(){n.onreadystatechange=null,Ut.remove(n),n=null,e(t)},Ut.head.add(n)}})),t===d?h(n):t(n)}}}}}();var Q=function(){function r(){try{t=!0;var r;while(r=e.shift())r.fn.call(r.context)}finally{t=!1,e.length&&(n=J(i))}}function i(){n&&(n=K(n)),e.length&&r()}var e=[],t=!1,n,s=function(t,r){return e.push({fn:t,context:r}),n||(n=J(i)),!0};return s.process=function(){t||i()},s.schedule=function(e){function r(){var i=J(r);n=!1;for(var s in t){var o=t[s];delete t[s],e(o)}K(i),n||(t={})}var t={},n=!1;return{add:function(e){t[e.basisObjectId]=e,n||(n=s(r))},remove:function(e){delete t[e.basisObjectId]}}},s}(),G=function(){var e=0,t={id:e,start:function(){t.id=e++},finish:function(){Q.process(),t.id="unknown"}};return t}(),Y=function(){var e=/^([^\/]+:|\/)/,t=/^[a-zA-Z0-9\-]+:\/?/,n=/^(?:[a-zA-Z0-9\-]+:)?\/\/[^\/]+\/?/,r=/[\?#].*$/,i,s,o;if(c){var u=(a.basisjsBaseURI||"/").replace(/\\/g,"/");i=u.replace(/^[^\/]*/,""),s=u.replace(/\/.*/,"")}else i=l.pathname.replace(/[^\/]+$/,""),s=l.protocol+"//"+l.host;return o={baseURI:i,origin:s,normalize:function(e){e=(e||"").replace(t,"/").replace(n,"/").replace(r,"");var i=[],s=e.split("/");for(var o=0;o<s.length;o++)s[o]==".."?(i.length>1||i[0])&&i.pop():(s[o]||!o)&&s[o]!="."&&i.push(s[o]);return i.join("/")||(e[0]==="/"?"/":"")},dirname:function(e){var t=o.normalize(e);return t.replace(/\/([^\/]*)$|^[^\/]+$/,"")||(t[0]=="/"?"/":".")},extname:function(e){var t=o.normalize(e).match(/[^\/](\.[^\/\.]*)$/);return t?t[1]:""},basename:function(e,t){var n=o.normalize(e).match(/[^\\\/]*$/);return n=n?n[0]:"",t==o.extname(n)&&(n=n.substring(0,n.length-t.length)),n},resolve:function(){var t=At(arguments).reverse(),n=[],r=!1;for(var s=0;!r&&s<t.length;s++)typeof t[s]=="string"&&(n.unshift(t[s]),r=e.test(t[s]));return r?n.length&&n[0]=="/"&&(n[0]=""):n.unshift(i=="/"?"":i),o.normalize(n.join("/"))},relative:function(e,t){typeof t!="string"&&(t=e,e=i),e=o.normalize(e),t=o.normalize(t);if(e[0]=="/"&&t[0]!="/")return e;if(t[0]=="/"&&e[0]!="/")return t;var n=e.replace(/^\/$/,"").split(/\//),r=t.replace(/^\/$/,"").split(/\//),s=[],u=0;while(r[u]==n[u]&&typeof n[u]=="string")u++;for(var a=n.length-u;a>0;a--)s.push("..");return s.concat(r.slice(u).filter(Boolean)).join("/")}},o}(),Z=i||"",et=s||{devpanel:!1,modules:{},implicitExt:!0,autoload:["./0.js"]},rt=function(){function r(e){return typeof e=="function"&&!!e.basisClassId_}function i(e){var t=this;while(t&&t!==e)t=t.superClass_;return t===e}function o(s){var f=t++;typeof s!="function"&&(s=a);var l=function(){};l.prototype=s.prototype;var c=new l,h={basisClassId_:f,superClass_:s,extendConstructor_:!!s.extendConstructor_,isSubclassOf:i,subclass:function(){return o.apply(null,[v].concat(At(arguments)))},extend:u,factory:function(e){return W(function(t){return new v(T(e,t))})},__extend__:function(e){return e&&e!==n&&(typeof e=="object"||typeof e=="function"&&!r(e))?a.create.call(null,v,e):e},prototype:c};for(var p=1,d;d=arguments[p];p++)h.extend(d);var v=h.extendConstructor_?function(t){this.basisObjectId=e.id++;var n;for(var r in t)n=this[r],this[r]=n&&n.__extend__?n.__extend__(t[r]):t[r];this.init(),this.postInit()}:function(){this.basisObjectId=e.id++,this.init.apply(this,arguments),this.postInit()};c.constructor=v;for(var m in c)c[m]===n&&(c[m]=v);return y(v,h),v}function u(e){var t=this.prototype;typeof e=="function"&&!r(e)&&(e=e(this.superClass_.prototype,S(t))),e.prototype&&(e=e.prototype);for(var n in e){var i=e[n],o=t[n];n=="className"||n=="extendConstructor_"?this[n]=i:o&&o.__extend__?t[n]=o.__extend__(i):t[n]=i}return s&&e[n="toString"]!==h&&(t[n]=e[n]),this}var e={id:1},t=1,n={},s=function(){for(var e in{toString:1})return!1;return!0}(),a=y(o,{className:"basis.Class",extendConstructor_:!1,prototype:{basisObjectId:0,constructor:null,init:function(){},postInit:function(){},destroy:function(){for(var e in this)p.call(this,e)&&(this[e]=null);this.destroy=j}}}),f=function(e,t){return{__extend__:function(e){if(!e)return e;if(e&&e.__extend__)return e;var n=function(){};n.prototype=this;var r=new n;return t(r,e),r}}.__extend__(e||{})},l=function(e){return f(e,y,"extensibleProperty")},c=function(e){return f(e,function(e,t){for(var n in t)if(p.call(t,n)){var r=e[n],i=t[n];i?e[n]=r&&r.__extend__?r.__extend__(i):l(i):e[n]=null}},"nestedExtendProperty")},d=function(e,t){var n=function(t){var r={__extend__:n};if(t){if(t.__extend__)return t;for(var i in t)p.call(t,i)&&t[i]&&(r[i]=e)}return r};return n(t||{})};return y(a,{SELF:n,create:o,isClass:r,customExtendProperty:f,extensibleProperty:l,nestedExtendProperty:c,oneFunctionProperty:d})}(),it=rt(null,{className:"basis.Token",value:null,handler:null,deferredToken:null,bindingBridge:{attach:function(e,t,n,r){e.attach(t,n,r)},detach:function(e,t,n){e.detach(t,n)},get:function(e){return e.get()}},init:function(e){this.value=e},get:function(){return this.value},set:function(e){this.value!==e&&(this.value=e,this.apply())},attach:function(e,t,n){this.handler={fn:e,context:t,destroy:n||null,handler:this.handler}},detach:function(e,t){var n=this,r;while(r=n,n=n.handler)if(n.fn===e&&n.context===t){n.fn=j,n.destroy=n.destroy&&j,r.handler=n.handler;return}},apply:function(){var e=this.get(),t=this;while(t=t.handler)t.fn.call(t.context,e)},deferred:function(){var e=this.deferredToken;return e||(e=this.deferredToken=new ot(this.get()),this.attach(e.set,e)),e},as:function(e){var t=new it,n=function(t){this.set(e.call(this,t))};return typeof e!="function"&&(e=F(e)),n.call(t,this.get()),this.attach(n,t,t.destroy),t.attach(j,this,function(){this.detach(n,t)}),t},destroy:function(){this.deferredToken&&(this.deferredToken.destroy(),this.deferredToken=null),this.attach=j,this.detach=j;var e=this;while(e=e.handler)e.destroy&&e.destroy.call(e.context);this.handler=null,this.value=null}}),st=Q.schedule(function(e){e.apply()}),ot=it.subclass({className:"basis.DeferredToken",set:function(e){this.value!==e&&(this.value=e,st.add(this))},deferred:function(){return this}}),ut={},at={},ft={},lt={},ct=1;(function(){var e=typeof t!="undefined"?t:null;if(e)for(var n in e)ft[Y.resolve(n)]=e[n]})();var pt=function(e,t){var n=e.match(/^([a-zA-Z0-9\_\-]+):/);if(n){var r=n[1];r in St==0&&(St[r]=Y.baseURI+r+"/"),e=St[r]+Y.normalize("./"+e.substr(n[0].length))}else e=Y.resolve(t,e);return e},dt=function(e,t){if(t||!p.call(ft,e)){var n="";if(!c){var r=new u.XMLHttpRequest;r.open("GET",e,!1),r.setRequestHeader("If-Modified-Since",(new Date(0)).toGMTString()),r.setRequestHeader("X-Basis-Resource",1),r.send(""),r.status>=200&&r.status<400&&(n=r.responseText)}else try{n=a.basisjsReadFile?a.basisjsReadFile(e):""}catch(i){}ft[e]=n}return ft[e]},vt=function(e,t){var n=Y.extname(e),r=mt.extensions[n],i=arguments.length>1,s=!1,o=!1,u;i&&(e+="#virtual");var a=function(){if(s)return t;var n=i?t:dt(e);return r?o||(o=!0,t=r(n,e)):t=n,s=!0,ht(a),a.apply(),t};return y(a,y(new it,{url:e,type:n,virtual:i,fetch:function(){return a()},toString:function(){return"[basis.resource "+e+"]"},isResolved:function(){return s},update:function(n){if(!s||i||n!=ft[e])i||(ft[e]=n),r?(!o&&i&&(t=n),o&&!r.permanent&&(t=r(n,e,t),ht(a),a.apply())):(t=n,s=!0,ht(a),a.apply())},reload:function(){if(i)return;var t=ft[e],n=dt(e,!0);n!=t&&(s=!1,a.update(n))},get:function(n){return i&&n?r?u:t:n?dt(e):a()},ready:function(e,t){if(s){e.call(t,a());if(r&&r.permanent)return}return a.attach(e,t),a}})),ut[e]=a,at[e]=a,a},mt=function(e,t){e&&typeof e!="string"&&(e=e.url);var n=t?t+"\0"+e:e,r=at[n];if(!r){var i=pt(e,t,"basis.resource('{url}')");r=ut[i]||vt(i),at[n]=r}return r};y(mt,{resolveURI:pt,buildCloak:mt,isResource:function(e){return e?ut[e.url]===e:!1},isResolved:function(e){var t=mt.get(e);return t?t.isResolved():!1},exists:function(e){return p.call(ut,pt(e,null,"basis.resource.exists('{url}')"))},get:function(e){return e=pt(e,null,"basis.resource.get('{url}')"),mt.exists(e)?mt(e):null},getFiles:function(e){return e?w(ft):w(ut).filter(function(e){return!ut[e].virtual})},virtual:function(e,t,n){return vt((n?n+":":Y.normalize(Y.baseURI=="/"?"":Y.baseURI)+"/")+"virtual-resource"+ct++ +"."+e,t)},extensions:{".js":y(function(t,n){var r=Et[n];if(!r){var i=!0,s=(Y.dirname(n)+"/"+Y.basename(n,Y.extname(n))).replace(/^\/\//,"/");for(var o in St){var u=St[o]+o+"/";if(s.substr(0,u.length)==u){i=!1,s=s.substr(St[o].length);break}}r=s.replace(/\./g,"_").replace(/^\//g,"").replace(/\//g,"."),i&&(r="implicit."+r)}var o=Ct(r);return o.inited||(o.inited=!0,o.exports=yt({path:o.path,exports:o.exports},n,t).exports,o.exports&&o.exports.constructor===Object&&et.implicitExt&&b(o,o.exports)),o.exports},{permanent:!0}),".css":function(t,n,r){return r||(r=new Wt(n)),r.updateCssText(t),r},".svg":function(t,n,r){return r||(r=new Vt(n)),r.updateSvgText(t),r},".json":function(t){if(typeof t=="object")return t;var n;try{t=String(t),n=Jt.json.parse(t)}catch(r){}return n||null}}});var yt=function(e,t,n){var r=Y.dirname(t),i=n;return e.exports||(e.exports={}),typeof i!="function"&&(i=gt(t,["exports","module","basis","global","__filename","__dirname","resource","require","asset"],n)),typeof i=="function"&&i.call(e.exports,e.exports,e,Jt,u,t,r,function(e){return mt(e,r)},function(e){return kt(e,r)},function(e,t){return t===!0?dt(pt(e,r,"asset('{url}',true)")):pt(e,r,"asset('{url}')")}),e},bt={},wt={},Et={},St={};N(et.modules,function(e,t){St[e]=t.path+"/",wt[e]=t.filename,Et[t.filename]=e}),function(t){var t=typeof e!="undefined"?e:null;if(t)for(var n in t){var r=Y.resolve(n),i=t[n];Et[r]=i,wt[i]=r}}();var xt=rt(null,{className:"basis.Namespace",init:function(e){this.name=e,this.exports={}},toString:function(){return"[basis.namespace "+this.name+"]"},extend:function(e){return y(this.exports,e),b(this,e)}}),kt=function(e,t){var n=Y.extname(e);return!/[^a-z0-9_\.]/i.test(e)&&n!=".js"?e=Tt(e):/[\?#]/.test(e)||(n||(e+=".js"),e=pt(e,t,"basis.require('{url}')")),mt(e).fetch()};b(Function.prototype,{bind:function(e){var t=this,n=At(arguments,1);return n.length?function(){return t.apply(e,n.concat.apply(n,arguments))}:function(){return t.apply(e,arguments)}}}),b(Array,{isArray:function(e){return h.call(e)==="[object Array]"}}),b(Array.prototype,{indexOf:function(e,t){t=parseInt(t,10)||0;if(t<0)return-1;for(;t<this.length;t++)if(this[t]===e)return t;return-1},lastIndexOf:function(e,t){var n=this.length;t=parseInt(t,10),isNaN(t)||t>=n?t=n-1:t=(t+n)%n;for(;t>=0;t--)if(this[t]===e)return t;return-1},forEach:function(e,t){for(var n=0,r=this.length;n<r;n++)n in this&&e.call(t,this[n],n,this)},every:function(e,t){for(var n=0,r=this.length;n<r;n++)if(n in this&&!e.call(t,this[n],n,this))return!1;return!0},some:function(e,t){for(var n=0,r=this.length;n<r;n++)if(n in this&&e.call(t,this[n],n,this))return!0;return!1},filter:function(e,t){var n=[];for(var r=0,i=this.length;r<i;r++)r in this&&e.call(t,this[r],r,this)&&n.push(this[r]);return n},map:function(e,t){var n=[];for(var r=0,i=this.length;r<i;r++)r in this&&(n[r]=e.call(t,this[r],r,this));return n},reduce:function(e,t){var n=this.length,r=arguments.length;if(n==0&&r==1)throw new TypeError;var i,s=0;r>1&&(i=t,s=1);for(var o=0;o<n;o++)o in this&&(s++?i=e.call(null,i,this[o],o,this):i=this[o]);return i}});var Mt={from:At,create:Ot,flatten:function(e){return e.concat.apply([],e)},repeat:function(e,t){return Mt.flatten(Ot(parseInt(t,10)||0,e))},search:function(e,t,n,r){e.lastSearchIndex=-1,n=F(n||_);for(var i=parseInt(r,10)||0,s=e.length;i<s;i++)if(n(e[i])===t)return e[e.lastSearchIndex=i]},lastSearch:function(e,t,n,r){e.lastSearchIndex=-1,n=F(n||_);var i=e.length,s=isNaN(r)||r==null?i:parseInt(r,10);for(var o=s>i?i:s;o-->0;)if(n(e[o])===t)return e[e.lastSearchIndex=o]},add:function(e,t){return e.indexOf(t)==-1&&!!e.push(t)},remove:function(e,t){var n=e.indexOf(t);return n!=-1&&!!e.splice(n,1)},has:function(e,t){return e.indexOf(t)!=-1},sortAsObject:function(){return Mt.sort.apply(this,arguments)},sort:function(e,t,n,r){return t=F(t),r=r?-1:1,e.map(function(e,n){return{i:n,v:t(e)}}).sort(n||function(e,t){return r*(e.v>t.v||-(e.v<t.v)||(e.i>t.i?1:-1))}).map(function(e){return this[e.i]},e)}};if(![1,2].splice(1).length){var _t=Array.prototype.splice;Array.prototype.splice=function(){var e=At(arguments);return e.length<2&&(e[1]=this.length),_t.apply(this,e)}}var Dt=/([\/\\\(\)\[\]\?\{\}\|\*\+\-\.\^\$])/g,Pt=/\{([a-z\d_]+)(?::([\.0])(\d+)|:(\?))?\}/gi,Ht={};b(String,{toLowerCase:function(e){return String(e).toLowerCase()},toUpperCase:function(e){return String(e).toUpperCase()},trim:function(e){return String(e).trim()},trimLeft:function(e){return String(e).trimLeft()},trimRight:function(e){return String(e).trimRight()}}),b(String.prototype,{trimLeft:function(){return this.replace(/^\s+/,"")},trimRight:function(){return this.replace(/\s+$/,"")},trim:function(){return this.trimLeft().trimRight()}});var Bt={toObject:function(e,t){try{return(new Function("return 0,"+e))()}catch(n){if(t)throw n}},repeat:function(e,t){return(new Array(parseInt(t,10)+1||0)).join(e)},qw:function(e){var t=e.trim();return t?t.split(/\s+/):[]},forRegExp:function(e){return e.replace(Dt,"\\$1")},format:function(e,t){var n=At(arguments,1);return typeof t=="object"&&y(n,t),e.replace(Pt,function(e,t,r,i,s){var o=t in n?n[t]:s?"":e;return r&&!isNaN(o)?(o=Number(o),r=="."?o.toFixed(i):It.lead(o,i)):o})},formatter:function(e){e=String(e);if(p.call(Ht,e))return Ht[e];var t=function(t){return Bt.format(e,t)};return Ht[e]=t,t},capitalize:function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()},camelize:function(e){return e.replace(/-(.)/g,function(e,t){return t.toUpperCase()})},dasherize:function(e){return e.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()})},isEmpty:function(e){return e==null||String(e)==""},isNotEmpty:function(e){return e!=null&&String(e)!=""}};if("|||".split(/\|/).length+"|||".split(/(\|)/).length!=11){var jt=String.prototype.split;String.prototype.split=function(e,t){if(!e||e instanceof RegExp==0||e.source=="")return jt.call(this,e,t);var n=[],r=0,i;e.global||(e=new RegExp(e.source,/\/([mi]*)$/.exec(e)[1]+"g"));while(i=e.exec(this))i[0]=this.substring(r,i.index),n.push.apply(n,i),r=e.lastIndex;return n.push(this.substr(r)),n}}if("12".substr(-1)!="2"){var Ft=String.prototype.substr;String.prototype.substr=function(e,t){return Ft.call(this,e<0?Math.max(0,this.length+e):e,t)}}var It={fit:function(e,t,n){return!isNaN(t)&&e<t?Number(t):!isNaN(n)&&e>n?Number(n):e},lead:function(e,t,n){return String(e).replace(/\d+/,function(e){return(t-=e.length-1)>1?(new Array(t)).join(n||0)+e:e})},group:function(e,t,n){return String(e).replace(/\d+/,function(e){return e.replace(/\d/g,function(r,i){return!i+(e.length-i)%(t||3)?r:(n||" ")+r})})},format:function(e,t,n,r,i,s){var o=e.toFixed(t);if(n||s)o=o.replace(/(\d+)(\.?)/,function(e,t,r){return(n?Jt.number.group(Number(t),3,n):t)+(r?s||r:"")});return r&&(o=o.replace(/^-?/,"$&"+(r||""))),o+(i||"")}};b(Date,{now:function(){return Number(new Date)}});var qt=function(){function r(){var e;n&&(n=K(n)),t.length>1&&(n=J(r));while(e=t.shift())e[0].call(e[1]);n=K(n),Q.process()}function i(){e++||r()}function s(){try{f.documentElement.doScroll("left"),i()}catch(e){setTimeout(s,1)}}var e=!f||f.readyState=="complete",t=[],n;if(!e)if(f.addEventListener)f.addEventListener("DOMContentLoaded",i,!1),u.addEventListener("load",i,!1);else{f.attachEvent("onreadystatechange",i),u.attachEvent("onload",i);try{!u.frameElement&&f.documentElement.doScroll&&s()}catch(o){}}return function(i,s){!t.length&&e&&!n&&(n=J(r)),t.push([i,s])}}(),Rt=function(){return"addEventListener"in u?function(e,t){u.addEventListener("unload",function(n){e.call(t||null,n||u.event)},!1)}:"attachEvent"in u?function(e,t){u.attachEvent("onunload",function(n){e.call(t||null,n||u.event)})}:j}(),Ut=function(){function r(e){if(f&&!t[e]){t[e]=f[e]||f.getElementsByTagName(e)[0];if(t[e]){var r=n[e];delete n[e];for(var i=0,s;s=r[i];i++)s[0].call(s[1],t[e])}}return t[e]}function i(){var e=this[0],t=this[1],s=this[2];o(t);var u=r(e);if(u){s===!0&&(s=u.firstChild);if(!s||s.parentNode!==u)s=null;u.insertBefore(t,s)}else n[e].push([i,[e,t,s]])}function s(e,r,i){n[e]?n[e].push([r,i]):r.call(i,t[e])}function o(e){for(var t in n){var r=Mt.search(n[t],e,function(e){return e[1]&&e[1][1]});r&&Mt.remove(n[t],r)}e&&e.parentNode&&e.parentNode.nodeType==1&&e.parentNode.removeChild(e)}function u(){e&&r("head")&&r("body")&&(e=clearInterval(e))}var e,t={},n={head:[],body:[]};return f&&(!r("head")||!r("body"))&&(e=setInterval(u,5),qt(u)),{head:{ready:function(e,t){s("head",e,t)},add:function(e,t){i.call(["head",e,t])}},body:{ready:function(e,t){s("body",e,t)},add:function(e,t){i.call(["body",e,t])}},remove:o}}(),zt=function(){function t(){n.globalDestroy=!0,n.add=j,n.remove=j;var t;while(t=e.pop())if(typeof t.destroy=="function")try{t.destroy()}catch(r){}else for(var i in t)t[i]=null;e=[]}var e=[];if(Rt===j)return{add:j,remove:j};Rt(t);var n={add:function(t){t!=null&&e.push(t)},remove:function(t){Mt.remove(e,t)}};return n}(),Wt=function(){function n(e){t.setAttribute("href",e),Ut.head.add(t,!0)}function r(){t.setAttribute("href",l.href),Ut.remove(t)}function i(){n(this.baseURI),this.element||(this.element=f.createElement("style"),e||this.element.appendChild(f.createTextNode(""))),Ut.head.add(this.element),this.syncCssText(),r()}var e=function(){try{return!f.createElement("style").appendChild(f.createTextNode(""))}catch(e){return!0}}(),t=f&&f.createElement("base");return rt(null,{className:"basis.CssResource",inUse:0,url:"",baseURI:"",cssText:undefined,element:null,init:function(e){this.url=e,this.baseURI=Y.dirname(e)+"/"},updateCssText:function(e){this.cssText!=e&&(this.cssText=e,this.inUse&&this.element&&(n(this.baseURI),this.syncCssText(),r()))},syncCssText:e?function(){this.element.styleSheet.cssText=this.cssText}:function(){var e=this.cssText;this.element.firstChild.nodeValue=e},startUse:function(){this.inUse||Ut.head.ready(i,this),this.inUse+=1},stopUse:function(){this.inUse&&(this.inUse-=1,!this.inUse&&this.element&&Ut.remove(this.element))},destroy:function(){this.element&&Ut.remove(this.element),this.element=null,this.cssText=null}})}(),Xt=null,Vt=function(){function t(t){e.setAttribute("href",t),Ut.head.add(e,!0)}function n(){e.setAttribute("href",l.href),Ut.remove(e)}function r(){t(this.baseURI),this.element||(this.element=f.createElement("span")),Xt.appendChild(this.element),this.syncSvgText(),n()}var e=f&&f.createElement("base");return rt(null,{className:"basis.SvgResource",inUse:0,url:"",baseURI:"",svgText:undefined,element:null,init:function(e){this.url=e,this.baseURI=Y.dirname(e)+"/"},toString:function(){return this.svgText},updateSvgText:function(e){this.svgText!=e&&(this.svgText=e,this.inUse&&this.element&&(t(this.baseURI),this.syncSvgText(),n()))},syncSvgText:function(){this.element.innerHTML=this.svgText},startUse:function(){this.inUse||(Xt||(Xt=f.createElement("span"),Xt.style.cssText="position:absolute!important;width:0;height:0;overflow:hidden",Ut.body.add(Xt)),Ut.body.ready(r,this)),this.inUse+=1},stopUse:function(){this.inUse&&(this.inUse-=1,!this.inUse&&this.element&&Xt.removeChild(this.element))},destroy:function(){this.element&&Xt.removeChild(this.element),this.element=null,this.svgText=null}})}(),$t=function(){var e=_,t=function(){},n=function(e,t,n){},r=function(e,t){},i=function(e){};return{fixSourceOffset:e,setInfo:t,patchInfo:n,patchFactory:i,getInfo:r}}(),Jt=Ct("basis").extend({version:o,NODE_ENV:c,config:et,createSandbox:function(e){return n(u,Z,b({noConflict:!0,devpanel:!1},e))},dev:$=(new xt("basis.dev")).extend($).extend($t).extend({warnPropertyAccess:g}),resolveNSFilename:Tt,patch:Lt,namespace:Ct,require:kt,resource:mt,asset:function(e,t){return t===!0?dt(pt(e,null,"basis.asset('{url}')")):pt(e,null,"basis.asset('{url}')")},setImmediate:J,clearImmediate:K,nextTick:function(){J.apply(null,arguments)},asap:Q,FACTORY:d,PROXY:v,Class:rt,Token:it,DeferredToken:ot,codeFrame:G,ready:qt,teardown:Rt,cleaner:zt,genUID:m,getter:F,console:$,path:Y,doc:Ut,object:{extend:y,complete:b,keys:w,values:E,slice:S,splice:x,merge:T,iterate:N},fn:{$undefined:C,$defined:k,$isNull:L,$isNotNull:A,$isSame:O,$isNotSame:M,$self:_,$const:D,$false:P,$true:H,$null:B,$undef:j,getter:F,nullGetter:I,wrapper:q,factory:W,isFactory:X,lazyInit:R,lazyInitAndRun:U,runOnce:z,publicCallback:V},array:y(At,Mt),string:Bt,number:It,bool:{invert:function(e){return!e}},json:{parse:typeof JSON!="undefined"?JSON.parse:function(e){return Bt.toObject(e,!0)}}});return c||et.autoload&&et.autoload.forEach(function(e){kt(e)}),c&&exports&&(exports.basis=Jt),Jt})(this)}).call(this)
